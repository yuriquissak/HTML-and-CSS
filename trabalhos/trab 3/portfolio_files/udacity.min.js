'use strict';(function(){angular.module("udacity.core",["services","controllers","directives","oldFilters","oldMeta"]);angular.module("services","services.gateways services.utility services.reviews services.blogFeed services.forum services.user services.auth services.content services.dummyData services.milestones services.search services.payment".split(" "));angular.module("controllers","controllers.courseCatalog controllers.lesson controllers.reviews controllers.editor controllers.myCourses controllers.search controllers.utility controllers.courseOverview".split(" "));
angular.module("directives","directives.user directives.utility directives.reviews directives.forum directives.myCourses directives.search directives.payment".split(" "));angular.module("oldFilters",[]);angular.module("oldMeta",["meta.configuration"]);angular.module("services.gateways",["services.customers","services.groups","services.summaries","services.permissions"]);angular.module("services.lesson",[]);angular.module("directives.lesson",[]);angular.module("controllers.lesson",[]);angular.module("controllers.settings",
[]);angular.module("directives.location",[]);angular.module("controllers.courseCatalog",[]);angular.module("controllers.courseOverview",[]);angular.module("controllers.myCourses",[]);angular.module("directives.myCourses",[]);angular.module("controllers.search",[]);angular.module("directives.search",[]);angular.module("services.search",[]);angular.module("services.utility",[]);angular.module("directives.utility",[]);angular.module("controllers.utility",[]);angular.module("directives.reviews",[]);angular.module("services.reviews",
[]);angular.module("controllers.reviews",[]);angular.module("services.blogFeed",[]);angular.module("directives.forum",[]);angular.module("services.forum",[]);angular.module("directives.payment",[]);angular.module("services.payment",[]);angular.module("services.editor",[]);angular.module("directives.editor",[]);angular.module("controllers.editor",[]);angular.module("meta.configuration",[]);angular.module("services.content",[]);angular.module("services.milestones",[]);angular.module("services.user",
[]);angular.module("directives.user",[]);angular.module("services.auth",[]);angular.module("services.customers",[]);angular.module("services.groups",[]);angular.module("services.summaries",[]);angular.module("services.permissions",[]);angular.module("services.milestones",[]);angular.module("services.dummyData",[]);angular.module("youtube",[]);angular.module("oldUdacity",["udacity.core"]);angular.module("udacity.viewer",["udacity.core","youtube","services.lesson","directives.lesson","controllers.lesson"]);
angular.module("udacity.overview",["udacity.core","youtube"]);angular.module("udacity.courseCatalog",["udacity.core"]);angular.module("udacity.editor",["udacity.core","services.editor","directives.editor","controllers.editor","services.lesson"]);angular.module("udacity.settings",["udacity.core","controllers.settings","directives.location"]);angular.module("udacity.payment",["udacity.core"]);angular.module("udacity.core").config(["$locationProvider",function(a){a.html5Mode(!1);a.hashPrefix("!")}])})();function readCookie(a){for(var a=a+"=",c=document.cookie.split(";"),b=0;b<c.length;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null}angular.module("core","foundation gateways user utility filters widgets ngRoute ngSanitize ngAnimate payment embedded ngTouch".split(" "));angular.module("udacity",["core","staticPages"]);angular.module("foundation",["user","viewer"]);angular.module("tasks",[]);
angular.module("gateways",["utility","embedded","foundation"]);angular.module("widgets",["user","filters"]);angular.module("staticPages",["core"]);angular.module("user",["utility","gateways","embedded","foundation"]);angular.module("permissions",["ui.autocomplete"]);angular.module("payment",[]);angular.module("embedded",[]);angular.module("utility",["gateways","tasks"]);angular.module("filters",[]);angular.module("viewer",["core"]);angular.module("account",["core","ui.bootstrap"]);
angular.module("overview",["core"]);angular.module("dashboard",["core","viewer"]);angular.module("courseCatalog",["core"]);angular.module("groupDataExtraction",["core"]);angular.module("affiliatePortal",["core"]);
angular.module("core").config(["$locationProvider","$compileProvider",function(a,c){a.html5Mode(!1);a.hashPrefix("!");c.aHrefSanitizationWhitelist(/^\s*(https?|mailto|blob):/)}]).run(["dateTime","secondsSinceEpoch","$rootScope","$location","currentUser","$window","googleBranding",function(a,c,b,d,e,f,g){a.initialize(1E3*c);var h=readCookie("ajs_user_id");b.$on("$locationChangeStart",function(){g.determineGoogleBrandedUrl(window.location.search)&&(b.isGoogleBranded=!0)});b.$on("$locationChangeSuccess",
function(a,d,c){function g(a){return a.replace("-"," ").replace("_"," ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}a=!1;-1!==d.indexOf("#!")&&(-1===c.indexOf("#!")&&d.replace("#!","").replace(/\/$/,"")===c.replace(/\/$/,""))&&(a=!0);var m=d.replace("#!",""),m=m.replace(/\/$/,""),m=URI.parse(m),n=m.path.toLowerCase();""!==n&&!/^\/(me|courses|nanodegree|course|account|checkout)/.test(n)&&(a=!0);var p=e.getUser();if(p&&p._registered&&p.key){var q;q=decodeURIComponent(h);
q=q.substring(1,q.length-1);q!==p.key.toString()&&(analytics.reset(),h=null);if(_.isNull(h)||"null"===h)q={firstName:p.first_name,lastName:p.last_name},p.email&&p.email.address&&(q.email=p.email.address),analytics.identify(p.key,q),h='"'+p.key+'"'}var p=null,r=/^\/course\/.*--.*$/i,s=/^\/course\/viewer/i;q=null;var w=/^\/!c-nd\d{3}.*/i,v=/^\/course\/.*--nd\d{3}$/i;""===n?q=p="Home":"/account"===n.substring(0,8)?"/account/auth/signin"===n?q=p="Sign In":"/account/auth/signup"===n?q=p="Sign Up":(p="My Account Settings",
q="My Account Settings - "+(g(n.substring(9,n.length))||"Contact Info")):"/me"===n.substring(0,3)?q=p="My Home":"/nanodegree"===n?q=p="Nanodegrees":"/courses"===n.substring(0,8)?(p="Catalog",q="Catalog - "+g(n.substring(9,n.length))):"/checkout"===n.substring(0,9)?q=p="Checkout":v.test(n)?(p="Nanodegree Info",q="Nanodegree Info - "+n.split("--")[1]):s.test(n)?(p=/c-([^/]+)/.exec(n),q="unknown",2<=p.length&&(q=p[1]),w.test(n)?(p="My Nanodegree Classroom",q="My Nanodegree Classroom - "+q):(p="My Course Classroom",
q="My Course Classroom - "+q)):r.test(n)&&(p="Course Info",q="Course Info - "+n.split("--")[1]);var m={category:p,path:n,search:m.query,url:d},t={},w=function(a){var b={};b.conceptKey=t.exercise?a.morsel:a.exercise;b.atomKey=a.morsel;b.lessonKey=a.lesson;"nd"==t.course.toLowerCase().substring(0,2)?(b.degreeKey=a.course,b.projectKey=null,b.moduleKey=null):b.courseKey=a.course;return b};if("My Nanodegree Classroom"===p||"My Course Classroom"===p)_.each({course:/c-([^/]+)/,lesson:/l-(\d+)/,morsel:/m-(\d+)/,
exercise:/e-(\d+)/},function(a,b){var d=a.exec(n);d&&d.length&&(t[b]=d[1])}),null==t.morsel?a=!0:_.extend(m,w(t));m.referrer=d===c?document.referrer:c;b.segmentPageProperties={page:m};f.segmentPageProperties={page:m};a||analytics.page(p,q,m)})}]);angular.module("page.account",["ngRoute","core","account"]);
angular.module("page.account").config(["$locationProvider","$routeProvider","cacheVersion","siteExperience",function(a,c,b,d){a=function(a){return d.managedAccount?{redirectTo:"/classroom-settings"}:a};c.when("/password",a({templateUrl:"/templates/angular/account/password.html?"+b,controller:"passwordTab"})).when("/development_environment",a({templateUrl:"/templates/angular/account/development_environment.html?"+b,controller:"developmentEnvironmentInfoTab"})).when("/my-courses",a({templateUrl:"/templates/angular/account/my_courses.html?"+
b,controller:"myCoursesTab"})).when("/my-certificates",a({templateUrl:"/templates/angular/account/my_certificates.html?"+b,controller:"myCertificatesTab"})).when("/employer-info",a({templateUrl:"/templates/angular/account/employer-info.html?"+b,controller:"employerInfoTab"})).when("/billing-and-subscriptions",a({templateUrl:"/templates/angular/account/billing_and_subscriptions.html?"+b,controller:"billingAndSubscriptionsTab"})).when("/linked-accounts",{templateUrl:"/templates/angular/account/linked_accounts.html?"+
b,controller:"linkedAccountsTab"}).when("/classroom-settings",{templateUrl:"/templates/angular/account/viewer_settings.html?"+b,controller:"viewerSettings"}).when("/memberships",a({templateUrl:"/templates/angular/account/membership.html?"+b,controller:"membershipPage"})).otherwise(a({templateUrl:"/templates/angular/account/contact_info.html?"+b,controller:"contactInfoTab"}))}]);
angular.module("account").controller("accountPage",["$scope","$location",function(a,c){a.isActive=function(a){return c.path()?c.path()===a:"/contact-info"===a}}]);angular.module("account").controller("billingAndSubscriptionsTab",["$scope","currentUser","modal","stripeCreditCard","customers","ModalService","PauseSubscription","cancellationFlow",function(a,c,b,d,e,f,g,h){a.loading=!0;a.editingCreditCard=!1;a.enabledCreditCardButton=!0;a.creditCardErrorMessage="";a.cancelSubscription=h.cancelSubscription;a.removePaymentCard=function(d){a.loading=!0;return null===a.customer.subscriptions||0===a.customer.subscriptions.length?b.activate("removeCard").then(function(){return e.removeCreditCard("me",
d).then(function(){a.customerCard=null;a.serverSuccess=!0},function(){a.serverError=!0})})["finally"](a.loading=!1):b.activate("cannotRemoveCard").then(function(){a.editingCreditCard=!0})["finally"](a.loading=!1)};a.isPaused=function(a){return g.isPaused(a)};c=function(){a.loading=!0;return e.get("me").then(function(b){a.loading=!1;b&&(a._addNonStripeSubscriptionsFromBraavos(b),_.each(b.subscriptions,function(b){a.calculateNextChargeAmount(b)}),a.customer=b,a._addSimplifiedSubscriptionMetadata(a.customer.subscriptions),
a.customer.subscriptions.forEach(function(a){g.isPaused(a)&&(a.paused_until=g.getEndDate(a))}),a.customerCard=d.getDefaultCard(b),a.creditCard={})})};a.$on("refreshPageData",c);a.calculateNextChargeAmount=function(a){var b=a.plan.amount;if(a.discount){var d=a.discount.coupon;d.percent_off&&(b-=b*d.percent_off/100);d.amount_off&&(b-=d.amount_off)}a.nextChargeAmount=b;return a};a.addSubscriptionMeta=function(a){a.setForCancellation=a.cancel_at_period_end;a.isLive="trialing"!==a.status||a.plan.metadata.trial_period_days&&
0<a.plan.metadata.trial_period_days;return a};a._addNonStripeSubscriptionsFromBraavos=function(a){var b=_.each(_.filter(a.braavos_subscriptions,function(a){return"stripe"!==a.provider}),function(a){a.plan={name:a.plan_name,amount:a.plan_amount,currency:a.plan_currency};a.current_period_end=Date.parse(a.current_period_end)/1E3;return a});Array.prototype.push.apply(a.subscriptions,b);return a};a._addSimplifiedSubscriptionMetadata=function(b){_.isArray(b)||(b=[b]);return _.each(b,function(b){a.addSubscriptionMeta(b)})};
a.updateCreditCard=function(){var b=d.checkValidity(a.creditCard);a.creditCardErrors=b.errorText;b.valid&&(a.enabledCreditCardButton=!1,d.createPaymentToken("Update Credit Card",a.creditCard).then(function(a){return a.id}).then(function(a){return e.put("me",{stripe_token:a})}).then(function(b){a.creditCardErrorMessage="";a.customer=b;a.customerCard=d.getDefaultCard(b);a.editingCreditCard=!1;a.enabledCreditCardButton=!0},function(b){a.creditCardErrorMessage=d.prettifyErrorResponse(b);a.enabledCreditCardButton=
!0}))};c()}]).directive("cancelDesc",["$compile",function(a){return{restrict:"E",replace:!0,template:"<div></div>",link:function(c,b,d){d=c.$eval(d.desc);b.html(d);a(b.contents())(c)}}}]).directive("settingsSubscription",["ModalService","PauseSubscription","$window",function(a,c,b){return{restrict:"E",template:'<div><label class="col-xs-4 control-label">{{subscription.plan.name}}</label><div class="col-xs-5"><div data-ng-hide="subscription.setForCancellation"><p data-ng-show="subscription.isLive && !isPaused(subscription)" class="form-control-static">Next bill on {{1000*subscription.current_period_end | date:"longDate"}} for {{subscription.nextChargeAmount | formatCurrency:subscription.plan.currency.toUpperCase():2}}.</p><p data-ng-show="subscription.isLive && isPaused(subscription)" class="form-control-static"><strong>Paused</strong> until {{subscription.paused_until}}</p><p data-ng-hide="subscription.isLive" class="form-control-static">Starting soon.</p><div class="row"><p class="col-xs-6"><a href data-ng-click="cancelSubscription(subscription)">Cancel Subscription</a></p><p ng-if="!isPaused(subscription) && canPause" class="col-xs-6 sub-pause-link"><a href="" data-ng-click="pauseSubscription(subscription)">Pause Subscription</a></p><p ng-if="isPaused(subscription)" class="col-xs-6 sub-unpause-link"><a href="" data-ng-click="unPauseSubscription(subscription)">Unpause Subscription</a></p></div></div><p data-ng-show="subscription.setForCancellation" class="form-control-static">Will cancel at end of current billing period on {{1000*subscription.current_period_end | date:"longDate"}}.</p></div></div>',
replace:!0,link:function(d){d.isPaused(d.subscription)&&(d.subscription.paused_until=c.getEndDate(d.subscription));d.canPause=!1;c.canPause(d.subscription).then(function(a){d.canPause=a});d.unPauseSubscription=function(){a.showModal({template:"<pause-subscription-modal></pause-subscription-modal>",controller:"PauseModalController",controllerAs:"vm",inputs:{subscription:d.subscription,customer:d.customer,currentPage:4}}).then(function(a){a.close.then(function(a){a&&!c.isPaused(a)&&(d.subscription=
d.addSubscriptionMeta(a),d.subscription=d.calculateNextChargeAmount(d.subscription))})})};d.pauseSubscription=function(){analytics.track("Subscription Pause Intent",{node:d.subscription.plan.metadata.sku},b.segmentPageProperties);a.showModal({template:"<pause-subscription-modal></pause-subscription-modal>",controller:"PauseModalController",controllerAs:"vm",inputs:{subscription:d.subscription,customer:d.customer,currentPage:1}}).then(function(a){a.close.then(function(a){a&&c.isPaused(a)&&(d.subscription=
d.addSubscriptionMeta(a),d.subscription.paused_until=c.getEndDate(d.subscription))})})}}}}]);angular.module("account").factory("cancellationFlow",["modal","$q","api","$location","customers","CancellationFrame","products","recordActivity","dateTime","currentUser","$rootScope","$window",function(a,c,b,d,e,f,g,h,i,j,l,k){var m=j.fetchFullUser();return{cancelSubscription:function(d){var c=d.id,e=d.status,h=1E3*(d.trial_end||d.start),j=1E3*d.current_period_end,l=(Math.random().toString(36)+"000000000000000").slice(2,16),v=d.plan.id;"trialing"!==e&&i.calculateDaysBetweenDates(new Date(h),i.getCurrent());
f.setFlowToken(l);f.sendCancellationActivity("start");return m.then(function(){return g.get(v).then(function(a){try{return f.setCourseKey(a._course_groups[0].course_ref.key),b.get("/users/node_progress/"+f.getCourseKey()).then(function(a){f.setCompletionStats(a.data.stats);return a.data.stats})}catch(d){return f.setCourseKey("ndXXX")}})}).then(function(){return a.activate("postCancelSurvey",{subscriptionId:c,subscriptionPlanId:v,subscriptionPeriodEndDate:new Date(j),subscription:d}).then(function(){k.location.reload()}).catch(function(){f.sendCancellationActivity("abort").then(function(){f.setCurrentFrame("cancelSurvey")})})},
function(){k.location.reload()})}}}]);angular.module("account").factory("CancellationFrame",["recordActivity",function(a){var c="cancelSurvey",b="",d="",e={time:0,projects:0,quizzes:0},f=function(){switch(c){case "cancelSurvey":return 1;case "accomplishments":return 2;case "hereToHelp":return 3;case "startAConvo":return 4;case "rogerThat":return 5;case "reminder":return 6;case "cancelled":return 7}},g=function(){var a=d.slice(0,2);return"ca"===a?"Career":"nd"===a?"Degree":"Course"};return{getCurrentStep:f,getCurrentFrame:function(){return c},
setCurrentFrame:function(a){return c=a},getFlowToken:function(){return b},setFlowToken:function(a){return b=a},getCourseKey:function(){return d},setCourseKey:function(a){return d=a},getCourseType:g,sendCancellationActivity:function(c,e,j,l){var k=b,e=e||f(),m=d,n=g(),p,q;j&&(p=j);l&&(q=l);return a.cancellationFlowStep(k,e,m,n,c,p,q)},getCompletionStats:function(){return e},setCompletionStats:function(a){e={time:Math.round(a.time/60),projects:a.projects,quizzes:a.quizzes}},sufficientTimeInClass:function(){return 30<=
e.time}}}]);angular.module("account").controller("contactInfoTab",["$scope","country","currentUser","users","validator","$window",function(a,c,b,d,e,f){a.saveDisabled=!1;a.showForm=!1;a.serverSuccess="";a.serverError="";a.countries=[""].concat(c.countries);a.contactInfoErrors={};b.fetchFullUser().then(function(b){a.user=b;a.user.mailing_address||(a.user.mailing_address={address_line_1:"",address_line_2:"",city:"",region:"",postal_code:"",country:""});a.showForm=!0});a.saveContactInfo=function(){if(!a.saveDisabled){a.saveDisabled=
!0;a.serverSuccess="";a.serverError="";var b;b=e.check({setsFirstName:{pretty:"first name",value:a.user.first_name,validators:[{type:"required"}]},setsLastName:{pretty:"last name",value:a.user.last_name,validators:[{type:"required"}]},setsEmail:{pretty:"email address",value:a.user.email.address,validators:[{type:"required",chained:[{type:"email"}]}]}});a.contactInfoErrors=b.errorText;b.valid?d.put(a.user).then(function(){a.serverSuccess="Contact Information Saved";a.saveDisabled=!1;f.location.reload()},
function(b){a.serverError=b.error;a.saveDisabled=!1}):a.saveDisabled=!1}}}]);angular.module("account").controller("developmentEnvironmentInfoTab",["$scope","currentUser","developmentEnvironments","$log",function(a,c){a.accountKey=c.get("key")}]);angular.module("account").controller("employerInfoTab",["$q","$scope","$window","affiliates","country","currentUser","users","validator",function(a,c,b,d,e,f,g,h){c.saveDisabled=!1;c.showForm=!1;c.serverSuccess="";c.serverError="";c.employerInfoErrors={};f.fetchFullUser().then(function(a){c.user=a;c.user.employer_info||(c.user.employer_info={employer:"",employee_id:"",employer_payment:""});c.showForm=!0});c.fetchAffiliateNames=function(){return d.list({limit:100}).then(function(a){return a.filter(function(a){var b=
RegExp(c.user.employer_info.employer,"gi");return a.is_included_for_employer_info&&b.test(a.name)}).map(function(a){return a.name})})};c.saveEmployerInfo=function(){if(!c.saveDisabled){c.saveDisabled=!0;c.serverSuccess="";c.serverError="";var a;a=h.check({setsEmployer:{pretty:"employer",value:c.user.employer_info.employer,validators:[{type:"required"}]},setsEmployerPayment:{pretty:"employer payment",value:c.user.employer_info.employer_payment,validators:[{type:"required"}]}});c.employerInfoErrors=
a.errorText;a.valid?g.put(c.user).then(function(){c.serverSuccess="Employer Information Saved";c.saveDisabled=!1;b.location.reload()},function(a){c.serverError=a.error;c.saveDisabled=!1}):c.saveDisabled=!1}}}]);angular.module("account").controller("linkedAccountsTab",["$scope","$timeout","currentUser","users","google","facebook","normalizedSocialService","session","siteExperience",function(a,c,b,d,e,f,g,h,i){a.loading=!0;a.managed=i.managedAccount;a.accounts={google:null,facebook:null};var j=function(){a.serverSuccess="";a.serverError=""},l=function(b,d,c){d=g.normalizeAccount(b,d);d.id===a.user["_"+b+"_id"]||c?d.loggedIn=!0:d={loggedIn:!1};return a.accounts[b]=d},k=function(b){a.loading=!1;a.serverError=
b.error};a.getLinkedAccountTypes=function(){return _.keys(a.accounts)};a.disconnect=function(b){a.loading=!0;var c={key:a.user.key};c[b+"_id"]=null;d.put(c).then(function(d){j();a.loading=!1;a.user=d;"github"!==b&&(a.accounts[b]=null)},k)};a.disconnectSocial=function(b){a.loading=!0;var c={key:a.user.key},e=a.user.social_accounts.length&&"github"==b?"social_accounts":"external_accounts",f=null;_.each(a.user[e],function(a,d){if(a.account_type===b||a.affiliate_program_key===b)f=d});null==f?a.loading=
!1:(a.user[e].splice(f,1),c[e]=a.user[e],d.put(c).then(function(d){j();a.loading=!1;a.user=d;a[b]=null},k))};a.connect=function(b){a.loading=!0;var e=g.normalizeAccountService(b),f=function(g,h){var i=function(a){401===a.code&&f(g-1,3*h)};0===g&&(i=k);c(function(){e.getAccount().then(function(c){var e={key:a.user.key};e[b+"_id"]=c.id;d.put(e).then(function(d){c=l(b,c,!0);j();a.loading=!1;a.user=d},k)},i)},h)},i=function(){f(3,500)};e.login().then(function(a){a=g.createSessionData(b,a);h.put(a).then(i,
i)},k)};j();b.fetchFullUser().then(function(){a.loading=!1;a.user=b.getUser();_.each(a.user.social_accounts,function(b){a[b.affiliate_program_key]=b});_.each(a.user.external_accounts,function(b){a[b.affiliate_program_key]=b});_.each(a.getLinkedAccountTypes(),function(a){g.normalizeAccountService(a).getAccount().then(function(b){l(a,b)})})},k)}]);angular.module("account").controller("myCertificatesTab",["$q","$scope","$sce","currentUser","users","nodes",function(a,c,b,d,e,f){c.loading=!0;c.verifiedCertificates=[];c.nodeMap={};c.serverError="";var g=d.getUser();c.getBadges=function(){return _.filter(g._badges,function(a){return"Course Mastery"===a.name&&0<a.highest_level})};a.all([e.getCertificates("me").then(function(a){c.verifiedCertificates=a;a=_.map(a,function(a){return a.node_ref.key});return f.batchGet(a,{projection:"catalog"}).then(function(a){_.extend(c.nodeMap,
a)})}),d.fetchFullUser().then(function(a){g=a;a=c.getBadges();a=_.map(a,function(a){return a.target_ref.key});return f.batchGet(a,{projection:"catalog"}).then(function(a){_.extend(c.nodeMap,a)})})]).then(function(){c.loading=!1},function(a){c.loading=!1;console.error(a.error);c.serverError=b.trustAsHtml('Looks like there was a problem retrieving your data.  If you keep getting this message after refreshing the page please contact us at <a href="mailto:tech-support@udacity.com">tech-support@udacity.com</a>')})}]);angular.module("account").controller("myCoursesTab",["$q","$scope","currentUser","modal","nodeUtility","nodes","myCourses",function(a,c,b,d,e,f,g){c.loading=!0;c.isPreEnrolled=e.isPreEnrolled;c.isCurrentEnrolled=e.isCurrentEnrolled;c.isFreeEnrolled=e.isFreeEnrolled;c.hasEnrolled=e.hasEnrolled;c.confirm=d.confirm;c.cancel=d.cancel;c.remove=function(a){c.loading=!0;d.activate("removeCourse").then(function(){b.enroll(a,"unenrolled")},function(){c.loading=!1})};var h=function(){a.all([g.getNodeMap(),
g.getSortedEnrollments(!0),g.getSortedEnrollments(!1)]).then(function(a){c.nodeMap=a[0];c.forPayEnrollments=a[1];c.nonPayEnrollments=a[2];c.loading=!1})};c.$on("modifiedEnrollment",function(){h()});h()}]);angular.module("account").controller("passwordTab",["$scope","currentUser","users","validator",function(a,c,b,d){function e(){a.currentPassword="";a.newPassword="";a.confirmedNewPassword="";a.saveDisabled=!1}a.serverSuccess="";a.serverError="";e();a.passwordErrors={};a.showForm=!1;c.fetchFullUser().then(function(b){a.user=b;a.showForm=!0});a.resetPassword=function(){if(!a.saveDisabled){a.saveDisabled=!0;a.serverSuccess="";a.serverError="";var f;f={setsNewPass:{pretty:"your new password",value:a.newPassword,
validators:[{type:"required",chained:[{type:"strLen",args:[7,void 0]}]}]},setsConfirmedNewPass:{pretty:"new password confirmation",value:a.confirmedNewPassword,validators:[{type:"required",failMsg:"A password confirmation is required.",disabled:""===a.newPassword,chained:[{type:"equal",args:[a.newPassword,"password"]}]}]}};a.user._has_password&&(f.setsCurrPass={pretty:"password",value:a.currentPassword,validators:[{type:"required",failMsg:"Your current password is required.",disabled:""===a.newPassword&&
""===a.confirmedNewPassword}]});f=d.check(f);a.passwordErrors=f.errorText;f.valid?(f={key:c.getUser().key,password:{old:a.currentPassword,"new":a.newPassword}},b.put(f).then(function(){a.serverSuccess="Password successfully updated!";e()},function(b){a.serverError=b.error;a.saveDisabled=!1})):a.saveDisabled=!1}}}]);(function(){angular.module("account").factory("PauseSubscription",["$http","currentUser",function(a,c){return{pause:function(b,d){var e=c.get("key");return a({method:"POST",url:"/api/customers/"+e+"/subscriptions/"+b.id+"/pause",data:d}).then(function(a){return a.data.subscription})},isPaused:function(a){return a.metadata&&"trialing"===a.status&&"True"===a.metadata.paused},canPause:function(b){var d=c.get("key"),b=b.id;return void 0===b?{then:function(){return!1}}:a({method:"GET",url:"/api/customers/"+
d+"/subscriptions/"+b+"/can_pause"}).then(function(a){return a.data.can_pause})},dropdowns:{reasons:{value:!1},days:{value:!1}},unpause:function(b){var d=c.get("key");return a({method:"POST",url:"/api/customers/"+d+"/subscriptions/"+b.id+"/unpause"}).then(function(a){return a.data.subscription})},getEndDate:function(a){return moment(new Date(1E3*a.trial_end)).format("MMM Do")}}}]).controller("PauseModalController",["close","subscription","currentPage","PauseSubscription","$window","customer",function(a,
c,b,d,e,f){this.pauseData={};this.unpauseText="Unpause and resume learning";this.pauseText="Pause Subscription";this.close=function(){a(this.subscription)};this.cancel=function(){analytics.track("Subscription Pause Not Completed",{node:this.subscription.plan.metadata.sku},e.segmentPageProperties);a(!1)};this.notReady=function(){a(!1)};this.dropdown={reasons:{value:!1},days:{value:!1}};this.subscription=c;this.subscription.balance=f.account_balance;d.isPaused(this.subscription)&&(this.subscription.paused_until=
d.getEndDate(this.subscription));this.currentPage=b||1;this.showOtherForm=!1;this.modalClick=function(){_.each(d.dropdowns,function(a){a.value=!1})};this.nextPage=function(){this.currentPage++};this.prevPage=function(){this.currentPage--};this.reasons="I am unable to pay for the Nanodegree program right now;I have conflicts with another education program;I have conflicts with a job or work;I am taking a vacation, holiday or break;I want to fulfill some prerequisites before returning;It's something else".split(";");
this.periods=["7 days","14 days","30 days"];this.handlePauseTime=function(a){this.formData.number_of_days=parseInt(a)};this.handleReasonSelect=function(a){"It's something else"===a?(this.formData.reason="",this.showOtherForm=!0):(this.showOtherForm=!1,this.formData.reason=a)};this.formData={number_of_days:7};this.selectedOtherReason=!1;this.gotoNextPage=function(){++this.currentPage};this.unpause=function(){this.unpauseText="Unpausing ...";d.unpause(this.subscription).then(function(a){this.subscription=
a;this.close(a)}.bind(this)).catch(function(){})};this.pause=function(){this.pauseText="Pausing ...";d.pause(this.subscription,this.formData).then(function(a){this.subscription=a;this.subscription.paused_until=d.getEndDate(this.subscription);this.subscription.balance=f.account_balance;this.gotoNextPage()}.bind(this)).catch(function(){this.close()}.bind(this))}}]).directive("slideDownBox",["PauseSubscription",function(a){return{restrict:"E",scope:{items:"=",onSelected:"&",firstItem:"@"},template:'<div class="slidedown-box" ng-class="{rel: open.value === true}"><div class="small-box" ng-hide="open.value" ng-click="onDropDownClick($event)"><span>{{selectedItem}}</span><span class="arrow-down"><span></div><div class="long-box" ng-show="open.value"><div ng-repeat="item in items" ng-click="onItemSelect($event, item)" class="long-box-item"><span>{{::item}}</span></div></div></div>',
replace:!0,link:function(c,b,d){c.open=a.dropdowns[d.key];c.items=c.items||[];c.viewItems=[].concat(c.items);c.selectedItem=c.firstItem||c.items[0]||"Select one...";c.onDropDownClick=function(a){a.stopPropagation();c.open.value=!0};c.onItemSelect=function(a,b){a.stopPropagation();c.selectedItem=b;c.viewItems=_.without(c.items,b);c.viewItems.unshift(b);c.open.value=!1;c.onSelected&&c.onSelected({reason:b})}}}}]).directive("pausePageOne",[function(){return{restrict:"E",template:'<div class="puase-page page-one"><div class="row"><div class="col-xs-12 modal-title"><h5 style="color: black;">Pause Subscription</h5></div><div class="col-xs-12 modal-subtitle"><span style="color: grey;">To better support your needs, tell us why you want to pause</span></div><div class="col-xs-12 dropdown-container"><slide-down-box key="reasons" items="vm.reasons" first-item="{{\'Select one ...\'}}" on-selected="vm.handleReasonSelect(reason)"></slide-down-box></div><div class="col-xs-12" ng-if="vm.showOtherForm"><textarea class="reason-input" placeholder="Tell us a bit more" ng-model="vm.formData.reason"></textarea></div><div class="col-xs-12"><div class="divider"></div></div><div class="col-xs-12 pause-container"><div class="row"><div class="col-xs-8 how-long"><span>How long would you like to pause for?</span></div><div class="col-xs-4"><slide-down-box key="days" items="vm.periods" on-selected="vm.handlePauseTime(reason)"></slide-down-box></div></div></div><div class="col-xs-12"><p class="legal-text">Your subscription will be paused immediately and any remaing credit will be applied to your first payment after unpausing. We will remind you via email 3 days before this subscription unpauses. During this time, your progress will be saved but you will lose access to the content, forums, code reviews, mentor service and any other paid services included in the Nanodegree program. You can only pause once for a particular program. If you have any questions, please view our <a href="https://udacity.zendesk.com/hc/en-us/sections/201837466-Pausing-Your-Subscription">FAQ</a> or email us at <a href="mailto:payment-support@udacity.com">payment-support@udacity.com</a></p></div><div class="col-xs-12"><div class="row"><div class="col-xs-3 col-xs-offset-3"><button class="u2-button u2-button-plain" ng-click="vm.cancel()">not now</button></div><div class="col-xs-3"><button ng-disabled="!vm.formData.reason || !vm.formData.number_of_days" class="u2-button" ng-click="vm.nextPage()">continue</button></div></div></div></div></div>',
replace:!0}}]).directive("pausePageTwo",[function(){return{restrict:"E",template:'<div class="pause-page"><div class="row"><div class="col-xs-12" style="text-align: center; margin-bottom: 25px;"><span><img src="/media/img/site/icons/udacity/pause-graphic.svg"/></span></div><div class="col-xs-12 modal-title"><h5 style="color: black;">Just to confirm</h5></div><div class="col-xs-12 modal-subtitle"><span style="color: grey;">You are pausing <span>{{::vm.subscription.plan.name}} Program</span></span></div><div class="col-xs-12"><div class="divider"></div></div><div class="col-xs-12"><p class="legal-text" style="margin-bottom: 25px">Once your subscription resumes, you will get billed immediately with an adjusted amount based on your account balance.</p></div><div class="col-xs-12"><div class="row"><div class="col-xs-3 col-xs-offset-2"><button class="u2-button u2-button-plain" ng-click="vm.prevPage()">go back</button></div><div class="col-xs-6"><button class="u2-button" ng-click="vm.pause()"><span style="margin-right: 10px"><img src="/media/img/site/icons/udacity/pause-icon.svg"/></span><span>{{vm.pauseText}}</span></button></div></div></div></div>',
replace:!0}}]).directive("pausePageThree",[function(){return{restrict:"E",template:'<div class="pause-page"><div class="row"><div class="col-xs-12" style="text-align: center; margin-bottom: 25px;"><span><img  src="/media/img/site/icons/udacity/confirmation-graphic.svg"/></span></div><div class="col-xs-12 modal-title"><h5 style="color: black; font-weigth: bold;">You\'re subscription has been paused until {{vm.subscription.paused_until}}</h5></div><div class="col-xs-12 modal-subtitle"><span style="color: grey;">For <span>{{::vm.subscription.plan.name}} Program</span></span></div><div class="col-xs-12"><div class="divider"></div></div><div class="col-xs-12" style="text-align: center;"><p style="text-align: center;" class="legal-text">Just remember, you can unpause anytime you are ready to jump back into your Nanodegree Program. Can\'t wait to see you again on {{vm.subscription.paused_until}}!</p></div><div class="col-xs-12"><div class="row"><div class="col-xs-4 col-xs-offset-4" style="text-align: center;"><button class="u2-button" ng-click="vm.close()">got it</button></div></div></div></div>',
replace:!0}}]).directive("pausePageFour",[function(){return{restrict:"E",template:'<div class="pause-page"><div class="row"><div class="col-xs-12" style="text-align: center; margin-bottom: 25px;"><span><img src="/media/img/site/icons/udacity/unpause-graphic.svg"" /></span></div><div class="col-xs-12 modal-title"><h5 style="color: black; font-weigth: bold;">Ready to get back into</h5></div><div class="col-xs-12 modal-subtitle"><span style="color: grey;">{{::vm.subscription.plan.name}} Program?</span></div><div class="col-xs-12"><div class="divider"></div></div><div class="col-xs-12" style="text-align: center;"><p style="text-align: center;" class="legal-text">We\'re super excited to have you back in the program! Once your subscription resumes, you will get billed immediately with an adjusted amount based on your account balance. Your current account balance is {{vm.subscription.balance | formatCurrency:vm.subscription.plan.currency.toUpperCase():2}}.</p></div><div class="col-xs-12"><div class="row"><div class="col-xs-3 col-xs-offset-2"><button class="u2-button u2-button-plain" ng-click="vm.notReady()">not now</button></div><div class="col-xs-6 style="text-align: center;"><button class="u2-button" ng-click="vm.unpause()">{{vm.unpauseText}}</button></div></div></div></div>',
replace:!0}}]).directive("pauseSubscriptionModal",["PauseSubscription","currentUser",function(){return{restrict:"E",replace:!0,template:'<div class="pause-modal"><div class="modal-box" ng-class="{\'page-one\': vm.currentPage === 1}" ng-click="vm.modalClick()"><pause-page-one ng-if="vm.currentPage === 1"></pause-page-one><pause-page-two ng-if="vm.currentPage === 2"></pause-page-two><pause-page-three ng-if="vm.currentPage === 3"></pause-page-three><pause-page-four ng-if="vm.currentPage === 4"></pause-page-four></div><div class="custom-modal-backdrop" ng-click="vm.cancel()"></div></div>'}}]).factory("ModalService",
["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(a,c,b,d,e,f,g,h,i){var j=c.find("body");return new function(){var c=function(b,d){var c=b.children();return 0<c.length?a.enter(d,b,c[c.length-1]):a.enter(d,b)};this.showModal=function(e){var m=g.defer();if(!e.controller)return m.reject("No controller has been specified."),m.promise;var n=e.template,p=e.templateUrl,q=g.defer();n?q.resolve(n):p?h(p,!0).then(function(a){q.resolve(a)},function(a){q.reject(a)}):
q.reject("No template or templateUrl has been specified.");q.promise.then(function(h){var s=f.$new(),n=g.defer(),p=g.defer(),q={$scope:s,close:function(b,d){if(void 0===d||null===d)d=0;i(function(){n.resolve(b);a.leave(u).then(function(){p.resolve(b);s.$destroy();s=u=q=y=n=m=q.close=null})},d)}};e.inputs&&angular.extend(q,e.inputs);var u=b(h)(s);q.$element=u;h=d(e.controller,q);e.controllerAs&&(s[e.controllerAs]=h);e.appendElement?c(e.appendElement,u):c(j,u);var y={controller:h,scope:s,element:u,
close:n.promise,closed:p.promise};m.resolve(y)}).then(null,function(a){m.reject(a)});return m.promise}}}])})();angular.module("account").controller("subscriptionCancellation",["$scope","modal","$q","api","$location","customers","$window","products","dateTime","currentUser","$rootScope","cancellationFlow","CancellationFrame",function(a,c,b,d,e,f,g,h,i,j,l,k,m){a.cancelSubscription=k.cancelSubscription;a.confirmSubscriptionCancellation=function(b){a.state="checking";return f.removeSubscription("me",b).then(function(){a.sendActivity("cancel")}).then(function(){a.setCurrentFrame("cancelled")})};a.getCurrentFrame=
m.getCurrentFrame;a.setCurrentFrame=m.setCurrentFrame;a.sufficientTimeInClass=m.sufficientTimeInClass;a.getCompletionStats=m.getCompletionStats;a.sendActivity=m.sendCancellationActivity;a.survey={};a.surveyChoices=_.shuffle([{name:"I'm not able to dedicate enough time to this program",code:"notEnoughTime",description:"We know it's tough finding time to learn in your busy schedule. Remember, all you need to make progress is 30 min of learning time."},{name:"I wasn't too happy with the quality of your content",
code:"contentQuality",description:'We\'re sorry to hear that this program wasn\'t a good fit for you.  Have you looked at <a href="/courses/all" target="_blank">our other courses</a>?  We have a variety of instructors and another course might be a better fit for your learning style.'},{name:"I wasn't happy with the level of support I received",code:"notEnoughSupport",description:'Have you tried making a 1:1 appointment with a coach for additional support?  Send us an email at <a href="mailto:coach-support@udacity.com">coach-support@udacity.com</a> and we\'d love to set one up for you.'},
{name:"The content was not rigorous enough for me",code:"notRigorousEnough",description:'We\'d love to help you find another course that can provide the challenge you\'re looking for.  Take a look at our <a href="/courses/all" target="_blank">course catalog</a> and send us an <a href="mailto:support@udacity.com">email</a> if you need some recommendations.'},{name:"I didn't have the required background for the course",code:"lackingBackgroundKnowledge",description:'We offer a lot of beginner level courses. Take a look at our <a href="/courses/all" target="_blank">course catalog</a> to see if there\'s one that\'s better suited to your level.'},
{name:"I don't feel this program was worth the cost",code:"notWorthCost",description:'We really do believe that the education we provide should be affordable.  That\'s why we have programs such as the <a href="/nanodegree/50-back" target="_blank">50% back offer</a> for our Nanodegree students and keep all of <a href="/courses/all" target="_blank">our course content free</a>.'}]).concat([{name:"Other (please explain below)",code:"other",description:"We're always trying to find ways to improve our offerings and better accommodate all our student's needs. We'd appreciate knowing why you were unable to continue your learning with us and what we could do to help."}]);
b=[{image:"//lh3.googleusercontent.com/1aE3w92Dq1KtR90wWW7tTX3NdoOs39FXZ7THfJ_j17JkT2_gvKNc92TdSePdIQSGX_sdN2o7vtFOaUSQKA=s0#w=120&h=120",story:'<strong>Ayesha</strong>, a Front-End Nanodegree graduate, used the projects she built in the Nanodegree to land a job as a front-end developer.<br><a href="http://blog.udacity.com/2015/03/nanodegree-graduate-ayesha-ilyas-landed-development-job.html" target="_blank">  View Ayesha\'s Journey </a>'},{image:"//lh3.googleusercontent.com/T9xjp_sPhVn6uL5xNbutzUY6UT3qFXA5h8WITMrZmIcaZDa07EioFhvNbue13GnkyqFe8fv3vTr-Db0Jm3o=s0#w=120&h=120",
story:'<strong>Kelly</strong> took her interest in programming to the next level with the Full Stack Nanodegree. She  transitioned from being in customer service to a Web Solutions Engineer at Google.<br><a href="http://blog.udacity.com/2015/06/how-udacity-student-kelly-landed-an-engineering-job-at-google.html" target="_blank">  View Kelly\u2019s Journey </a>'},{image:"//lh3.googleusercontent.com/s1zlvoS7c6iVlLbPHwdKbsfkGhJDPtufFE5G2VTvU6HM_iJwr2Ao4Jde7NnTbddhh3QnblhSZU3GAYoi0Zc=s0#w=120&h=120",story:'<strong>Ben</strong>, our first Front-End Nanodegree graduate landed a job as a web dev in the healthcare industry. Learn about his journey from mechanical engineer to web developer. <br><a href="http://blog.udacity.com/2015/04/heres-udacity-grad-ben-halperin-landed-web-dev-job-health-care.html" target="_blank"> View Ben\'s Journey </a>'},
{image:"//lh3.googleusercontent.com/a2NwzSoXvaOiPSv6m1Hdq9M305O7ur2n2x--EvtygezETgVViaa0ls8fL9Kfw0wFf0npJOuCWH1J-0dC6dA=s0#w=120&h=120",story:'<strong>Christian</strong>, a former lawyer, co-founded a startup with the help of skills he learned from the Data Science Nanodegree. <br><a href="http://blog.udacity.com/2015/03/udacity-student-spotlight-christian-a-complete-career-shift.html" target="_blank"> View Christian\'s Journey </a>'}];a.studentStory=b[Math.floor(Math.random()*(b.length-1))];a.closeModal=
function(){c.cancel()};a.keepLearning=function(){a.closeModal();g.location.href="/me"};a.confirmModal=function(){c.confirm()};a.startConversation=function(){m.sendCancellationActivity("startChat",4,a.survey.code,a.survey.comment);return d.post("/email/send_cancellation_reason",{email_problem:a.survey.reason,email_comment:a.survey.comment,node_id:m.getCourseKey()}).then(function(a){return a.data})}}]);angular.module("widgets").directive("tutoringWhiteboard",["$http",function(a){return{restrict:"A",link:function(c,b){c.showWhiteboard=!1;c.showWhiteboardHolder=!1;c.toggleWhiteboard=function(){c.showWhiteboard=!c.showWhiteboard};var d=b.find(".tutoring-whiteboard-frame-holder");window.olark("api.chat.onCommandFromOperator",function(b){"whiteboard"===b.command.name&&(window.olark("api.chat.sendNotificationToOperator",{body:"Creating whiteboard..."}),d.children().length&&d.empty(),a.get("/api/session/whiteboard?title=Whiteboard").then(function(a){c.showWhiteboardHolder=
!0;d.append($("<iframe />",{src:a.data.url,"class":"tutoring-whiteboard-frame"}));c.showWhiteboard=!0;window.olark("api.chat.sendNotificationToOperator",{body:"Opened whiteboard.\nStudent's link (for troubleshooting): "+a.data.url+"\nYour link: "+(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/api/session/whiteboard?unique_id="+a.data.unique_id+"&redirect=true")})}))})}}}]);angular.module("filters").filter("allowUnsafe",["$sce",function(a){return function(c){return a.trustAsHtml(c)}}]);angular.module("filters").filter("dateRelative",["$filter",function(a){return function(c){if(!c||isNaN(c))return"not available";var b=((new Date).getTime()-c)/1E3;return 60>b?"just now":3600>b?""+Math.floor(b/60)+"m ago":86400>b?""+Math.floor(b/3600)+"h ago":691200>b?""+Math.floor(b/86400)+"d ago":28944E3>b?a("date")(c,"MMM d"):a("date")(c,"MMM d, yyyy")}}]).filter("dateRelativeNoYear",["$filter",function(a){return function(c){c=a("dateRelative")(c);return/, \d{4}$/g.test(c)?c.substring(0,c.length-
6):c}}]).filter("stringDate",["$filter",function(){var a=function(a){if(!a)return a;var b=a.lastIndexOf(".");if(-1===b)return a;var d=b+7;if(d>a.length)return a;for(var e=b+1;e<d;++e)if("0">a[e]||"9"<a[e])return a;return a.substring(0,b)+a.substring(d,a.length)};return function(c){return Date.parse(a(c))}}]);angular.module("filters").filter("formatCurrency",[function(){return function(a,c){if("object"==typeof Intl&&Intl&&"function"==typeof Intl.NumberFormat){if("USD"===c)return(a/100).toLocaleString("en-US",{style:"currency",currency:c})+" "+c;if("INR"===c)return(a/100).toLocaleString("en-IN",{style:"currency",currency:c})+" "+c;if("GBP"===c)return(a/100).toLocaleString("en-GB",{style:"currency",currency:c})+" "+c;if("EUR"===c)return(a/100).toLocaleString("at-DE",{style:"currency",currency:c})+" "+c;
if("CHF"===c)return(a/100).toLocaleString("de-CH",{style:"currency",currency:c})+" "+c;if("CNY"===c)return(a/100).toLocaleString("zh-CH",{style:"currency",currency:c})+" "+c;if("BRL"===c)return(a/100).toLocaleString("br-PT",{style:"currency",currency:c})+" "+c}else{var b=0>a?"-":"",a=Math.abs(a);if("USD"===c){var d=a%100;return b+"$"+Math.floor(a/100)+(d?"."+d:"")+" "+c}if("INR"===c)return b+"\u20b9"+Math.floor(a/100)+" "+c;if("GBP"===c){var d=Math.floor(a/100),e=a%100;return b+"\u00a3"+d+(e?"."+
e:"")+" "+c}if("EUR"===c)return d=Math.floor(a/100),e=a%100,b+"\u20ac"+d+(e?","+e:"")+" "+c;if("CHF"===c)return d=Math.floor(a/100),e=a%100,b+"CHF "+d+(e?","+e:"");if("CNY"===c)return d=Math.floor(a/100),e=a%100,b+"\u00a5"+d+(e?"."+e:"")+" "+c;if("BRL"===c)return d=Math.floor(a/100),e=a%100,b+"R$"+d+(e?"."+e:"")+" "+c}return a+c}}]);angular.module("filters").filter("formatCurrency2",[function(){return function(a,c){var b;if("object"==typeof Intl&&Intl&&"function"==typeof Intl.NumberFormat)"USD"===c?b=(a/100).toLocaleString("en-US",{style:"currency",currency:c}):"INR"===c?b=(a/100).toLocaleString("en-IN",{style:"currency",currency:c}):"GBP"===c?b=(a/100).toLocaleString("en-GB",{style:"currency",currency:c}):"EUR"===c?b=(a/100).toLocaleString("at-DE",{style:"currency",currency:c}):"CHF"===c?b=(a/100).toLocaleString("de-CH",{style:"currency",
currency:c}):"CNY"===c?b=(a/100).toLocaleString("zh-CH",{style:"currency",currency:c})+" "+c:"BRL"===c&&(b=(a/100).toLocaleString("br-PT",{style:"currency",currency:c})+" "+c);else{var d=0>a?"-":"",a=Math.abs(a);if("USD"===c)b=a%100,b=d+"$"+Math.floor(a/100)+(b?"."+b:"");else if("INR"===c)b=d+"\u20b9"+Math.floor(a/100);else if("GBP"===c){b=Math.floor(a/100);var e=a%100;b=d+"\u00a3"+b+(e?"."+e:"")+" "+c}else if("EUR"===c)b=Math.floor(a/100),e=a%100,b=d+"\u20ac"+b+(e?"."+e:"")+" "+c;else if("CHF"===
c)b=Math.floor(a/100),e=a%100,b=d+"CHF "+b+(e?"."+e:"");else{if("CNY"===c)return b=Math.floor(a/100),e=a%100,d+"\u00a5"+b+(e?"."+e:"")+" "+c;if("BRL"===c)return b=Math.floor(a/100),e=a%100,d+"R$"+b+(e?"."+e:"")+" "+c}}return b?/\.00$/.test(b)?b.slice(0,-3):b:a+c}}]);angular.module("filters").filter("imageCropSize",[function(){return function(a,c){if(a)return a.match(/\/\/[^.\/]+\.(ggpht|googleusercontent)\.com\//)||a.match(/\/_ah\/img\//)?a=a.replace(/\=s\d+(-c)?/,"=s"+c+"-c"):a.match(/\/\/robohash\.org\//)&&(a=a+"?size="+c+"x"+c),a}}]).filter("imageSize",[function(){return function(a,c,b){if(a){b=0===b?void 0:b;c=0===c?void 0:c;if("number"!==typeof c&&"number"!==typeof b)return a;var d=Math.max(b,c)||b||c;if(a.match(/\/\/[^.\/]+\.(ggpht|googleusercontent)\.com\//)||
a.match(/\/_ah\/img\//)){var e=/#[\w=_\-&]*w=(\d+)&h=(\d+)/.exec(a);e&&(d=1*e[1],e=1*e[2],c=Math.min(b/e,c/d)||b/e||c/d,c=[d*c,e*c],a=a.replace(/\=s\d+(-c)?/,"=s"+Math.round(Math.max(c[0],c[1]))))}else a.match(/\/\/robohash\.org\//)&&d&&(a=a+"?size="+d+"x"+d);return a}}}]);angular.module("filters").filter("slugify",[function(){return function(a){if(_.isUndefined(a)||_.isNull(a))return a;a=a.replace(/^\s+/,"").replace(/\s+$/,"");a=a.replace(/[^\w\s-]/g,"");a=a.toLowerCase();return a=a.replace(/[-_\s]+/g,"-")}}]);angular.module("filters").filter("titleCase",function(){return function(a){return(void 0===a||null===a?"":a).toString().toLowerCase().replace(/\b([a-z])/g,function(a){return a.toUpperCase()})}});angular.module("foundation").service("Amplitude",["$window","currentUser","applicationEnvironment",function(a,c,b){var d,e={setUserId:function(c,e){if(c.key&&a.amplitude){var h={};h.registered=c._registered;(d=_.isUndefined(e)?!b.isInDevelopment():e)?(a.amplitude.setUserProperties(h),a.amplitude.setUserId(c.key)):(console.groupCollapsed("Amplitude.setUserId Test Environment Details"),console.log("amplitude.setUserProperties() would be passed: "),console.log(h),console.log("amplitude.setUserId() would be passed: \n"+
c.key),console.groupEnd())}},logEvent:function(c,e,h){a.amplitude&&((d=_.isUndefined(h)?!b.isInDevelopment():h)?e?a.amplitude.logEvent(c,e):a.amplitude.logEvent(c):(console.groupCollapsed("Amplitude.logEvent Test Environment Details"),console.log("amplitude.logEvent() would be passed: \n"+c),e?console.log(e):"",console.groupEnd()))}};e.setUserId(c.getUser());return e}]).directive("ampLogEvent",["Amplitude",function(a){return function(c,b,d){var e,f,g;d.$observe("ampLogEvent",function(a){e=a});d.$observe("ampEventProperty",
function(a){f=a});d.$observe("ampEventPropertyObject",function(a){g=a});b.bind("click",function(){if(!d.ampLogEventIf||c.$eval(d.ampLogEventIf))d.ampEventProperty?a.logEvent(e,{key:f}):d.ampEventPropertyObject?a.logEvent(e,g):a.logEvent(e)})}}]);angular.module("foundation").service("localStorage",["$window",function(a){return{getItem:function(c){return a.localStorage?a.localStorage.getItem(c):null},setItem:function(c,b){return a.localStorage?a.localStorage.setItem(c,b):null}}}]);angular.module("foundation").factory("myCourses",["$rootScope","$timeout","currentUser","nodes","nodeUtility",function(a,c,b,d,e){var f,g={getNodeMap:function(a){f=!a&&f||d.batchGet(_.pluck(g.getDisplayedEnrollments(),"node_key"),{projection:"navigation"});return f.then(function(a){return a})},getDisplayedEnrollments:function(){return b.getEnrollmentsWithState("enrolled").concat(b.getEnrollmentsWithState("interested"))},getSortedEnrollments:function(a){return g.getNodeMap().then(function(b){var d=
_.filter(g.getDisplayedEnrollments(),function(d){var c=b[d.node_key],f=_.has(b,d.node_key);return a?e.isPreEnrolled(d,c)||e.isCurrentEnrolled(d,c)&&f:e.isFreeEnrolled(d,c)&&f});return _.sortBy(d,function(a){return b[a.node_key].title})},function(){console.warn("Problem getting sorted enrollments.");return[]})}};return g}]);angular.module("foundation").controller("myCoursesDropDown",["$q","$scope","$timeout","currentUser","myCourses","nodeUtility",function(a,c,b,d,e,f){c.loading=!0;c.isPreEnrolled=f.isPreEnrolled;c.isCurrentEnrolled=f.isCurrentEnrolled;c.isFreeEnrolled=f.isFreeEnrolled;c.hasEnrolled=f.hasEnrolled;var g=function(){a.all([e.getNodeMap(),e.getSortedEnrollments(!0),e.getSortedEnrollments(!1)]).then(function(a){c.nodeMap=a[0];c.forPayEnrollments=a[1];c.nonPayEnrollments=a[2];c.loading=!1})};c.$on("modifiedEnrollment",
function(){g()});var h=b(g,1E4);c.manualInitialize=function(){c.loading&&(b.cancel(h),g())}}]);angular.module("foundation").factory("nodeUtility",[function(){var a=function(a,d,c){return a&&d&&d.catalog_entry.paid_class?0<_.intersection(_.pluck(d.catalog_entry.paid_class[c],"key"),_.pluck(a.group_refs,"key")).length:!1},c={isGraduated:function(b,d){return a(b,d,"graduate_group_refs")},isPreEnrolled:function(b,d){return("interested"===b.state||"enrolled"===b.state)&&a(b,d,"future_student_group_refs")},isCurrentEnrolled:function(b,d){return"enrolled"===b.state&&a(b,d,"current_student_group_refs")},
isFreeEnrolled:function(a,d){return!c.isCurrentEnrolled(a,d)&&"enrolled"===a.state},hasEnrolled:function(b,d){return a(b,d,"past_student_group_refs")||c.isGraduated(b,d)},hasPermissionTo:function(a,d){return a&&!!_.find(a.guard.allowed_behaviors,function(a){return a===d})}};return c}]);angular.module("foundation").controller("siteFrame",["$scope","$window","localStorage","Amplitude","currentUser",function(a,c,b){a.responsivenessIsEnabled=!1;a.$on("setResponsiveness",function(b,c){!a.responsivenessIsEnabled&&c&&0===$('meta[name="viewport"]').length?$("head").append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'):$('meta[name="viewport"]').remove();a.responsivenessIsEnabled=c});a.cacheBustingIsEnabled="yes"===b.getItem("bustAllTheCaches")?"yes":"no";a.toggleCacheBusting=
function(){a.cacheBustingIsEnabled="yes"===a.cacheBustingIsEnabled?"no":"yes";b.setItem("bustAllTheCaches",a.cacheBustingIsEnabled);c.location.reload()}}]);angular.module("foundation").directive("tocPageTocGenerator",[function(){return{restrict:"A",link:function(a,c,b){a.tocEntries=[];var d=[],e="";try{e=JSON.parse(b.tocSelector.replace(/\'/g,'"'))}catch(f){e=[b.tocSelector]}if(_.isArray(e)){_.each(e,function(a,b){c.find(a).each(function(a){$(this).attr("id","section-"+b+"-"+a)})});c.find(e.join(", ")).each(function(){d.push({id:$(this).attr("id"),name:$(this).text(),level:parseInt(/section-(\d*)-\d*/.exec($(this).attr("id"))[1],10)})});var g=function(a){for(var b=
[],d=0;d<a.length;d++){a[d].children=[];for(var c=d+1;c<a.length&&!(a[c].level<=a[d].level);c++)a[d].children.push(a[c]);0<a[d].children.length&&(a[d].children=g(a[d].children));b.push(a[d]);d+=a[d].children.length}return b};a.tocEntries=g(d)}else console.error("TOC selector was not string or array. No TOC for you!")}}}]);angular.module("foundation").directive("tocPageTocList",[function(){return{restrict:"A",scope:{structuredList:"="},replace:!0,template:'<ul class="nav nav-pills nav-stacked"><li data-ng-repeat-start="entry in structuredList"><a data-page-scroller="#{{entry.id}}">{{entry.name}}</a></li><li data-ng-if="entry.children.length>0" data-ng-repeat-end ><ul class="nav nav-pills nav-stacked"><li data-ng-repeat-start="secondEntry in entry.children"><a data-page-scroller="#{{secondEntry.id}}">{{secondEntry.name}}</a></li><li data-ng-if="secondEntry.children.length>0" data-ng-repeat-end><ul class="nav nav-pills nav-stacked"><li data-ng-repeat-start="thirdEntry in secondEntry.children"><a data-page-scroller="#{{thirdEntry.id}}">{{thirdEntry.name}}</a></li><li data-ng-if="thirdEntry.children.length>0" data-ng-repeat-end>Second!</li></ul></li></ul></li></ul>'}}]);angular.module("foundation").directive("unregisteredRedirect",["$window","currentUser",function(a,c){return{restrict:"A",link:function(){c.get("_registered")||(a.location.href="/account/auth#!/signin?next="+encodeURIComponent(a.location.href))}}}]);angular.module("gateways").factory("affiliates",["api","$q",function(a,c){var b={get:function(b,c){return a.get("/affiliates/"+b,c).then(function(a){return a.data.affiliate})},batchGet:function(){throw Error("Not Implimented in API!");},put:function(a,c){return b.batchPut([a],c).then(function(b){return a.key?b[a.key]:_.first(_.values(b))})},batchPut:function(b,c){return a.post("/affiliates",_.extend({affiliates:b},c)).then(function(a){return a.data.references.AffiliateProgram})},list:function(b){var e=
[],f=_.omit(b,"offset","limit","cursor_map");f.paging={cursor_map:b&&b.cursor_map||null,offset:b&&b.offset||0,limit:b&&b.limit||10};var g=function(b){f.paging.cursor_map=b;return a.get("/affiliates",f).then(function(a){e=e.concat(a.data.affiliates);f.paging.offset+=a.data.affiliates.length;return a.data.more?g(a.data.cursor_map):c.when(e)})};return g(f.paging.cursor_map)},getImageUploadUrl:function(b){return a.get("/affiliates/"+encodeURIComponent(b)+"/image/upload_url").then(function(a){return a.data.url})},
putProfile:function(b,c,f){b="/affiliates/"+encodeURIComponent(b)+"/profiles/"+encodeURIComponent(c);c={};c.modified_profile=angular.copy(f)||{};c.modified_profile.model="AffiliateContactDetails";return a.post(b,c).then(function(a){return a.data.profile})}};return b}]);angular.module("gateways").provider("api",[function(){var a=function(a){return _.reduce(_.keys(a).sort(),function(b,d){var c=a[d];angular.isArray(c)&&(d+="[]");b[d]=c;return b},{})},c=function(){return Date.now()||+new Date},b={init:function(a,b){a.configuration=b;b.baseUrl=_.isUndefined(b.baseUrl)?"":b.baseUrl;a.setBaseUrl=function(a){b.baseUrl=/\/$/.test(a)?a.substring(0,a.length-1):a;return this}}},d={baseUrl:"/api"},e=null;b.init(this,d);this.$get=["$http","mixin","$window","gitRevision","universalAnalytics",
"localStorage",function(f,g,h,i,j,l){var k=["sessionExpired"];f.defaults.headers.common["X-Udacity-Client"]="udacity.com; version="+i;var m=function(d){var i={get:function(b,e,g){g=g||{};"yes"===l.getItem("bustAllTheCaches")&&(e=e||{},e.cacheBusterValue=Math.random());g.params=a(e);void 0===g.cache&&(g.cache=!0);var h=i.buildGetUrl(b,e),j=c();return 1600<h.length?(g.lengthy||console.warn("Url potentially too large for GET request; switching to POST. Set configuration option lengthy=true to suppress this warning."),
delete g.params,b+=(-1===b.indexOf("?")?"?":"&")+"_method=GET",i.verifySession(i.timeRequest(f.post(d.baseUrl+b,e,g),j))):i.verifySession(i.timeRequest(f.get(d.baseUrl+b,g),j))},post:function(a,b,e){var g=c();return i.verifySession(i.timeRequest(f.post(d.baseUrl+a,b,e),g))},deleteRequest:function(a,b,e){e=e||{data:null};e.params=b;b=c();return i.verifySession(i.timeRequest(f["delete"](d.baseUrl+a,e),b))},timeRequest:function(a,b){return a.success(function(a,d,e){a=e("X-Udacity-Trail");d=c()-b;e=h.location.pathname+
h.location.hash;0<=d&&36E5>d&&j.trackTiming({"var":a||"unknown",category:"request",label:e,value:d})})},getCurrentUserKey:function(){return e=e||f({method:"GET",cache:!0,url:"/api/session"}).then(function(a){return a.data.account.key})},verifySession:function(a){return a.success(function(a,b,d){i.getCurrentUserKey().then(function(a){var b=d("X-Udacity-Account-Id");b&&b!==a&&i.emitEvent("sessionExpired",{accountId:a})})}).error(function(a,b,d){i.getCurrentUserKey().then(function(a){var c=d("X-Udacity-Account-Id");
(401===b||c&&c!==a)&&i.emitEvent("sessionExpired",{accountId:a})})})},buildGetUrl:function(b,d){var c;c="/api"+b;var e=a(d),e=_.reduce(e,function(a,b,d){b&&null!==b&&(angular.isArray(b)||(b=[b]),b=_.map(b,function(a){angular.isObject(a)&&(a=JSON.stringify(a));return i._encodeUriQuery(d)+"="+i._encodeUriQuery(a)}),a=a.concat(b));return a},[]);c=0===e.length?c:c+(-1===c.indexOf("?")?"?":"&")+e.join("&");return c},_encodeUriQuery:function(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,
":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}};b.init(i,d);i=g.eventEmission(i,k);i.withConfig=_.bind(function(a){var c=angular.copy(_.omit(d,"configuration"));b.init(c,c);a(c);return m(c)},i);return i};return m(d)}]}]);angular.module("gateways").factory("cohortsGateway",["api",function(a){return{get:function(c,b){return a.get("/cohorts/"+encodeURIComponent(c),b).then(function(a){return a.data.cohort})},remove:function(c){return a.deleteRequest("/cohorts/"+encodeURIComponent(c)).then(function(a){return a.data})},searchCohorts:function(c){return a.get("/cohorts",c).then(function(a){return a.data.cohorts})},put:function(c){return a.post("/cohorts",{cohorts:c}).then(function(a){return a.data.cohort})}}}]);angular.module("gateways").factory("coupons",["api","$timeout","$q",function(a){return{get:function(c){return a.get("/coupons/"+c).then(function(a){return a.data.coupon})},put:function(c){return a.post("/coupons",c).then(function(a){return a.data.coupon})},list:function(c){var b=_.omit(c,"offset","limit");b.paging={offset:c&&c.offset||0,limit:c&&c.limit||60};return a.get("/coupons",b).then(function(a){return a.data})},computeDiscount:function(c,b){return a.get("/coupons/"+c+"/compute_discount",{product_key:b}).then(function(a){return a.data})}}}]);angular.module("gateways").factory("customers",["api",function(a){return{get:function(c,b){return a.get("/customers/"+encodeURIComponent(c),b).then(function(a){return a.data.customer})},put:function(c,b){return a.post("/customers/"+encodeURIComponent(c),b).then(function(a){return a.data.customer})},removeSubscription:function(c,b){return a.deleteRequest("/customers/"+encodeURIComponent(c)+"/subscriptions/"+encodeURIComponent(b)).then(function(a){return a.data})},removeCreditCard:function(c,b){return a.deleteRequest("/customers/"+
encodeURIComponent(c)+"/cards/"+encodeURIComponent(b)).then(function(a){return a.data})},graduate:function(c,b){return a.post("/customers/"+encodeURIComponent(c)+"/subscriptions/"+encodeURIComponent(b)+"/graduate").then(function(a){return a.data})},isEligibleForCurrencyPriceMatch:function(c){return a.get("/customers/"+encodeURIComponent(c)+"/currencies").then(function(a){return"USD"==a.data.user_currency&&("INR"==a.data.detected_currency||_.contains(a.data.card_countries,"IN"))})}}}]);angular.module("gateways").factory("developmentEnvironments",["api",function(a){return{getDevelopmentEnvironment:function(c,b){return a.get("/development_environment/"+encodeURIComponent(c),b).then(function(a){return a.data.development_environment})},createDevelopmentEnvironment:function(c,b){return a.post("/development_environment/"+encodeURIComponent(c),b).then(function(a){return a.data.development_environment})},deleteDevelopmentEnvironment:function(c,b){return a.deleteRequest("/development_environment/"+
encodeURIComponent(c),b).then(function(a){return a.data})}}}]);angular.module("gateways").factory("discourse",["api",function(a){return{getCategories:function(c){c=angular.copy(c)||{};return a.get("/discourse/categories",c).then(function(a){return a.data.categories||[]})}}}]);angular.module("gateways").factory("employers",["api",function(a){var c={get:function(b,d){return a.get("/employers/"+b,d).then(function(a){return a.data.employers})},put:function(a,d){return c.batchPut([a],d).then(function(d){return a.key?d[a.key]:_.first(_.values(d))})},batchPut:function(b,d){return a.post("/employers",_.extend({employers:b},d)).then(function(a){return a})},list:function(b){var d=_.omit(b,"offset","limit","cursor_map");d.paging={cursor_map:b&&b.cursor_map||null,offset:b&&b.offset||
0,limit:b&&b.limit||10};return a.get("/employers",d).then(function(a){return a.data.employers})}};return c}]);angular.module("gateways").factory("entityStore",["entityStoreHelper","$q",function(a,c){var b=function(a){return!_.isNull(a)&&!_.isUndefined(a)},d={setProjections:function(b,d){a.setProjections(b,d)},get:function(d,f,g,h,i){return h&&void 0!==h.depth?g(d,h).then(function(c){b(c)&&a.stash(d,f,i,c);return c}):c.when(a.getFilledEntity(d,f,i)).then(function(c){return c?c:g(d,h).then(function(c){b(c)&&a.stash(d,f,i,c);return c})})},batchGet:function(d,f,g,h,i){if(h&&void 0!==h.depth)return g(d,h).then(function(d){return d?
(_.each(_.filter(_.values(d),b),function(b){a.stash(b.key,f,i,b)}),d):{}});var j={},l=[];_.each(d,function(b){var d=a.getFilledEntity(b,f,i);d?j[b]=d:l.push(b)});return c.when(j).then(function(b){return 0<l.length?g(l,h).then(function(d){d&&_.each(_.filter(_.values(d),function(a){return a}),function(d){a.stash(d.key,f,i,d);b[d.key]=d});return b}):b})},standardMixin:function(a,b){var c=_.omit(b,"get","batchGet");c.__gateway=b;c.get=function(c,g){return g&&g.__skipCache?b.get(c,g):d.get(c,a,b.get,g,
g&&g.projection)};c.batchGet=function(c,g){return g&&g.__skipCache?b.batchGet(c,g):d.batchGet(c,a,b.batchGet,g,g&&g.projection)};return c}};return d}]).factory("entityStoreHelper",["$cacheFactory",function(a){var c={caches:{},projections:{},stash:function(a,d,e,f){a=c.getRecord(a,d,e);angular.copy(f,a.entity);a.filled=!0},getRecord:function(a,d,e){var f=c.getCache(d,e).get(a);f||(f={entity:{key:a,model:d},storeTime:"now",filled:!1},c.getCache(d,e).put(a,f));return f},getEntity:function(a,d,e){return c.getRecord(a,
d,e).entity},getFilledEntity:function(a,d,e){var f=c.getRecord(a,d,e);e&&!f.filled&&c.projections[d]&&!0===c.projections[d][e].base&&(f=c.getRecord(a,d,void 0));return f.filled?f.entity:void 0},getCache:function(b,d){var c=b+":"+(d||"");return a.get(c)||a(c)},setProjections:function(a,d){c.projections[a]=d}};return c}]);angular.module("gateways").factory("exams",["$q","api",function(a,c){return{get:function(a){return c.get("/exams",{exam_variant_id:a}).then(function(a){return a.data})},startExamTimer:function(a){return c.post("/exams/me/session",{exam_variant_id:a}).then(function(a){return a.data})},terminateExam:function(a,d,e){var f={};a&&(f.exam_lesson_key=a);d&&(f.exam_variant_id=d);return c.deleteRequest("/exams/"+encodeURIComponent(e||"me")+"/session",f).then(function(a){return a.data})},getTimeRemaining:function(a,
d,e){var f={};a&&(f.exam_lesson_key=a);d&&(f.exam_variant_id=d);return c.get("/exams/"+encodeURIComponent(e||"me")+"/session",f).then(function(a){return a.data})},deleteToken:function(a,d,e){var f={};a&&(f.exam_lesson_key=a);d&&(f.exam_variant_id=d);return c.deleteRequest("/exams/"+encodeURIComponent(e||"me")+"/admin",f).then(function(a){return a.data})},getWithStudentPermissions:function(a,d){var e={exam_variant_id:d};return c.get("/exams/"+encodeURIComponent(a)+"/admin",e).then(function(a){return a.data})}}}]);angular.module("gateways").factory("features",["api",function(a){return{get:function(c){return a.get("/features/"+encodeURIComponent(c)).then(function(a){return a.data.feature})},put:function(c,b){var d="True"===b;return a.post("/features/"+encodeURIComponent(c),{feature:{enabled:d}}).then(function(a){return a.data.feature})},list:function(){return a.get("/features").then(function(a){return a.data.features})}}}]);angular.module("gateways").factory("groups",["api",function(a){return{get:function(c,b){return a.get("/groups/"+encodeURIComponent(c),b).then(function(a){return a.data.group})},put:function(c){return a.post("/groups",{groups:[c]}).then(function(a){return _.values(a.data.references.Group)[0]})},batchPut:function(c){return a.post("/groups",{groups:c}).then(function(a){return a.data.references.Group})},find:function(c){return a.get("/groups",c).then(function(a){return a.data.groups})},getKeysByAffiliate:function(c,
b){return a.get("/groups/affiliate/"+encodeURIComponent(c),b).then(function(a){return a.data.groups})},getMembers:function(c,b){return a.get("/groups/"+encodeURIComponent(c)+"/members",b).then(function(a){return a.data.accounts})},addMember:function(c,b){_.isArray(c)||(c=["Group."+c]);var d={group_keys_to_join:c};return a.post("/users/"+encodeURIComponent(b)+"/memberships",d).then(function(a){return a.data.group_refs_joined})},removeMember:function(c,b){_.isArray(c)||(c=["Group."+c]);var d={group_keys_to_leave:c};
return a.post("/users/"+encodeURIComponent(b)+"/memberships",d).then(function(a){return a.data.group_refs_left})}}}]);angular.module("gateways").factory("nodeStates",["api",function(a){var c={get:function(a,d,e){return c.batchGet(a,[d],e).then(function(a){return a[d]})},batchGet:function(b,d,c){c=angular.copy(c)||{};c.node_keys=d;c.user_key=b;return a.get("/nodes/state",c).then(function(a){var b={};_.each(a.data.nodestates,function(a){b[a.node_ref.key]=a});return b})}};return c}]);angular.module("gateways").factory("nodeTests",["$q","api",function(a,c){return{batchGet:function(a){return c.get("/node_tests",{node_key:a}).then(function(a){return a.data.node_tests})},put:function(a){return c.post("/node_tests",{node_tests:[a]}).then(function(a){var a=a.data.references.NodeFunctionalTest,b=_.keys(a)[0];return a[b]})},deleteTest:function(a){return c.deleteRequest("/node_tests/"+encodeURIComponent(a)).then(function(a){return a.data})}}}]);angular.module("gateways").factory("nodes",["$log","api","entityStore","$q",function(a,c,b){var d={get:function(a,b){return d.batchGet([a],b).then(function(b){return b[a]})},decorateCourseWithFns:function(a){a.getCourseType=function(){return"ca"===a.key.slice(0,2)?"Career":a._semantic_type};a.isNanodegree=function(){return"Degree"===this.getCourseType()};a.isCareer=function(){return"Career"===this.getCourseType()}},batchGet:function(a,b){b=angular.copy(b)||{};b.keys=a;return c.get("/nodes",b).then(function(a){return a.data.references&&
a.data.references.Node?($.each(a.data.references.Node,function(a,b){d.decorateCourseWithFns(b)}),a.data.references.Node):{}})},put:function(a,b){return d.batchPut([a],b).then(function(b){return a.key?b[a.key]:b[_.first(_.keys(b))]})},batchPut:function(a,b){b=angular.copy(b)||{};b.nodes=a;return c.post("/nodes",b).then(function(a){return a.data.references.Node})},list:function(){throw Error("Not supported by the API");},state:function(a,b,c){return d.batchState([a],b,c).then(function(a){return _.first(a)})},
batchState:function(a,b,d){d=angular.copy(d)||{};d.node_keys=a;d.user_key=b;return c.get("/nodes/state",d).then(function(a){return a.data.nodestates})},getRevision:function(a,b){return c.get("/nodes/"+encodeURIComponent(a)+"/revisions"+encodeURIComponent(b)).then(function(a){return a.data.node})},listRevisions:function(a,b){var d=_.omit(b,"offset","limit","cursor_map");d.paging={cursor_map:b&&b.cursor_map||null,offset:b&&b.offset||0,limit:b&&b.limit||10};return c.get("/nodes/"+encodeURIComponent(a)+
"/revisions",d).then(function(a){return a.data.revisions})},examify:function(a){return c.post("/nodes/"+encodeURIComponent(a)+"/exam").then(function(a){return a.data})},deExamify:function(a){return c.deleteRequest("/nodes/"+encodeURIComponent(a)+"/exam").then(function(a){return a.data})},getPotentialTutorKeys:function(a,b){return c.get("/nodes/"+encodeURIComponent(a)+"/tutors",b).then(function(a){return a.data})},addPotentialTutor:function(a,b){return c.post("/nodes/"+encodeURIComponent(a)+"/tutors",
{tutor_key:b})},removePotentialTutor:function(a,b){return c.deleteRequest("/nodes/"+encodeURIComponent(a)+"/tutors",{tutor_key:b})},getForumPosts:function(b,d,g){return c.get("/nodes/"+encodeURIComponent(b)+"/forum_posts").then(function(b){try{var c=JSON.parse(b.data.posts);return _.first(_.map(c,function(a){return{title:a.title,href:a.href+"#"+d.key,date:a.date,score:a.score,answer_count:a.answer_count,views:a.views,important:a.important}}),g)}catch(e){return a.error(e),[]}})}};b.setProjections("Node",
{navigation:{supers:[],base:!0},synopsis:{supers:[],base:!0},classroom:{supers:[],base:!0},catalog:{supers:[],base:!0}});return b.standardMixin("Node",d)}]);angular.module("gateways").factory("products",["api",function(a){var c={get:function(b,d){return a.get("/products/"+b,d).then(function(a){return a.data.product})},batchGet:function(){throw Error("Not Implimented in API!");},put:function(a,d){return c.batchPut([a],d).then(function(d){return a.key?d[a.key]:_.first(_.values(d))})},batchPut:function(b,d){return a.post("/products",_.extend({products:b},d)).then(function(a){return a.data.references.Product})},list:function(b){var d=_.omit(b,"offset","limit",
"cursor_map");d.paging={cursor_map:b&&b.cursor_map||null,offset:b&&b.offset||0,limit:b&&b.limit||10};return a.get("/products",d).then(function(a){return a.products})},getLocalProductFromNode:function(b){return a.get("/products/fromNode/"+b+"/localized").then(function(a){return a.data.product})}};return c}]);angular.module("gateways").factory("projects",["api",function(a){var c={putSubmission:function(b){return a.post("/projects/submissions",{submissions:[b]}).then(function(a){a=_.map(a.data.references.ProjectSubmission,function(a){return a});return _.first(a)})},createSubmission:function(a,d,e){return c.putSubmission({model:"ProjectSubmission",node_ref:{ref:"Node",key:a},submission_link:d,submission_text:e})},batchPutSubmission:function(b){return a.post("/projects/submissions",{submissions:b}).then(function(a){return a.data.references})},
getSubmissionsBySearch:function(b){return a.get("/projects/submissions",b).then(function(a){return a.data})},getSubmission:function(b,d){return a.get("/projects/submissions/"+encodeURIComponent(b),d).then(function(a){return a.data.submission})},getSubmissionUploadUrl:function(b){return a.get("/projects/submissions/"+encodeURIComponent(b)+"/submission_file/upload_url").then(function(a){return a.data.url})},getReportUploadUrl:function(b){return a.get("/projects/submissions/"+encodeURIComponent(b)+"/project_report.uploaded_report/upload_url").then(function(a){return a.data.url})}};
return c}]);angular.module("gateways").factory("publicCatalog",["api",function(a){var c=a.withConfig(function(a){a.setBaseUrl("/public-api/v0")}),b=null,d={get:function(){throw Error("Not Implemented in API!");},batchGet:function(){throw Error("Not Implemented in API!");},put:function(){throw Error("Not Implemented in API!");},batchPut:function(){throw Error("Not Implemented in API!");},list:function(a,b){return c.get("/courses?projection=internal",a,b).then(function(a){return a.data})},fetchDegrees:function(a,
b){return d.list(a,b).then(function(a){return _.chain(a.degrees).filter(function(a){return 0!==a.key.indexOf("ca")}).map(function(a){if(a.title){var b=a.title.split("Nanodegree")[0];return _.extend(a,{name:b})}return a}).value()})},fetchCatalogAsMapOfNodeKeysToNode:function(a,c){return b=b||d.list(a,c).then(function(a){var b=_.indexBy(a.courses,"key");return b=_.extend(b,_.indexBy(a.degrees,"key"))})}};return d}]);angular.module("gateways").factory("registrar",["api",function(a){var c={_get:function(b,d,c){var d=d||{},f=_.defaults(c||{},{limit:100,offset:0});d.paging=f;return a.get(b,d).then(function(a){var b=null,a=a.data;a.more&&(b={cursor_map:a.cursor_map,offset:f.limit+f.offset,limit:f.limit},delete a.cursor_map,delete a.more,a.nextPage=b);return a})},getSummaries:function(a,d){return c._get("/registrar/"+a+"/summaries",{},d)},queueSummary:function(b,d,c,f,g,h){return a.post("/registrar/"+b+"/summaries?_processing=background",
{lesson_key:c,group_key:d,file_format:f,description:g,perform_regrade:!!h})},getUdacityUserKeys:function(b,d,c){return a.get("/registrar/"+encodeURIComponent(b)+"/search/"+encodeURIComponent(d)+"/"+encodeURIComponent(c)).then(function(a){return a.data})},getAffiliateProfile:function(b,d){return a.get("/registrar/"+encodeURIComponent(b)+"/profiles/"+encodeURIComponent(d)).then(function(a){return a.data.profile})},deleteAffiliateProfile:function(b,d){return a.deleteRequest("/registrar/"+encodeURIComponent(b)+
"/profiles/"+encodeURIComponent(d)+"?remove_experience_key=True").then(function(a){return a.data})}};return c}]);angular.module("gateways").factory("requisitions",["$http",function(a){return{list:function(){return a.get("/proxy/requisitions").then(function(a){return a.data})}}}]);angular.module("gateways").factory("session",["api",function(a){var c={get:function(b){return a.get("/session",b)},batchGet:function(){throw Error("Not Implimented in API!");},put:function(b){return a.post("/session",b)},batchPut:function(){throw Error("Not Implimented in API!");},list:function(){throw Error("Not Implimented in API!");},connect:function(a,d){var e=angular.copy(d)||{};e.udacity=a;e.connect=!0;return c.put(e)},terminate:function(b){return a.deleteRequest("/session",b)},impersonate:function(b,
d,c){c=angular.copy(c)||{};c=_.extend(c,{username:b,allow_writes:d});return a.post("/session/impersonate",c)},log:function(b,c){var e=angular.copy(c)||{};angular.isArray(b)||(b=[b]);e=_.extend(e,{entries:b});return a.post("/session/logs",e)},whiteboard:function(b,c,e,f){f=angular.copy(f)||{};f=_.extend(f,{title:b,unique_id:c,redirect:e});return a.get("/session/whiteboard",f)}};return c}]);angular.module("gateways").factory("users",["$q","api",function(a,c){return{get:function(a,d){return c.get("/users/"+encodeURIComponent(a),d).then(function(a){return a.data.user})},batchGet:function(){throw Error("Not Implemented in API!");},put:function(b,d){var e=angular.copy(d)||{};e.user=_.omit(b,"key");return c.post("/users/"+encodeURIComponent(b.key),e).then(function(a){return a.data.user},function(b){return a.reject(b.data)})},batchPut:function(){throw Error("Not Implemented in API!");},list:function(){throw Error("Not Implemented in API!");
},registerUser:function(a){return c.post("/users",a).then(function(a){return a.data.user})},requestPasswordReset:function(a){return c.post("/users/send_password_reset_email",{email_address:a})},requestUnsubscribe:function(a){return c.post("/users/unsubscribe",{email_address:a})},resetPassword:function(a,d,e){a={password:a,code:e};return c.post("/users/"+encodeURIComponent(d)+"/reset_password",a)},setEnrollments:function(b,d,e,f){f=angular.copy(f)||{};f.node_keys=d;f.state=e;return c.post("/users/"+
encodeURIComponent(b)+"/enrollments",f).then(function(a){return a.data.modified_enrollments},function(){return a.reject("Failed to change enrollments")})},sendFinalStepsEmail:function(a,d,e){return c.post("/users/"+a+"/enrollments/"+d+"/send_final_steps_email",{is_bd:e})},changeEnrollmentSettings:function(a,d,e){return c.post("/users/"+encodeURIComponent(d)+"/enrollments/"+encodeURIComponent(a)+"/settings",e)},getCertificates:function(a,d){return c.get("/users/"+encodeURIComponent(a)+"/certificates",
d).then(function(a){return a.data.certificates})},setFinalStepsEmailSent:function(a,d){return c.post("/users/"+a+"/tags",{tags_to_add:[{model:"Tag",namespace:"final_steps_email_sent",tag:d}]})},checkNewHomeBanner:function(a){return c.get("/users/"+a+"/tags",{namespace:"showNotificationBanner",tag:"hidden"})},setNewHomeBanner:function(a){return c.post("/users/"+a+"/tags",{tags_to_add:[{model:"Tag",namespace:"showNotificationBanner",tag:"hidden"}]})},setFiftyBackBannerFlag:function(a,d){return c.post("/users/"+
a+"/tags",{tags_to_add:[{model:"Tag",namespace:"showfiftybackbanner",tag:d}]})},setHideAug15TOS:function(a){return c.post("/users/"+a+"/tags",{tags_to_add:[{model:"Tag",namespace:"tos",tag:"hideAug15TOS"}]})},setOnboardingFlag:function(a,d){return c.post("/users/"+a+"/tags",{tags_to_add:[{model:"Tag",namespace:"ndonboarding",tag:d}]})},getTags:function(){return c.get("/users/me/tags")},fetchActiveExperiments:function(a,d){var e="/experiments?user="+encodeURIComponent(a)+"&nanodegree="+encodeURIComponent(d);
return c.get(e).then(function(a){return a.data.experiments})},fetchJWTForLayer:function(a){return c.post("/session/chat/jwt",{nonce:a}).then(function(a){return a.data.identity_token})},addToEmailList:function(a,d,e,f){a={email_address:d,user_name:a,list_name:e};f&&(a.data=f);return c.post("/users/join_email_list",a)},requestFiftyBack:function(a,d){return c.post("/users/"+encodeURIComponent(a)+"/request_fifty_back",{course_id:d})},getSignatureUploadUrl:function(a){return c.get("/users/"+encodeURIComponent(a)+
"/signature/upload_url").then(function(a){return a.data.url})},getImageUploadUrl:function(a){return c.get("/users/"+encodeURIComponent(a)+"/image/upload_url").then(function(a){return a.data.url})},getTutors:function(a,d){return c.get("/users/"+encodeURIComponent(a)+"/tutors",d).then(function(a){return a.data})},getTutees:function(a,d){return c.get("/users/"+encodeURIComponent(a)+"/tutees",d).then(function(a){return a.data})},setTutor:function(a,d,e){return c.post("/users/"+encodeURIComponent(a)+"/enrollments/"+
encodeURIComponent(d)+"/tutor",{tutor_account_key:e}).then(function(a){return a.data})},removeTutor:function(a,d,e){return c.deleteRequest("/users/"+encodeURIComponent(a)+"/enrollments/"+encodeURIComponent(d)+"/tutor",{tutor_account_key:e}).then(function(a){return a.data})},updateCountry:function(a,d){return c.post("/users/"+encodeURIComponent(a)+"/currency",{country:d})},copyProgressToUdacityTwoDotO:function(a){return c.post("/users/"+encodeURIComponent(a)+"/copy_progress_to_udacity_2")},fetchIsUserReviewer:function(a){return c.get("/users/"+
a+"/is_reviewer").then(function(a){return a.data.is_reviewer})}}}]);angular.module("embedded").constant("tags",{collection:"k-",course:"c-",lesson:"l-",exercise:"e-",morsel:"m-",tidbit:"t-"}).constant("typeForTag",{"k-":"collection","c-":"course","l-":"lesson","e-":"exercise","m-":"morsel","t-":"tidbit"});angular.module("utility").directive("qualarooSurveyInfoHack",["qualarooSurveyor","dateTime","currentUser","cookieJar","qualaroo",function(a,c,b,d,e){return{link:function(){if(b.userIsLoggedIn()){var d=c.getCurrent(),g=new Date(d.setDate(d.getDate()-21));a.fetchEarliestPaidEnrollmentDate(b.getUser()).then(function(c){e.set({paid:c?"yes":"no"});e.set({subscribed_over_three_weeks:c&&c<g?"yes":"no"});e.set({gt:a.everEnrolledInGtCourses(b.getUser())?"yes":"no"})})}}}}]);angular.module("utility").factory("qualarooSurveyor",["dateTime","$q","nodeUtility","nodes",function(a,c,b,d){var e={fetchEarliestPaidEnrollmentDate:function(a){var g=_.without(_.filter(a._enrollments,function(a){return a.first_paid_enrollment_time},null,void 0));return g.length?d.batchGet(_.pluck(g,"node_key")).then(function(a){var c=_.filter(g,function(c){return _.any(a,function(a){return b.isCurrentEnrolled(c,a)})}),c=_.map(c,function(a){return e._convertIsoDateToYearMonthDayDate(a.first_paid_enrollment_time)});
return c.length?_.min(c):null}):c.when(!1)},_convertIsoDateToYearMonthDayDate:function(a){if(a)return a=a.substring(0,10).split("-"),a=_.map(a,function(a){return parseInt(a,10)}),new Date(a[0],a[1]-1,a[2])},everEnrolledInGtCourses:function(a){return _.any(a._enrollments,function(a){return _.any(a.group_refs,function(a){return a.key&&0===a.key.toLowerCase().indexOf("gt")})})}};return e}]);angular.module("overview").directive("careerEnrollmentActions",["cacheVersion","currentUser","groups","$location","dateTime","$window","cookieJar","googleTagManager","universalAnalytics",function(a,c,b,d,e,f,g,h,i){return{restrict:"A",scope:{enrollmentActions:"="},templateUrl:"/templates/overview/career_enrollment_actions.html?"+a,controller:"enrollmentActionsHelper",link:function(a){var b=function(){h.pushTrackingEvent("careerAccess");f.location.href="/me"};a.getCareerButtonInfo=function(){return a.isAccessible&&
(a.isPaidEnrolled||a.isPaidGraduated)?{variant:"program is live, student is enrolled or graduated",text:"Continue program",action:b,shouldTrackViewedProduct:!1}:a.isPaidEnrollable?a.isClassFull?a.isPaidWaitlisted?(g.exists("udacity_notify_me_clicked_recently")&&(h.pushTrackingEvent("notificationListJoin"),i.trackEvent({category:"Waitlist",action:"SignUp",label:a.courseKey}),g.remove("udacity_notify_me_clicked_recently")),{variant:"program is full, student is waitlisted",statusSuccess:!0,shouldTrackViewedProduct:!1}):
{variant:"program is full, student not waitlisted, not enrolled",text:"Notify me",sidenote:"when program re-opens",shouldTrackViewedProduct:!1,action:function(){g.set("udacity_notify_me_clicked_recently","yes",{expires:new Date((new Date).getTime()+6E5)});a._joinGroup(a.waitlistGroupKey)}}:{variant:"program live, student not enrolled",text:"Enroll in Program",sidenote:"After 1 week free trial",shouldTrackViewedProduct:!0,action:function(){h.pushTrackingEvent("careerEnrollment");a._purchaseCourse()}}:
{variant:"program not open for paid enrollment",sidenote:"This program is not yet available for enrollment",shouldTrackViewedProduct:!1}};a=_.extend(a,a.enrollmentActions);a.productLaunchDate=new Date(a.productLaunchDateString);a.hasProductLaunched=a.enrollmentActions.isLaunched;a.isVIP=a.isAccessible&&(!a.isAvailable&&!a.isLaunched||a.canEditContent)&&a.getCareerButtonInfo().action!==b;a.isFull=a.isClassFull&&!(a.isPaidInterested||a.isPaidEnrolled||a.isPaidGraduated);a.getCareerButtonInfo().shouldTrackViewedProduct&&
a.trackViewedProduct(a.enrollmentActions)}}}]);angular.module("courseCatalog").config(["$locationProvider",function(a){a.html5Mode(!0).hashPrefix("!")}]).constant("SEARCH_DEBOUNCE_MILLIS",5E3).controller("courseCatalog",["$scope","$location","$timeout","$filter","$q","affiliates","courseCatalogHelper","publicCatalog","SEARCH_DEBOUNCE_MILLIS","universalAnalytics",function(a,c,b,d,e,f,g,h,i,j){var l=_.debounce(function(a,b,c){j.trackEvent({category:a,action:b,label:c})},i);a.fullTextSearch={query:""};a.filterCourses=function(b){var e=_.object(_.map(a.filters,
function(a,b){return[b,_.reduce(a.options,function(a,b){return b.selected?a.concat(b):a},[])]})),f=_.filter(b,function(b){return a.activeCategory&&_.any(a.activeCategory.all_children,function(a){return a&&a===b.key})&&_.every(a.filters,function(a,c){return!e[c].length||a.match(b,e[c])})});if(a.fullTextSearch.query){var g=$.trim(a.fullTextSearch.query).toLowerCase();l("Catalog","Search",g);f=d("filter")(f,a.fullTextSearch.query)}!f.length&&a.activeCategory?(f=_.filter(b,function(b){return _.any(a.activeCategory.courses,
function(a){return a&&a===b.key})}),a.fallback=!0):a.fallback=!1;b=_.sortBy(_.filter(a.filters,function(a){return a.exposeInAddressAs}),"id");_.each(b,function(a){var b=_.sortBy(_.pluck(_.where(a.options,{selected:!0}),"name"),_.identity);c.search(a.exposeInAddressAs,b)});return f};var k=null;a.getSelectedTechnologyNames=function(){k||(k=_.findWhere(a.filters,{id:"technologyKeywords"}));return _.map(_.pluck(_.where(k&&k.options,{selected:!0}),"name"),d("titleCase"))};a.getPageDescription=function(){var b=
a.getSelectedTechnologyNames(),c="",d=a.activeCategory&&a.activeCategory.name;1===b.length?c=_.first(b)+" ":1<b.length&&(c=_.initial(b).join(", ")+", and "+_.last(b)+" ");return"Browse "+d+" Course and Nanodegree Programs to help advance your career. You'll learn "+c+"from industry experts from Google, Facebook, Twitter and Cloudera."};h.list().then(function(b){var c=function(a){return!1!==a.public_listing};b.degrees=_.filter(b.degrees,c);b.courses=_.filter(b.courses,c);a.courses=_.map(_.union(b.degrees,
b.courses),function(a){a.affiliates.length&&(a.affiliate_program_refs=_.map(a.affiliates,function(a){return{key:a.key}}));return a});a.affiliateMap=_.reduce(a.courses,function(a,b){b.affiliates.length&&_.each(b.affiliates,function(b){a[b.key]=b});return a},{});a.tracks=b.tracks;return{courses:a.courses,affiliates:a.affiliateMap,tracks:a.tracks}}).then(function(b){a.filters=g.initializeFilters(b.courses,b.affiliates,c.search());c.search("");var e=function(){var e=_.find(b.tracks,function(a){return d("slugify")(a.name)===
c.path().substr(1)});e?a.activeCategory=e:c.path("all")};a.$on("$locationChangeSuccess",e);e();a.loadingComplete=!0})}]);angular.module("courseCatalog").constant("AFFILIATE_PRIORITIES",{facebook:1E3,google:1E3,Salesforce:1E3,gt:8E3,sjsu:8E3,twentythree:9E3}).factory("courseCatalogHelper",["AFFILIATE_PRIORITIES",function(a){var c="ma004 ma006 ma008 bio110 ph100 ps001".split(" "),b=[{id:"skills",name:"Skill Level",makeTitleCase:!0,generateOptions:function(a,b,c){return _.map(_.sortBy(_.unique(_.map(a,function(a){return a.level})).concat("new to tech"),function(a){return{beginner:1,intermediate:2,advanced:3}[a]||0}),function(a){return{name:a,
selected:c.level===a}})},match:function(a,b){return _.any(b,function(b){return b.name===a.level||"new to tech"===b.name&&a.starter})}},{id:"partners",name:"Built by",generateOptions:function(b,c,f){return _.sortBy(_.map(c,function(a){return{name:a.name,key:a.key,selected:f.partner===a.key}}),function(c){return a[c.key]?a[c.key]+c.name.toLowerCase():_.any(b,function(a){return _.any(a.affiliate_program_refs,function(b){return c.key===b.key&&a.available&&a.open_for_enrollment})})?3E3+c.name.toLowerCase():
5E3+c.name.toLowerCase()})},match:function(a,b){return _.any(a.affiliate_program_refs,function(a){return _.any(b,function(b){return b.key===a.key})})}},{id:"technologyKeywords",name:"Technology",makeTitleCase:!0,exposeInAddressAs:"technology",generateOptions:function(a,b,c){a=_.unique(_.flatten(_.map(a,function(a){return _.pluck(_.where(a.tags,{namespace:"technology-keyword"}),"tag")})));return _.map(a,function(a){return{name:a,selected:c.technology===a||_.contains(c.technology,a)}})},match:function(a,
b){var c=_.pluck(b,"name");return _.any(a.tags,function(a){return"technology-keyword"===a.namespace&&_.contains(c,a.tag)})}},{id:"paid",name:"Free Trial Available",hideTitle:!0,generateOptions:function(a,b,c){return[{name:"Free Trial Available",selected:"true"===c.full}]},match:function(a){return a.open_for_enrollment}},{id:"legacy",name:"Hide Legacy Courses",hideTitle:!0,generateOptions:function(a,b,c){return[{name:"Hide Legacy Courses",selected:"true"!==c.legacy}]},match:function(a,b){return b.length&&
!_.contains(c,a.key)}}];return{initializeFilters:function(a,c,f){_.each(b,function(b){b.options=b.generateOptions(a,c,f)});return b},_filters:b}}]);angular.module("courseCatalog").directive("courseSummary",["$location","cacheVersion",function(a,c){var b={beginner:1,intermediate:2,advanced:3};return{scope:{course:"=",affiliateMap:"="},templateUrl:"/templates/angular/course_catalog/course_summary.html?"+c,link:function(a){a.levelClass=function(){return"icon-level-"+b[a.course.level]}}}}]);angular.module("dashboard").controller("dashboardPage",["$scope","$routeParams","$window","$q","currentUser","nodes","nodeStates","nodeUtility","users","siteExperience",function(a,c,b,d,e,f,g,h,i,j){a.courseKey=c.courseKey;var l=null,k={};a.completedLessonKeys=[];a.nodeMap={};a.courseState={};a.loading=!0;a.$on("$routeChangeSuccess",function(){a.courseKey=c.courseKey;a.enrollment=_.find(e.get("_enrollments"),function(b){return b.node_key===a.courseKey});d.all([f.batchGet([a.courseKey],{depth:1,projection:"dashboard",
required_behavior:"view"}).then(function(b){b[a.courseKey].steps_refs=_.filter(b[a.courseKey].steps_refs,function(a){return b[a.key]});a.nodeMap=b;a.course=b[a.courseKey]}),g.get("me",a.courseKey).then(function(b){_.extend(a.courseState,b)}),g.get("me",a.courseKey,{projection:"progress"}).then(function(b){_.extend(a.courseState,b);if(b){var b=_.filter(_.pairs(b.progress),function(a){return a[1].last_interaction_time}),c=null;0<b.length&&(c=_.sortBy(_.reject(b,function(b){return b[0]===a.courseKey}),
function(a){return a[1].last_interaction_time}).reverse()[0][0]);b=c}else b=null;a.lastInteractedLessonKey=b}),i.getCertificates("me").then(function(a){l=a;_.each(l,function(a){var b=a.node_ref.key;_.has(k,b)?k[b].last_modification_time<a.last_modification_time&&(k[b]=a):k[b]=a})})]).then(function(){a.loading=!1;a.premiumAccess=h.hasPermissionTo(a.course,"view-paid-supplemental-media")||h.isCurrentEnrolled(a.enrollment,a.course)||h.isGraduated(a.enrollment,a.course)})});a.getCompletedLessonKeys=function(a){return a?
_.unique(_.pluck(a.completed_descendant_node_refs,"key")):[]};a.isComplete=function(b,c){return _.contains(a.getCompletedLessonKeys(c),b)};a.isPartiallyComplete=function(a,b){return b&&b.progress&&b.progress[a]?0<b.progress[a].completed_morsel_count:!1};a.getCertificate=function(a){return k[a]};a.isCurrentEnrolled=h.isCurrentEnrolled;a.isGraduated=h.isGraduated;a.managedAccount=j.managedAccount;a.getCourseType=function(){var b=a.courseKey.slice(0,2);return"ca"===b?"Career":"nd"===b?"Degree":"Course"};
a.getCourseDescString=function(){switch(a.getCourseType()){case "Degree":return"Nanodegree";case "Career":return"Program";case "Course":return"Course"}}}]);angular.module("page.dashboard",["ngRoute","core","dashboard"]);angular.module("page.dashboard").config(["$locationProvider","$routeProvider","tags","cacheVersion",function(a,c,b,d){c.when("/"+b.course+":courseKey",{templateUrl:"/templates/angular/dashboard.html?"+d})}]);angular.module("account").controller("membershipPage").controller("membershipPage",["$scope","api","groups","currentUser",function(a,c,b,d){a.memberships=[];a.ready=!1;a.leaveGroup=function(b){a.error=null;c.post("/users/me/memberships",{group_keys_to_leave:["Group."+b]}).then(function(b){var c=$.map(b.data.group_refs_left,function(a){return a.key});a.memberships=_.reject(a.memberships,function(a){return _.contains(c,a.groupId)})},function(b){a.error="Failed to leave group ("+b.status+")"})};a.joinGroup=
function(b){a.error=null;c.post("/users/me/memberships",{group_keys_to_join:["Group."+b]}).then(function(a){_.each(a.data.group_refs_joined,function(a){e(a.key)})},function(b){a.error="Failed to join group ("+b.status+")"})};var e=function(c){var d={groupId:c};a.memberships.push(d);b.get(c).then(function(a){d.name=a.name;d.canLeave=_.contains(a.guard.allowed_behaviors,"remove-self")},function(a){d.name="Failed to load ("+a.status+")"})};d.fetchFullUser().then(function(b){_.each(b._memberships,function(a){a.current&&
"Group"===a.group_ref.ref&&e(a.group_ref.key)});a.ready=!0})}]);angular.module("overview").directive("nanodegreeEnrollmentActions",["cacheVersion","currentUser","groups","$location","dateTime","$window","cookieJar","googleTagManager","universalAnalytics",function(a,c,b,d,e,f,g,h,i){return{restrict:"A",scope:{enrollmentActions:"="},templateUrl:"/templates/overview/nanodegree_enrollment_actions.html?"+a,controller:"enrollmentActionsHelper",link:function(a){var b=function(){h.pushTrackingEvent("nanodegreeAccess");f.location.href="/me"},c=["nd006"];a.getNanodegreeButtonInfo=
function(){if(a.isAccessible&&(a.isPaidEnrolled||a.isPaidGraduated))return{variant:"Nanodegree is live, student is enrolled or graduated",text:"Continue Nanodegree",action:b};if(a.isPaidEnrollable){if(a.isClassFull)return a.isPaidWaitlisted?(g.exists("udacity_notify_me_clicked_recently")&&(h.pushTrackingEvent("notificationListJoin"),i.trackEvent({category:"Waitlist",action:"SignUp",label:a.courseKey}),g.remove("udacity_notify_me_clicked_recently")),{variant:"Nanodegree is full, student is waitlisted",
statusMessage:"",statusSuccess:!0,shouldTrackViewedProduct:!1}):{variant:"Nanodegree is full, student not waitlisted, not enrolled",text:"Notify me",sidenote:"when nanodegree re-opens",statusMessage:"",shouldTrackViewedProduct:!1,action:function(){g.set("udacity_notify_me_clicked_recently","yes",{expires:new Date((new Date).getTime()+6E5)});a._joinGroup(a.waitlistGroupKey)}};var d="";-1<c.indexOf(a.courseKey)&&(d="");return{variant:"Nanodegree live, student not enrolled",text:"Enroll in Nanodegree",
sidenote:"After 1 week free trial",statusMessage:d,shouldTrackViewedProduct:!0,action:function(){h.pushTrackingEvent("nanodegreeEnrollment");a._purchaseCourse()}}}return{variant:"Nanodegree not open for paid enrollment",sidenote:"This nanodegree is not yet available for enrollment",shouldTrackViewedProduct:!1}};a=_.extend(a,a.enrollmentActions);a.productLaunchDate=new Date(a.productLaunchDateString);a.hasProductLaunched=a.enrollmentActions.isLaunched;a.isVIP=a.isAccessible&&(!a.isAvailable&&!a.isLaunched||
a.canEditContent)&&a.getNanodegreeButtonInfo().action!==b;a.isFull=a.isClassFull&&!(a.isPaidInterested||a.isPaidEnrolled||a.isPaidGraduated);a.getNanodegreeButtonInfo().shouldTrackViewedProduct&&a.trackViewedProduct(a.enrollmentActions)}}}]);angular.module("overview").directive("courseEnrollmentActions",["cacheVersion","currentUser","groups","$location","dateTime","$window","courseState","modal","googleTagManager",function(a,c,b,d,e,f,g,h,i){return{restrict:"A",scope:{enrollmentActions:"="},templateUrl:"/templates/overview/course_enrollment_actions.html?"+a,controller:"enrollmentActionsHelper",link:function(a){a.courseState=g;a.currentHighlightedFeature=0;a.freeCourseActionDefaultSectionTitle="Access Course Materials";a.paidCourseActionDefaultSectionTitle=
"Enroll in Course";window.setInterval(function(){a.currentHighlightedFeature=(a.currentHighlightedFeature+1)%5;a.$apply()},4E3);a.getPaidCourseActionConfiguration=function(){if(a.isAccessible&&a.isPaidEnrolled)return{variant:"class is live, student is enrolled",text:"Go to class",hidePrice:!0,hideFeatures:!0,action:a._goToClass,shouldTrackViewedProduct:!1};if(a.hasProductLaunched)if(a.isPaidEnrollable){if(a.isClassFull&&a.isPaidWaitlisted)return{variant:"class is full, student is waitlisted",statusMessage:"You will be be notified when course enrollment is open. You can start the free course now.",
shouldTrackViewedProduct:!1};if(a.isClassFull)return{variant:"class is full, student not enrolled",text:"Notify me",note:"Get notified when enrollment is open",sectionTitle:"Enrollment is at capacity",hideFeatures:!0,action:function(){a._joinGroup(a.waitlistGroupKey)},shouldTrackViewedProduct:!1};if(a.hasProductLaunched)return{variant:"class is live, student not enrolled",text:"Start free trial",note:a.spotsRemaining&&20>=a.spotsRemaining?"Only "+a.spotsRemaining+" seats left!":null,action:function(){i.pushTrackingEvent("paidCourseEnrollment");
a._purchaseCourse()},shouldTrackViewedProduct:!0}}else return{variant:"class not open for paid enrollment",hideSectionTitle:!0,shouldTrackViewedProduct:!1};else return{variant:"class not live",hideSectionTitle:!0,shouldTrackViewedProduct:!1}};var b=function(){i.pushTrackingEvent("freeCourseResume");a._goToClass()};a.getFreeCourseActionConfiguration=function(){var c=a.isPaidEnrollable;return a.isPaidEnrolled?{variant:"class is live, student is paid enrolled",hideSectionTitle:!0,placeholder:"You're all set, dive in!",
shouldTrackViewedProduct:!1}:a.isAccessible&&a.isFreeEnrolled?{variant:"class is live, student is enrolled",text:"Resume course materials",action:b,shouldTrackViewedProduct:!1}:a.isAvailable&&a.isEnrollable?(a.freeCourseActionDefaultSectionTitle=c?"Access Course Materials":"Start Free Course",{variant:"class is live, student not enrolled",text:c?"Access course materials":"Start free course",action:function(){i.pushTrackingEvent("freeCourseStart");a._enrollInCourseware()},shouldTrackViewedProduct:!1}):
a.isFreeInterested?{variant:"class not live, student is interested",hideSectionTitle:!0,statusMessage:"You will be notified when the course is open.",shouldTrackViewedProduct:!1}:a.isEnrollable?{variant:"class not live, student not registered",text:"Notify me",note:"Get notified when the course is open",hidePrice:!0,hideFeatures:!0,action:function(){a._joinGroup(a.notificationGroupKey)},shouldTrackViewedProduct:!1}:{variant:"error"}};a=_.extend(a,a.enrollmentActions);a.productLaunchDate=new Date(a.productLaunchDateString);
a.hasProductLaunched=a.enrollmentActions.isLaunched;a.isVIP=a.isAccessible&&!a.isAvailable&&a.getFreeCourseActionConfiguration().action!==b&&a.getPaidCourseActionConfiguration().action!==a._goToClass;a.getPaidCourseActionConfiguration().shouldTrackViewedProduct&&a.trackViewedProduct(a.enrollmentActions)}}}]);angular.module("overview").directive("courseOverviewPage",function(){return{require:"overviewPage",controller:["$scope","courseState",function(a,c){a.courseState=c}]}});angular.module("overview").controller("enrollmentActionsHelper",["$scope","cacheVersion","currentUser","groups","$location","dateTime","couponCode","$window",function(a,c,b,d,e,f,g,h){a._goToClass=function(){h.location.href="/course/viewer#!/c-"+h.encodeURIComponent(a.courseKey)};a._purchaseCourse=function(b){h.location.href="/checkout#!/0?products="+h.encodeURIComponent(b||a.productKey)};a._joinGroup=function(c){b.userIsLoggedIn()?(a.disableCoursewareAction=!0,d.addMember(c,"me").then(function(){a.disableCoursewareAction=
!1;h.location.reload()})):h.location.href="/account/auth#!/signup?join-group="+h.encodeURIComponent(c)+"&next="+h.encodeURIComponent(e.absUrl())};a._enrollInCourseware=function(b){a._enroll("enrolled",b)};a._enroll=function(c){a.disableCoursewareAction=!0;var d="interested"===c?"/course/"+encodeURIComponent(a.courseKey):"/course/thanks-for-enrolling?course="+encodeURIComponent(a.courseKey);b.userIsLoggedIn()?b.enroll(a.courseKey,c,!0).then(function(){a.disableCoursewareAction=!1;a.enrollRequestPending=
!1;h.location.href=d}):h.location.href="/account/auth#!/signup?next="+h.encodeURIComponent(d)+"&enroll="+h.encodeURIComponent(a.courseKey)+"&enroll_state="+h.encodeURIComponent(c)};a.trackViewedProduct=function(b){var c,d;c=b.courseKey.substring(0,2);d="nd"===c?"nanodegree":"ca"===c?"career_advisory":"course";c={id:b.productKey,sku:b.courseKey,name:b.courseTitle,price:b.amountAfterCoupon/100,category:d,label:b.courseKey,value:b.amountAfterCoupon/100,product_key:b.productKey,trial_period_days:7,currency:b.currency,
coupon:null,coupon_valid:null,coupon_description:null,coupon_redeem_by:null,discount_amount:0,discount_type:null,price_before_discount:b.amount/100,account_key:h.account.key,is_email_verified:h.account.email&&h.account.email._verified};c.trial_period_days="course"===d?14:7;g&&(c.coupon=g,c.coupon_valid=b.couponValid,c.coupon_description=b.couponDescription||null,c.coupon_redeem_by=b.couponRedeemBy||null,c.discount_type=b.couponDuration||null,b.couponValid&&(b.amountAfterCoupon&&b.amount)&&(c.discount_amount=
(b.amount-b.amountAfterCoupon)/100));analytics.track("Viewed Product",c,a.segmentPageProperties)}}]);angular.module("overview").controller("overviewPage",["$scope","$location","modal","youtubeVideoPlayer","facebook","productState","universalAnalytics","customers",function(a,c,b,d,e,f,g,h){a.productState=f;a.toggleInstructors={};h.isEligibleForCurrencyPriceMatch("me").then(function(b){a.isEligibleForCurrencyPriceMatch=b});a.showTrailer=function(){var a=window.location.pathname.split("/").pop();g.trackEvent({category:"CourseOverview",action:"TrailerPlayed",label:a});a=function(){d.pauseVideo()};b.activate("trailer").then(a,
a);d.playVideo()};a.getEscapedPageUrl=function(){return window.encodeURI(c.absUrl())};a.urlEncode=function(a){return window.encodeURIComponent(a)};a.currentQuote=0;a.isCurrentQuote=function(b){return a.currentQuote===b};a.quotes=[{name:"Ben Halperin",type:"reviewed the Front-End Web Developer Nanodegree program:",text:"I'm going to be working as a software developer at athenahealth starting in April. I was in the first cohort for the Front-End Web Developer Nanodegree, which I completed in December. The program is still very early (started in October), so there are only a handful of people who have completed it. There are no statistics to give at this point, but I know several people who either have new jobs, were promoted, or are currently looking (and getting interviews).",
questionUrl:"https://www.quora.com/Is-there-somebody-that-get-a-job-by-using-udacity-nanodegrees",question:"Is there somebody that get a job by using Udacity Nanodegrees?",sourceUrl:"http://www.quora.com",source:"Quora"},{name:"\u2605\u2605\u2605 Jack Golding",type:"reviewed the Data Analyst Nanodegree program:",text:"I really liked Udacity when it started. When they stopped giving free certificates away I became disgruntled, but they are stepping up the quality again. To have me pay for Udacity courses, they must become a lot more challenging and in depth, and I expect to learn from industry experts - not someone younger than myself who is still doing their university degree, which was my experience with paying for the Data Science track.",
questionUrl:"https://www.quora.com/Reviews-of-Data-Analyst-Nanodegree-Udacity",question:"Reviews of: Data Analyst Nanodegree (Udacity)",sourceUrl:"http://www.quora.com",source:"Quora"},{name:"Mario Nuevo",type:"reviewed the Nanodegree program:",text:"In my opinion, you are only watching the top of the iceberg. You will miss one of the most important benefits of being enrolled. Support. Support provided both by students and instructors. I learned even more on the forums and with 1st hand support by instructors than in the lessons themselves. Not to mention google+ and linkedin private groups, where you will be able to grow your network.",
questionUrl:"https://www.quora.com/Why-should-I-pay-for-a-Udacity-Nanodegree-when-the-classes-are-already-free",question:"Why should I pay for a Udacity Nanodegree when the classes are already free?",sourceUrl:"http://www.quora.com",source:"Quora"},{name:"Allan Reyes",type:"reviewed the Nanodegree program:",text:"Like all educational opportunities, you'll get out what you put in. The ND program is still very new. A certification certainly won't guarantee you employment on its own merit, but I can safely say that active participation will give you industry-relevant skills. It's also important to note that by participating in the ND program, you can make use of Udacity's excellent career services. You'll get more exposure to employers, tips and mentorship on how to conduct interviews and prepare your resume, and you'll have a full, robust portfolio of projects to demonstrate your capabilities.",
questionUrl:"https://www.quora.com/Is-there-somebody-that-get-a-job-by-using-udacity-nanodegrees",question:"Is there somebody that get a job by using Udacity Nanodegrees?",sourceUrl:"http://www.quora.com",source:"Quora"},{name:"Joel Colucci",type:"reviewed the Nanodegree program:",text:"A Nanodegree gives you the blueprint for building a strong portfolio according to industry best practices and standards. The overall value of the Nanodegree lies in the student's ability to take the knowledge and support provided to them to create great projects. No certificate is a 'golden ticket' to employment.",
questionUrl:"https://www.quora.com/How-valuable-is-a-Udacity-Nanodegree-certificate",question:"How valuable is a Udacity Nanodegree certificate?",sourceUrl:"http://www.quora.com",source:"Quora"}];a.nextQuote=function(){a.currentQuote=a.currentQuote==a.quotes.length-1?0:++a.currentQuote};a.prevQuote=function(){a.currentQuote=0==a.currentQuote?a.quotes.length-1:--a.currentQuote}}]).directive("gradQuote",function(){return{restrict:"E",scope:{quote:"=quote"},template:'<div class="row"><div class="col-xs-8 col-xs-offset-2"><div><strong>{{quote.name}}</strong> {{quote.type}}<br></div></div></div><div class="row row-gap-small"><div class="col-xs-2"><img src="//lh6.ggpht.com/k31eNZbBfu0YF09K6YH1n6MZTqAOGlyQqT2QzmRfWxyx6Q8_yIkklOZRiZxO7ve9x_D2mUpedABmp-i4yA=s45#w=90&h=90"alt="left quote" title="left quote" class="img-responsive pull-right"><br><br><br><a href="" ng-click="$parent.prevQuote()"><span class="glyphicon glyphicon-chevron-left pull-right"></span></a></div><div class="col-xs-8"><p>{{quote.text}}</p><div><span class="small">In response to <a ng-href="{{quote.questionUrl}}">{{quote.question}}</a> on <a ng-href="{{quote.sourceUrl}}">{{quote.source}}</a></span></div></div><div class="col-xs-2"><img src="//lh3.ggpht.com/1J1jqYP4jo8EDJOz5XeDaqlMtdmlOYhYgtg2LtHbc-UL9MTkvlpcCgT4qBgsaPB6Ihof4P-Xa20JqVnhEpg=s45#w=90&h=90"alt="right quote" title="right quote" class="img-responsive pull-left"><br><br><br><a href="" ng-click="$parent.nextQuote()"><span class="glyphicon glyphicon-chevron-right pull-left"></span></a></div></div>'}});angular.module("page.overview",["overview"]);angular.module("overview").directive("priceInfo",["cacheVersion",function(a){return{restrict:"A",scope:{baseAmount:"=",currency:"=",billingIntervalCount:"=",billingInterval:"=",hasCoupon:"=",discountedAmount:"=",couponDuration:"="},templateUrl:"/templates/overview/price_info.html?"+a,link:function(a){a.discountPercent=function(){return Math.round(100*(a.baseAmount-a.discountedAmount)/a.baseAmount)}}}}]);angular.module("page.auth",["ngRoute","core","account"]);
angular.module("page.auth").config(["$locationProvider","$routeProvider","cacheVersion",function(a,c,b){c.when("/signin",{templateUrl:"/templates/angular/account/signin.html?"+b,controller:"signInForm"}).when("/signup",{templateUrl:"/templates/angular/account/signup.html?"+b,controller:"signUpForm"}).when("/request-password-reset",{templateUrl:"/templates/angular/account/request_password_reset.html?"+b,controller:"requestPasswordReset"}).when("/password-reset",{templateUrl:"/templates/angular/account/password_reset.html?"+
b,controller:"passwordReset"})}]);angular.module("account").controller("accountAuth",["$rootScope","$scope","$location","googleBranding",function(a,c,b,d){c.initialSearch=b.search();b.replace().url(b.path());a.isGoogleBranded=d.determineGoogleBrandedUrl(c.initialSearch.next||"")}]);angular.module("account").controller("passwordReset",["$scope","$sce","validator","users",function(a,c,b,d){var e=a.initialSearch.code,f=a.initialSearch.user_key;a.submit=function(){if(!a.buttonDisabled){a.buttonDisabled=!0;a.fieldErrors=null;a.errorMessage=null;a.successMessage=null;var g=b.check({password:{pretty:"your new password",value:a.password,validators:[{type:"required",chained:[{type:"strLen",args:[7,void 0]}]}]},passwordConfirm:{pretty:"confirmed password",value:a.passwordConfirm,validators:[{type:"required",
chained:[{type:"equal",args:[a.password,"password"]}]}]}});g.valid?d.resetPassword(a.password,f,e).then(function(){a.successMessage=c.trustAsHtml('Success! You may now use your new password to <a href="#!/signin">Sign In</a> now.')},function(){a.buttonDisabled=!1;a.errorMessage=c.trustAsHtml('We were unable to reset your password. Please check your email for a more recent password reset email, or request a <a href="#!/request-password-reset">new one</a>.')}):(a.fieldErrors=g.errorText,a.buttonDisabled=
!1)}}}]);angular.module("account").controller("requestPasswordReset",["$scope","$sce","validator","users",function(a,c,b,d){a.submit=function(){if(!a.buttonDisabled){a.buttonDisabled=!0;a.fieldErrors=null;a.errorMessage=null;a.successMessage=null;var e=b.check({email:{pretty:"email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]}});e.valid?d.requestPasswordReset(a.email).then(function(){a.buttonDisabled=!1;a.successMessage=c.trustAsHtml("Success! Please check your email for the link to change your password.")},
function(b){b=b.status;a.buttonDisabled=!1;a.errorMessage=400===b?c.trustAsHtml("We couldn't find an account with that email."):409===b?c.trustAsHtml("We have recently sent a reset email to that address. It may have been marked as spam."):c.trustAsHtml("Something went wrong and we were unable to send your reset email.")}):(a.fieldErrors=e.errorText,a.buttonDisabled=!1)}}}]);angular.module("account").controller("signInForm",["$scope","$q","$sce","$http","$window","session","users","currentUser","groups","validator","google","facebook","$location","safelyRedirect",function(a,c,b,d,e,f,g,h,i,j,l,k,m,n){a.showSignin=!1;var p=a.initialSearch.next;d.head("/account/auth").then(function(a){"CN"==a.headers("X-Berlioz-Country")&&(e.location.href=p?"https://auth.udacity.com/sign-in?next="+p:"https://cn.udacity.com/signin")});a.showSignin=!0;a.hideSocialSignIn=!1;h.userIsLoggedIn()&&
n(p);if(a.initialSearch.error_existing_user&&(d=a.initialSearch.error_existing_user,d.message&&(a.errorMessage=d.message),d.email&&(a.email=d.email),"Facebook"===d.provider||"Google"===d.provider))a.hideSocialSignIn=!0;a.showTopBox=a.initialSearch.showMessage;var q=function(b){try{a.signedInUserAccountKey=b.data.account.key,a.signedInUserEmail=b.config.data.udacity.username}catch(d){console.log("Cannot retrieve accountKey and username"),a.signedInUserAccountKey=null,a.signedInUserEmail=null}var b=
a.initialSearch.enroll,e=a.initialSearch.enroll_state||"enrolled",f=a.initialSearch["join-group"],b=b?h.enroll(b,e,!0):c.when(!0),g=f?h.fetchFullUser().then(function(){return i.addMember(f,h.get("key"))}):c.when(!0);return b.then(function(){return g.then(function(){h.getUser();analytics.identify(a.signedInUserAccountKey,{email:a.signedInUserEmail},void 0,function(){analytics.track("Signed In",{accountKey:a.signedInUserAccountKey,category:"Sign In"},a.segmentPageProperties,function(){analytics.user()&&
analytics.alias(a.signedInUserAccountKey,analytics.user().anonymousId(),a.segmentPageProperties,function(){n(p)})})})})})},r=function(d){a.isLoading=!1;a.errorMessage=b.trustAsHtml("We were unable to validate your account.");return c.reject(d)},s=function(d){a.isLoading=!1;if(422===d.data.status)a.errorMessage=b.trustAsHtml("The email address associated with your account has not been verified. Please check your email for further instructions and return here to continue with signing in.");else if(403===
d.data.status)a.errorMessage=b.trustAsHtml('We couldn\'t find a valid account associated with your email. You can sign in with an existing account, or <a href="#!/signup">Sign Up</a> to get started.');else{if(502===d.data.status)return r(d);a.errorMessage=b.trustAsHtml("Something went wrong and we're currently looking into it.")}return c.reject(d)};a.signInEmail=function(){a.buttonDisabled=!0;a.fieldErrors=null;a.email=$("#email").val();a.password=$("#password").val();var d=j.check({email:{pretty:"email address",
value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]},password:{pretty:"password",value:a.password,validators:[{type:"required"}]}});d.valid?f.put({udacity:{username:a.email,password:a.password}}).then(q,function(d){a.buttonDisabled=!1;a.errorMessage=b.trustAsHtml("The email or password you entered is invalid");return c.reject(d)}):(a.fieldErrors=d.errorText,a.buttonDisabled=!1)};a.signInFacebook=function(){return k.getAuthResponse().then(function(a){return f.put({facebook:{signed_request:a.signedRequest}}).then(q,
s)},r)};a.signInGoogle=function(){l.getToken(!1).then(function(b){a.isLoading=a.isGoogleBranded?!0:!1;b={google:{token:b.code}};a.isGoogleBranded&&(b.autolink=!0);return f.put(b).then(q,s)},r)};a.hasLongCookieString=function(){return 3E3<document.cookie.length}}]);angular.module("account").controller("signUpForm",["$scope","$q","$sce","$timeout","session","users","currentUser","groups","validator","google","facebook","$location","safelyRedirect","googleTagManager","retry","cookieJar","universalAnalytics",function(a,c,b,d,e,f,g,h,i,j,l,k,m,n,p,q,r){a.signUpFormFillTracked=!1;a.$watchGroup(["email","password","firstName","lastName"],function(b){!a.signUpFormFillTracked&&_.any(b,function(a){return void 0!==a})&&analytics.track("Sign Up Started",{category:"Sign Up"},
a.segmentPageProperties,function(){a.signUpFormFillTracked=!0})});a._removeEmailCookie=function(){q.exists("emailAddressForSignUp")&&q.remove("emailAddressForSignUp",{path:"/"})};var s=function(b){a.registeredUser=b;var d=function(){var b=a.initialSearch.next;b?m(b):m("/")},b=a.initialSearch.enroll,e=a.initialSearch.enroll_state||"enrolled",f=a.initialSearch["join-group"],i=b?g.enroll(b,e,!0):c.when(!0),j=f?g.fetchFullUser().then(function(){return h.addMember(f,g.get("key"))}):c.when(!0),l,k;a._removeEmailCookie();
l=b?r.trackEvent({category:"SignUp",action:"Enroll",label:b}):r.trackEvent({category:"SignUp",action:"Direct"});k=n.pushTrackingEvent("RegistrationCompleted");g.getUser();analytics.identify(a.registeredUser.key,{firstName:a.registeredUser.first_name,lastName:a.registeredUser.last_name,createdAt:new Date,email:a.registeredUser.email&&a.registeredUser.email.address},void 0,function(){analytics.track("Signed Up",{accountKey:a.registeredUser.key,category:"Sign Up"},a.segmentPageProperties,function(){if(analytics.user()&&
a.registeredUser&&a.registeredUser.key)analytics.alias(a.registeredUser.key,analytics.user().anonymousId(),a.segmentPageProperties,function(){return i["finally"](function(){return j["finally"](function(){return l["finally"](function(){return k["finally"](d)})})})});else return i["finally"](function(){return j["finally"](function(){return l["finally"](function(){return k["finally"](d)})})})})})},w=function(b){a.isLoading=a.isGoogleBranded?b:!1},v=function(d,e){w(!1);a.errorMessage=b.trustAsHtml("We were unable to validate your "+
d+" account. ");return c.reject(e)},t=function(d,e){w(!1);a.errorMessage=b.trustAsHtml("We were unable to access your "+d+" account.");return c.reject(e)},u=function(d,e,f){w(!1);var h=f.data.status;409===h?("Udacity"===d?a.initialSearch.error_existing_user={message:b.trustAsHtml("This account ("+e+") already exists, please Sign In to continue."),provider:"udacity",email:e}:"Facebook"===d?a.initialSearch.error_existing_user={message:b.trustAsHtml("The account you entered is not valid. Please sign up with a different account to continue."),
provider:d,email:e}:"Google"===d&&(a.initialSearch.error_existing_user={message:b.trustAsHtml("The account you entered is not valid. Please sign up with a different account to continue."),provider:d,email:e}),k.path("/signin"),a._removeEmailCookie()):a.errorMessage=422===h&&"Google"===d?b.trustAsHtml("The email address associated with your account has not been verified. Please check your email for further instructions and return here to continue."):b.trustAsHtml("Something went wrong and we're currently looking into it.");
a.buttonDisabled=!1;return c.reject(f)};a.signUpEmail=function(){a.buttonDisabled=!0;a.errorMessage=null;a.fieldErrors=null;var b=i.check({email:{pretty:"your email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]},password:{pretty:"your password",value:a.password,validators:[{type:"required",chained:[{type:"strLen",args:[7,void 0]}]}]},firstName:{pretty:"your first name",value:a.firstName,validators:[{type:"required"}]},lastName:{pretty:"your last name",value:a.lastName,
validators:[{type:"required"}]}});b.valid?f.registerUser({email_address:a.email,first_name:a.firstName,last_name:a.lastName,password:a.password,tos_accepted:!0}).then(s,function(b){u("Udacity",a.email,b)}):(a.fieldErrors=b.errorText,a.buttonDisabled=!1)};a.signUpFacebook=function(){return l.getAuthResponse().then(function(a){return l.getMeResponse().then(function(b){return f.registerUser({email_address:b.email,first_name:b.first_name,last_name:b.last_name,facebook:{signed_request:a.signedRequest},
tos_accepted:!0}).then(s,function(a){u("Facebook",b.email,a)})},function(a){t("Facebook",a)})},function(a){v("Facebook",a)})};a.signUpGoogle=function(){j.getToken(!1).then(function(b){w(!0);b={google:{token:b.code}};a.isGoogleBranded&&(b.autolink=!0);return e.put(b).then(s,function(){return p(j.getMeResponse,5,100).then(function(b){return j.getToken(!0).then(function(c){c={email_address:b.email,first_name:b.given_name,last_name:b.family_name,google:{token:c.code},tos_accepted:!0};a.isGoogleBranded&&
(c.autolink=!0);return f.registerUser(c).then(s,function(a){u("Google",b.email,a)})},function(a){v("Google",a)})},function(a){t("Google",a)})})},function(a){v("Google",a)})};q.exists("emailAddressForSignUp")&&(a.email=q.get("emailAddressForSignUp"))}]);angular.module("account").controller("viewerSettings",["$scope","currentUser","users","techDetect","$window",function(a,c,b,d){a.isBrowserIE="Explorer"===d.browserStats().browser;a.videoQualities=[{label:"Automatic",value:"default"},{label:"360p",value:"medium"},{label:"480p",value:"large"},{label:"720p",value:"hd720"},{label:"1080p",value:"hd1080"}];a.playbackRates=[{label:"0.25x",value:0.25},{label:"0.5x",value:0.5},{label:"Normal",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}];var e=c.getUser();
e.site_preferences=e.site_preferences||{};e.site_preferences=_.defaults(e.site_preferences,{use_html5_player:!0,auto_advance:!0,playback_rate:a.playbackRates[2].value,video_quality:a.videoQualities[0].value});a.settings={useHtml5Player:e.site_preferences.use_html5_player,autoAdvance:e.site_preferences.auto_advance,playbackRate:_.find(a.playbackRates,function(a){return a.value===e.site_preferences.playback_rate}),videoQuality:_.find(a.videoQualities,function(a){return a.value===e.site_preferences.video_quality})};
a.save=function(){a.serverSuccess=a.serverError="";a.saving=!0;e.site_preferences={use_html5_player:a.settings.useHtml5Player,auto_advance:a.settings.autoAdvance,playback_rate:a.settings.playbackRate.value,video_quality:a.settings.videoQuality.value};b.put(e).then(function(){a.saving=!1;a.serverSuccess="Classroom Settings Saved"},function(b){a.saving=!1;a.serverError=b.error})}}]);angular.module("payment").controller("checkoutPage",["$scope","paymentFlow","$routeParams","$location","api","currentUser","classroom2Url","cacheVersion","dateTime","$timeout","universalAnalytics","$window",function(a,c,b,d,e,f,g,h,i,j,l,k){f.get("_registered")||(window.location.href="/account/auth#!/signup?next="+encodeURIComponent(window.location.href));a.$on("$routeChangeSuccess",function(){l.trackVirtualPageView();if(angular.isDefined(b.stepNumber)&&c.isInFlow())c.goToStep(b.stepNumber);else{var e=
[];d.search().products?(e=d.search().products.split(","),c.begin(e),a.flow=c.getCurrentFlowData(),a.flow.abandonedCheckout=!0,"true"===d.search().endTrial&&(a.flow.endTrial=!0)):window.history.back()}});a.getCurrentDate=function(){return i.getCurrent()};a.isProductLaunched=function(a){return a&&a.launch_date&&new Date(a.launch_date)<i.getCurrent()};a.isProductNotLaunched=function(a){return a&&!a.was_launched};a.getGoToNanodegreeLink=function(b){return b&&b.shouldSeeOnboarding?"/teams/#/onboarding/"+
a.flow.uriEncodedCourseKey:"/me"};a.getDescStringByCourseType=function(a){switch(a){case "Degree":return"Nanodegree";case "Career":return"program";case "Course":return"course"}};a.getDatePlusDays=function(a,b){return a?new Date(a.getTime()+864E5*b):null};a.submitStep=function(b){a.step.submitting=!0;c.submitStep(b).then(function(){a.step.submitting=!1;$("html,body").animate({scrollTop:0})})};a.getCacheBustingUrl=function(a){return a&&a+"?"+h};a.currentUserName=f.getFullName();a.classroom2Url=g;f.get("email")&&
(a.currentUserEmail=f.get("email").address);a.currentUserNickname=f.get("nickname");a.step={};a.getCurrentStep=c.getCurrentStep;a.getCurrentFlowSteps=c.getCurrentFlowSteps;a.$on("$destroy",function(){k.onbeforeunload=void 0});k.onbeforeunload=function(){a.flow.abandonedCheckout&&(a.flow.segmentProps.end_time=new Date,a.flow.segmentProps.time_on_page_sec=(a.flow.segmentProps.end_time-a.flow.segmentProps.start_time)/1E3,analytics.track("Abandoned Checkout Step",a.flow.segmentProps,k.segmentPageProperties))}}]);angular.module("page.payment",["core"]).config(["$routeProvider",function(a){a.when("/:stepNumber",{}).otherwise({redirectTo:"/0"})}]);angular.module("payment").directive("dateExp",function(){return{require:"ngModel",link:function(a,c,b,d){d.$parsers.push(function(a){if(void 0==a)return"";var b;/^\d\d\s\/$/.test(a)?b=a.substr(0,1):(b=a.replace(/[^0-9]/g,""),4<b.length&&(b=b.substr(0,4)),/^\d{2,4}$/.test(b)&&(b=b.substr(0,2)+" / "+b.substr(2,b.length-2)));b!=a&&(d.$setViewValue(b),d.$render());return b})}}});angular.module("payment").constant("DAY_IN_MILLISECONDS",864E5).factory("fullClassExperienceFlowDefinition",["$q","stripeCreditCard","validator","api","currentUser","products","customers","couponCode","users","$timeout","$log","nodes","DAY_IN_MILLISECONDS","userTrials","googleTagManager","universalAnalytics","$window",function(a,c,b,d,e,f,g,h,i,j,l,k,m,n,p,q,r){function s(a){return a?(a^16*Math.random()>>a/4).toString(16):([1E7]+-1E3+-4E3+-8E3+-1E11).replace(/[018]/g,s)}function w(a){return"card_declined"===
a.code?"Your card was declined. Please try again. If this issue persists, please contact payment-support@udacity.com.":"processing_error"===a.code?"An error occurred while processing your card. Please try again.If this issue persists, please contact payment-support@udacity.com.":a.code?a.message||a.error:"An error occurred while processing your card. Please check your information and try again. If this issue persists, please contact payment-support@udacity.com."}function v(a){return a&&_.map(a._course_groups,
function(a){return a.course_ref&&a.course_ref.key})}function t(b,c){var e={product_keys:c.productKeys};b&&b.id&&(e.stripe_token=b.id);c.coupon&&c.coupon.valid&&(e.coupon_id=c.coupon.key);var f,h;c.customer&&(h=_.find(c.customer.subscriptions,function(a){return a.plan.metadata.sku===c.product._course_groups[0].course_ref.key&&"free"===a.plan.metadata.variant.toLowerCase()}));h&&(f=d.post("/customers/me/subscriptions/"+h.id+"/change_plan",{new_product_key:c.product.key}));if(c.endTrial){var g=_.find(c.customer.subscriptions,
function(a){return a.plan.id===c.product.key}).id;f=g?d.post("/customers/me",{stripe_token:e.stripe_token}).then(function(){return d.deleteRequest("/customers/me/subscriptions/"+g+"/trial")}):a.reject({data:{}})}else f||(f=d.post("/customers/me/purchases",e));f=f.then(function(a){return a.data.purchase},function(b){c.generalPaymentFormError=b.data.error?w(b.data):"We are having difficulties processing your request. If this error keeps appearing please contact payment-support@udacity.com.";b.data.was_charged&&
alert("Error - your card was charged successfully but an error occured.Please contact us at payment-support@udacity.com immediately and we'll get this sorted out. Your spot is reserved. Please do NOT pay again.");return a.reject(b)});f.then(function(){return c.course.isNanodegree&&c.course.shouldSeeOnboarding?i.setOnboardingFlag("me",c.course.key):a.when()});return f}function u(a,b,c,d,f){var h={step:1,cc_prefilled:!!a.customerCard,sku:null,product_key:null,name:null,price:null,currency:"USD",trial_period_days:null,
coupon:null,coupon_valid:!1,coupon_description:null,coupon_redeem_by:null,discount_amount:0,discount_type:null,enrolled_nanodegrees:e.getEnrolledNanodegreeKeys().toString(),enrolled_courses:e.getEnrolledCourseKeys().toString(),price_before_discount:null,funnel_id:y,account_key:r.account.key,is_email_verified:r.account.email&&r.account.email._verified};a.product&&(h.product_key=a.product.key,h.name=a.product.name,h.price=a.product.amount/100,h.price_usd=h.price,h.currency=a.product.currency,h.trial_period_days=
a.product.trial_period_days,h.price_before_discount=h.price,h.value=h.price,h.nd_variant=a.product.variant,h.variant=a.product.variant,h.price_usd=h.price,"INR"==h.currency&&(h.value*=0.015,h.price_usd=h.value));a.course&&(h.category="Degree"===a.course.courseType?"Nanodegree "+(h.nd_variant||"STANDARD"):"Career"===a.course.courseType?"Career Advisory":"Paid Course",h.sku=a.course.key,h.label=h.sku);a.coupon&&a.coupon.key&&(h.coupon=a.coupon.key,h.coupon_description=a.coupon.description||null,h.coupon_redeem_by=
a.coupon.redeem_by||null,h.discount_type=a.coupon.duration||null,a.coupon.valid&&(h.coupon_valid=a.coupon.valid,h.discount_amount=h.price_before_discount?(a.product.amount-a.coupon.discounted_price)/100:0,h.price=a.coupon.discounted_price/100));"Added Product"===c?h.quantity=1:"Completed Order"===c&&(h=_.extend(h,{orderId:b,total:h.price,revenue:h.price,shipping:0,tax:0,discount:h.discount_amount,coupon:h.coupon,currency:h.currency,products:[{id:h.product_key,sku:h.sku,name:h.name,price:h.price,quantity:1,
category:h.category,variant:h.variant,coupon:h.coupon}]}));d&&(h.start_time=d);f&&(h.end_time=new Date,h.time_on_page_sec=(h.end_time-h.start_time)/1E3);return h}var y=s();return[{label:"Checkout",view:"/templates/angular/payment/payment_form.html",onStart:function(b,e){e.funnel_id=y;var i=[f.get(e.productKeys[0]),g.get("me")];if(h){var j=d.get("/coupons/"+h+"/compute_discount",{product_key:e.productKeys[0]}),j=j.then(function(a){e.coupon=a.data.coupon;a.data.coupon.valid&&(e.coupon.discounted_price=
a.data.result)},function(){e.coupon={valid:!1};return null});i.push(j)}a.all(i).then(function(a){e.product=a[0];var b=_.first(e.product._course_groups).course_ref.key;e.customer=a[1];e.customerCard=c.getDefaultCard(e.customer);e.cardIsLoaded=!0;e.uriEncodedCourseKey=window.encodeURIComponent(v(e.product));k.get(b).then(function(a){var b=a.catalog_entry._image?a.catalog_entry._image.serving_url:null,c=a.overview_details?a.overview_details.should_see_onboarding:!1;e.confirmationStepLabel={Career:"Start program",
Degree:"Start Nanodegree",Course:"Start course"}[a.getCourseType()];e.course={key:a.key,imageUrl:b,isNanodegree:a.isNanodegree(),isCareer:a.isCareer(),courseType:a.getCourseType(),shouldSeeOnboarding:c};p.pushTrackingEvent("checkoutStart",{productName:e.product.name,productCurrency:e.product.currency,productPrice:e.product.amount,orderNodeKey:e.course.key,isNanodegree:a.isNanodegree,isCareer:a.isCareer,getCourseType:a.getCourseType});a=u(e,null,"Viewed Checkout Step");e.segmentProps=a;e.segmentProps.start_time=
new Date;analytics.track("Viewed Checkout Step",a,r.segmentPageProperties);analytics.track("Added Product",a,r.segmentPageProperties);if(e.coupon&&e.coupon.no_credit_card_required)return t(!1,e).then(function(){r.location.href="/me"});if(e.product.autoenroll&&!e.endTrial)return t(!1,e).then(function(){r.location.href="/course/viewer#!/c-"+r.encodeURIComponent(e.course.key)});var d;if(e.product.variant&&"free"===e.product.variant.toLowerCase())if(e.customer&&(d=_.find(e.customer.subscriptions,function(a){return a.plan.metadata.sku===
e.product._course_groups[0].course_ref.key&&a.plan.metadata.variant&&"free"!==a.plan.metadata.variant.toLowerCase()})),d)console.log("user is enrolled in non-free variant");else return t(!1,e).then(function(){r.location.href="/me"})});e.endTrial?e.inTrialPeriod=!1:(a=e.product.trial_period_days,e.inTrialPeriod=0<a,e.trialPeriodStarts=new Date(Date.now()+a*m),a=new Date(e.trialPeriodStarts),b=a.getMonth(),a.setMonth(a.getMonth()+1),a.getMonth()!=(b+1)%12&&a.setDate(0),e.secondPaymentDue=a)})},onJump:function(a){return a.paymentConfirmed?
!1:!a.paymentConfirmed},onSubmit:function(b,d){if(d.customerCard)return t(!1,d);var e=b.creditCard||{},f=c.checkValidity(e);d.creditCardErrors=f.errorText;if(!f.valid)return!1;f=(d.product&&d.product.name)+", "+v(d.product);return c.createPaymentToken(f,e).then(function(a){return t(a,d)},function(b){d.generalPaymentFormError=w(b.error);return a.reject(b)})}},{getLabel:function(a){return a.confirmationStepLabel},view:"/templates/angular/payment/payment_confirmation.html",onStart:function(a,b){b.paymentConfirmed=
!0;b.payment=a;var c=b.product&&(b.product.amount||0)/100,d=null;try{d=_.find(a.customer.subscriptions,function(a){return a.plan.id===b.product.key}).id}catch(e){l.error("Failed to get Transaction Id",e)}q.trackTransaction({transactionId:d,transactionTotal:c,transactionAffiliation:"Udacity",transactionProducts:[{name:b.product&&b.product.name||"Missing product name, FILL IN IN CONTENT EDITOR ASAP FOR "+_.first(v(b.product)),sku:"DD44",price:c,quantity:1,category:_.first(v(b.product))}]});p.pushTrackingEvent("CompletedOrder",
{transactionVal:c,transactionOrderId:d,transactionPromoCode:h,orderNodeKey:b.course.key,isNanodegree:b.course.isNanodegree});b.abandonedCheckout=!1;analytics.track("Completed Checkout Step",u(b,d,"Completed Checkout Step",b.segmentProps.start_time,!0),r.segmentPageProperties);analytics.track("Completed Order",u(b,d,"Completed Order",b.segmentProps.start_time,!0),r.segmentPageProperties)}}]}]);angular.module("payment").directive("numbersOnly",function(){return{require:"ngModel",link:function(a,c,b,d){d.$parsers.push(function(a){if(void 0==a)return"";var b=a.replace(/[^0-9]/g,"");b!=a&&(d.$setViewValue(b),d.$render());return b})}}});angular.module("payment").factory("paymentFlow",["$q","paymentFlowDefinitions","$location",function(a,c,b){function d(){return f=e[f.number+1]}var e=null,f=null,g={};return{begin:function(a){e=c.get(a);f=e[0];g={productKeys:a||[]};if(f.onStart)f.onStart(null,g);b.path("/"+f.number.toString())},submitStep:function(c){var e=a.defer();(c=f.onSubmit(c,g))?a.when(c).then(function(a){var c=d();if(c.onStart)c.onStart(a,g);e.resolve();b.path("/"+c.number.toString())},function(){e.resolve()}):e.resolve();
return e.promise},goToStep:function(a){a=window.parseInt(a,10);if(a!==f.number&&(a=e[a],!a.onJump||a.onJump(g))){if(a.onStart)a.onStart(null,g);b.path("/"+d().number.toString())}},isInFlow:function(){return!!e},getCurrentStep:function(){return f},getCurrentFlowSteps:function(){return e},getCurrentFlowData:function(){return g},goToNextStep:d}}]);angular.module("payment").factory("paymentFlowDefinitions",["fullClassExperienceFlowDefinition",function(a){var c={"default":a};_.each(c,function(a){_.each(a,function(a,b){a.number=b})});return{get:function(){return c["default"]}}}]);angular.module("payment").controller("paymentForm",["$scope","$filter","api","customers","modal","$window",function(a,c,b,d,e,f){function g(){a.submitStep({creditCard:h.creditCard,acceptedTos:a.acceptedTos})}a.sendVerificationEmail=function(){b.post("/users/send_verification_email").success(function(){a.resentVerificationEmail=!0}).error(function(a){console.error("Something went wrong",a)})};d.isEligibleForCurrencyPriceMatch("me").then(function(b){a.isEligibleForCurrencyPriceMatch=b});a.refresh=function(){window.location.reload()};
var h=a.flow;a.trialPeriod=function(a){if(!h.course)return"";var b=h.course.isNanodegree||h.course.isCareer?"1 Week":"2 Weeks";return a?b.toLowerCase():b};a.firstPaymentDescription=function(){return!h.product?"":a.isProductNotLaunched(h.product)?"You will not be charged until the "+a.getDescStringByCourseType(h.course.courseType)+" launches. We will send you a reminder when the "+a.getDescStringByCourseType(h.course.courseType)+" starts.":"You won't be charged until "+c("date")(h.trialPeriodStarts,
"MMMM d, yyyy")};a.submitButtonDescription=function(){return a.step.submitting?"Processing...":h.inTrialPeriod?"Start Free Trial":"Start Subscription"};a.licence={agreed:!1};a.isPaymentInfoEmpty=function(){if(a.flow.customerCard)return!1;var b=a.flow.creditCard;return!b?!0:_.isEmpty(b.nameOnCard)||_.isEmpty(b.number)||!b.expiryMonth||!b.expiryYear||_.isEmpty(b.cvc)};a.isCourse=function(){return h.course&&!h.course.isNanodegree};a.isDataReady=function(){return!!h.course&&!!h.product};a.isNdPlus=function(){return h.product&&
"plus"==h.product.variant.toLowerCase()};a.isNdLite=function(){return h.product&&"lite"==h.product.variant.toLowerCase()};a.isNdFree=function(){return h.product&&"free"==h.product.variant.toLowerCase()};a.showLoadingSpinner=function(){return!a.isDataReady()||!h.product||h.product.autoenroll&&!h.endTrial||a.isNdFree()||h.coupon&&h.coupon.no_credit_card_required};a.submit=function(){a.isNdPlus()&&!a.licence.agreed?e.activate("agree with terms"):g()};a.submitWithNdPlus=function(){e.cancel();g()};a.proceedWithoutNdPlus=
function(){e.cancel();var c=a.flow.product.key;b.get("/products/fromNode/"+a.flow.course.key+"/billingInfo",{variant:"STANDARD",currency:a.flow.product.currency}).success(function(b){f.location.href=f.location.href.replace(c,b.product.key);a.flow.segmentProps.reason="switched-to-nd-standard";f.location.reload()})}}]);angular.module("payment").directive("priceMatchNotice",[function(){return{restrict:"EA",scope:{title:"=",eligible:"="},template:'<div class="row">\t<div class="col-xs-6 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4 alert alert-success text-center" data-ng-if="eligible">\t\tYou are eligible for a currency adjustment refund.\t\t<p><small class="faded"><a data-ng-click="showCurrencyPriceMatchModal()">Click here for more information.</a></small></p>\t</div></div><div class="ng-cloak" data-modal-dialog="currencyPriceMatch">\t<div class="modal-header">\t\tInternational Refund\t</div>\t<div class="modal-body">\t\t<div class="ng-cloak modal-body">\t\t\t<p>"We recently launched a localized pricing model for our students in India. Going forward, residents of India are eligible for a subscription adjustment that will more closely reflect the INR price point. </p>\t\t\t<p>Please email <a href="mailto:payment-support@udacity.com?subject=INR Price Match Discount">payment-support@udacity.com</a>\t\t\tduring your 7-day Nanodegree free trial to have this adjustment made!</p>\t\t\t<p>Thank you!</p>\t\t</div>\t</div></div> ',
controller:["$scope","modal",function(a,c){a.showCurrencyPriceMatchModal=function(){c.activate("currencyPriceMatch")}}]}}]);angular.module("payment").factory("stripeCreditCard",["$http","$q","$rootScope","validator",function(a,c,b,d){var e=window.Stripe,f=!!e,g={createPaymentToken:function(a,d){var j=c.defer(),l=g.checkValidity(d);l.valid?f&&e.createToken({subject:a,name:d.nameOnCard,number:d.number,cvc:d.cvc,exp_month:d.expiryMonth,exp_year:d.expiryYear},function(a,c){b.$apply(function(){c.error?j.reject(c):j.resolve(c)})}):j.reject(l);return j.promise},checkValidity:function(a){return d.check({nameOnCard:{pretty:"cardholder's name",
value:a.nameOnCard,validators:[{type:"required"}]},number:{pretty:"credit card number",value:a.number,validators:[{type:"required",chained:[{type:"javascript",args:[e.card.validateCardNumber,a.number],failMsg:"Please enter a valid credit card number."}]}]},cvc:{pretty:"security code",value:a.cvc,validators:[{type:"required",chained:[{type:"javascript",args:[e.card.validateCVC,a.cvc],failMsg:"Please enter a valid security code."}]}]},expiryMonth:{pretty:"expiration month",value:a.expiryMonth,validators:[{type:"required"}]},
expiryYear:{pretty:"expiration year",value:a.expiryYear,validators:[{type:"required"}]}})},prettifyErrorResponse:function(a){return"card_declined"===a.code?"Your card was declined. Please try again. If this issue persists, please contact payment-support@udacity.com.":"processing_error"===a.code?"An error occurred while processing your card. Please try again.If this issue persists, please contact payment-support@udacity.com.":a.code?a.message:"An error occurred while processing your card. Please check your information and try again. If this issue persists, please contact payment-support@udacity.com."},
buildCreditCardMask:function(a,b){return"American Express"===a?"**** ****** *"+b:"Diners Club"===a?"**** **** **"+b.slice(0,2)+" "+b.slice(2,4):"**** **** **** "+b},getDefaultCard:function(a){var b=null;a&&0<a.cards.length&&(b=_.find(a.cards,function(b){return b.id===a.default_card}),b.maskedNumber=g.buildCreditCardMask(b.type,b.last4));return b}};return g}]);angular.module("payment").directive("stripeCreditCardDetails",["cacheVersion",function(a){return{restrict:"A",scope:{card:"=stripeCreditCardDetails",customerCard:"=customerCard",errors:"="},templateUrl:"/templates/angular/payment/stripe_credit_card_details.html?"+a,link:function(a){a.paymentSystem="default";var b=[{type:"visa",firstDigits:[4]},{type:"mastercard",firstDigits:[51,55]},{type:"amex",firstDigits:[34,37]},{type:"discover",firstDigits:[6011,65,301,302,303,304]},{type:"diners",firstDigits:[300,
305,36,38]},{type:"jcb",firstDigits:[2031,1800,35]}];a.$watch("card.number",function(d){var e=_.find(b,function(a){return!!_.find(a.firstDigits,function(a){return RegExp("^"+a).test(d)})});a.paymentSystem=e?e.type:"default"});a.$watch("cardDate",function(b){a.errors=a.errors||{};a.errors.expirationDate=null;a.card=a.card||{};a.card.expiryMonth=null;a.card.expiryYear=null;b=(b||"").replace(/\s/g,"");if(/^\d{2}\/\d{2}$/.test(b)){var e=b.split("/"),b=+e[0],e=+e[1],f;a:{if(1<=b&&12>=b){var g=new Date;
f=g.getUTCMonth()+1;g=+g.getUTCFullYear().toString().substr(2,2);if(!(g>e||g==e&&f>b)){f=!0;break a}}f=!1}f?(a.card.expiryMonth=b,a.card.expiryYear=e):a.errors.expirationDate=["Please enter a valid expiration date."]}});a.getCardTypeAlias=function(a){return{Visa:"visa","American Express":"amex","Diners Club":"diners",Discover:"discover",JCB:"jcb"}[a]}}}}]);angular.module("payment").directive("uTooltip",function(){return{link:function(a,c,b){$(c).tooltip({title:'<div class="tooltip-content">'+b.uTooltip+"</div>",html:!0,container:"body"})}}});angular.module("permissions").directive("accountList",["cacheVersion",function(a){return{restrict:"A",templateUrl:"/templates/content_editor/permissions/account_list.html?"+a,scope:{accountRefs:"=accountList"},controller:["$scope",function(a){a.removeAccount=function(b){a.accountRefs.splice(b,1)};a.addAccount=function(b){a.accountRefs.push(b.key)}}]}}]);angular.module("permissions").factory("permissions",["api",function(a){var c={normalizeRef:function(a){return!a?a:a.ref&&a.key?a.ref+"."+a.key:a},getPrincipal:function(b,c){return a.get("/permissions/principals/"+encodeURIComponent(b),{fresh:!!c}).then(function(a){return a.data.principal})},findPrincipals:function(b,c,e,f){b={query:b};c&&(b.query+=" kind="+c);e&&(b.limit=e);f&&(b.cursor=f);return a.get("/permissions/principals",b).then(function(a){return a.data})},autoScopeRole:function(a){if("Role"===
a.kind){if(a.scope_names.length)return null;a={name:a.name,kind:"ScopedRole",scopes:{},key:"ScopedRole."+a.name+"\\3aglobal"}}return a},getBehaviors:function(b,c,e){return a.get("/permissions/behaviors/"+encodeURIComponent(b),{fresh:!!c}).then(function(a){var b=a.data.behaviors,a=_.map(b,function(a,b){a.name=b;return a}),c=function(a){a.priority=(a.priority||0)+1;_.each(a.implied_behaviors,function(a){b[a]&&c(b[a])})};e&&(_.each(a,function(a){c(a)}),a.sort(function(a,b){return a.priority!==b.priority?
b.priority-a.priority:a.name.localeCompare(b.name)}));return a})},grantPermission:function(a,d){var e=_.find(a.permissions,function(a){return a.behavior===d.behavior&&c.normalizeRef(a.principal_ref)===c.normalizeRef(d.principal_ref)});e||(a.permissions.push(d),e=d);e.derivation=_.union(e.derivation||[],["assigned"])},revokePermission:function(a,d){a.permissions=_.reject(a.permissions,function(a){return a.behavior===d.behavior&&c.normalizeRef(a.principal_ref)===c.normalizeRef(d.principal_ref)&&(a.derivation=
_.reject(a.derivation,function(a){return"assigned"===a}),0===a.derivation.length)?!0:!1})},hasPermission:function(a,d){var e=d.behavior,f=c.normalizeRef(d.principal_ref),g=d.derivation||[];return _.some(a.permissions,function(a){return(!e||e===a.behavior)&&(!f||f===c.normalizeRef(a.principal_ref))&&_.every(g,function(b){return _.contains(a.derivation,b)})})},grantCentralPermission:function(b){return a.post("/permissions/central",{permissions:{guard:{allow:[b]}}})}};return c}]);angular.module("permissions").directive("permissionsEditor",["permissions","cacheVersion",function(a,c){return{restrict:"A",templateUrl:"/templates/content_editor/permissions/permissions_editor.html?"+c,scope:{guard:"=permissionsEditor"},link:function(b,c){c.addClass("permissions-editor");b.message=null;b.kind=null;b.behaviors=[];b.$watch("guard",function(c){null===c||void 0===c?(b.message=null,b.kind=null,b.behaviors=[]):c.subject_kind?c.subject_kind!==b.kind&&(b.message="Loading behaviors...",a.getBehaviors(c.subject_kind,
!1,!0).then(function(a){b.kind=c.subject_kind;b.message=null;b.behaviors=a;_.each(b.behaviors,function(a){var b="Allowed to "+a.doc;a.implied_behaviors.length&&(a.implied_behaviors.sort(),b+="; implies "+a.implied_behaviors.join(", "));a.description=b+"."})},function(a){b.kind=c.subject_kind;b.message="Unable to fetch behaviors for "+c.subject_kind+": error "+a.status;b.behaviors=[]})):(b.message="Not allowed to view permissions.",b.kind=null,b.behaviors=[])});b.getDerivationOrder=function(a){return _.contains(a.derivation,
"assigned")?0:_.contains(a.derivation,"inherited")?1:_.contains(a.derivation,"synthetic")?2:3};b.getPrincipalRefOrder=function(b){return a.normalizeRef(b.principal_ref)};b.isAssigned=function(a){return _.contains(a.derivation,"assigned")};b.isSynthetic=function(a){return _.contains(a.derivation,"synthetic")};b.revokePermission=function(c){a.revokePermission(b.guard,c)}}}}]).controller("addPermissionController",["$scope","permissions",function(a,c){a.addPermission=function(b){c.grantPermission(a.guard,
{behavior:a.behavior.name,principal_ref:b.key})}}]);angular.module("permissions").constant("principalImageUrls",{unknown:"/media/img/site/icons/udacity/principal_unknown.png",Account:"/media/img/site/icons/udacity/principal_account.png",Group:"/media/img/site/icons/udacity/principal_group.png",ScopedRole:"/media/img/site/icons/udacity/principal_role.png"}).directive("principal",["permissions","cacheVersion","principalImageUrls",function(a,c,b){return{restrict:"A",templateUrl:"/templates/content_editor/permissions/principal.html?"+c,scope:{ref:"=principal"},
link:function(a,b){b.addClass("principal")},controller:["$scope",function(c){c.key=null;c.imageLink=null;c.name=null;c.details=null;var e={Account:function(a){!a.first_name&&!a.last_name&&!a.nickname?c.name=a.email.address:(c.name=a.first_name||a.last_name?a.first_name&&a.last_name?a.first_name+" "+a.last_name:a.first_name?a.first_name:a.last_name:a.nickname,a.email&&(c.details=a.email.address))},Group:function(a){c.name=a.name},ScopedRole:function(a){c.name=a.name;a.scopes&&(a=$.map(a.scopes,function(a,
b){return b+" = "+a}),a.sort(),c.details=a.join(", "))}},f=function(a,f){c.key=a?a.key:f;c.name=f;if(a){c.imageLink=a.image_url||b[a.kind]||b.unknown;var i=e[a.kind];i?(c.details=null,i(a)):c.details="unknown kind: "+a.kind}else c.details="not found",c.imageLink=b.unknown;c.rows=c.name&&c.details?2:1};c.$watch("ref",function(e){null===e||void 0===e?(c.key=null,c.imageLink=null,c.name=null,c.details=null):e.kind&&e.key?f(e):(e=a.normalizeRef(e),e!==c.key&&(c.imageLink=b.unknown,c.name=null,c.details=
"Loading...",a.getPrincipal(e).then(function(a){f(a,e)},function(a){c.key=e;c.imageLink=b.unknown;c.name=e;c.details="error "+a.status})))})}]}}]).service("principalTemplate",["$compile",function(a){return{link:a('<div data-principal="principal"></div>')}}]);angular.module("permissions").directive("principalInput",["permissions","principalTemplate","cacheVersion","$compile","$timeout",function(a,c,b,d,e){return{restrict:"A",templateUrl:"/templates/content_editor/permissions/principal_input.html?"+b,scope:{principalSelected:"=principalInput",kind:"@kind",tooltip:"@tooltip"},controller:["$scope","$element",function(a,b){a.active=!1;a.userInput=null;a.principalInputOverlay=b.find(".principal-input-overlay");a.autocompleteOptions={options:{html:!0,onlySelect:!0,
autoFocus:!0,appendTo:a.principalInputOverlay,position:{my:"left top",at:"left bottom+5",collision:"none"},source:function(b,c){a.fetchAutocomplete(b,c)}},events:{select:function(b,c){b.preventDefault();c.item.value&&(a.principalSelected(c.item.value),a.autocompleteOptions.methods.clean(),a.active=!1)},focus:function(a){a.preventDefault()}}};a.toggleActive=function(){a.active=!a.active}}],link:function(b,d){b.fetchAutocomplete=function(d,e){d.term?a.findPrincipals(d.term,null,10).then(function(d){d.principals.length?
(e($.map(d.principals,function(d){var d=a.autoScopeRole(d),e=b.$new(!0);e.principal=d;return{label:c.link(e,function(){}),value:d}})),b.principalInputOverlay.removeClass("hide-autocomplete-results")):(e([{groupLabel:"No matches"},{label:"placeholder",value:null}]),b.principalInputOverlay.addClass("hide-autocomplete-results"))},function(a){e([{groupLabel:"Error "+a.status},{label:"placeholder",value:null}]);b.principalInputOverlay.addClass("hide-autocomplete-results")}):e([])};d.on("blur",".principal-input-field",
function(){b.autocompleteOptions.methods.clean();b.$apply(function(){b.active=!1})});d.keydown(function(a){27===a.which&&b.$apply(function(){b.active=!1})});b.$watch("active",function(a,b){a!==b&&e(function(){d.find(".principal-input-field")[a?"focus":"blur"]()},0,!1)})}}}]);angular.module("staticPages").controller("affiliateLinking",["$scope","affiliates","dateTime",function(a,c,b){a.submitted=!1;a.postError=!1;a.isWorking=!1;a.submitId=function(d,e){a.isWorking=!0;a.errorMessage="";a.postError=!1;a.submitted=!1;var f={lms_id:a.affiliateID,last_modification_time:b.getCurrent()};c.putProfile(d,e,f).then(function(){a.submitted=!0;a.postError=!1;a.isWorking=!1},function(){a.postError=!0;a.isWorking=!1;a.errorMessage="We were not able to update your account at this time."})}}]);angular.module("staticPages").controller("androidExpectationQuizController",["$scope","$window","googleTagManager","nodes","products","Amplitude",function(a,c,b,d,e){a.knowCheckAnswerBank=[{key:"0",value:""},{key:"1",value:"boolean"},{key:"2",value:"class"},{key:"3",value:"default"},{key:"4",value:"package"},{key:"5",value:"interface"}];a.extendsAnswerB=a.knowCheckAnswerBank[2];a.extendsAnswerA=a.knowCheckAnswerBank[0];a.implementsAnswerA=a.knowCheckAnswerBank[0];a.implementsAnswerB=a.knowCheckAnswerBank[0];
a.currentQuestion=1;a.setCurrentQuestion=function(b){a.currentQuestion=b};a.yearsExperienceAnswerCorrect=function(){return 2<=a.yearsExperienceAnswer};a.hoursAnswerCorrect=function(){return 5<=a.hoursAnswer};a.knowCheckAnswered=function(){return!(0==a.extendsAnswerA.key||0==a.implementsAnswerA.key||0==a.implementsAnswerB.key)?!0:!1};a.knowCheckAnswerCorrect=function(){return 2==a.extendsAnswerA.key&&2==a.extendsAnswerB.key&&2==a.implementsAnswerA.key&&5==a.implementsAnswerB.key?!0:!1};a.getProductKey=
function(){return e.getLocalProductFromNode("nd801").then(function(b){a.productKey=b&&b.key?b.key:""},function(a){console.log(a.error)})};a.getProductKey();a.purchaseAndroidDevND=function(){b.pushTrackingEvent("nanodegreeEnrollment");c.location.href="/checkout#!/0?products="+c.encodeURIComponent(a.productKey)}}]);angular.module("staticPages").controller("dataAnalystExpectationQuizController",["$scope","$window","googleTagManager","nodes","ReadyQuiz","Amplitude","products",function(a,c,b,d,e,f,g){var h=function(a){this.key=a.key;this.title=a.title;this.description=a.description;this.options=a.options;this.response=a.response?a.response:"";this.solutions=a.solutions;this.button=a.button?a.button:{text:"Next"};this.feedback=a.feedback;this.showFeedback=!1;a.isCorrect?this.isCorrect=a.isCorrect:"";a.getFeedback?
this.getFeedback=a.getFeedback:""};h.prototype.isCorrect=function(){return _.contains(this.solutions,this.response.key)};h.prototype.getFeedback=function(){var a={type:"",text:"",shouldShowFeedback:function(){return!1}},a=this.response?this.feedback[this.response.feedback]:a;return{type:a.type,text:a.text,shouldShowFeedback:function(){return""!==this.response}}};a.quiz=new function(b){this.title=b.title;this.description=b.description;this.questions=_.map(b.questions,function(a){return new h(a)});
this.currentQuestion=this.questions[0];this.setCurrentQuestion=function(a){for(var b=0;b<a;b++)if(!this.questions[b].isCorrect())return;$("html, body").animate({scrollTop:$("ready-quiz").offset().top},500);this.currentQuestion=this.questions[a]};this.nextQuestion=function(){this.setCurrentQuestion(this.currentQuestion.key+1)};this.isCurrentQuestion=function(a){return this.currentQuestion===a};this.nextButtonAction=function(){this.currentQuestion===_.last(this.questions)?a.purchaseDAND():this.nextQuestion()}}({title:"Are you ready for the Data Analyst Nanodegree?",
description:"This Nanodegree is an amazing learning opportunity that will prepare you to be a Data Analyst, but it is also a rigorous program that requires some programming experience and strong study habits. Please answer these questions honestly to make sure you're ready.",blank:{key:"none",text:""},questions:[{key:0,title:"Programming Experience",description:"Do you have programming experience in Python?",options:[{key:0,text:"Yes, a lot",feedback:0},{key:1,text:"Yes, some",feedback:1},{key:2,
text:"No, but I have experience with another language",feedback:2},{key:3,text:"No, not really",feedback:3}],feedback:{"0":{text:"Great! Then you're already able to use concepts such as variable, functions, conditional statements, loops, and basic data structures like lists and dictionaries.",type:"alert-success"},1:{text:'Hmm... make sure you are able to use variables, functions, conditional statements, loops and basic data structures like lists and dictionaries. If you need to solidify these skills, check out our <a target=_"blank" href="/course/intro-to-computer-science--cs101">Intro to Computer Science</a> and <a target="_blank" href="/course/programming-foundations-with-python--ud036">Programming Foundations with Python</a> courses.',
type:"alert-warning"},2:{text:'Hmm... you\'ll need to use variables, functions, conditional statements, loops, and basic data structures like lists and dictionaries in Python for this Nanodegree program. With previous programming experience, you can try to pick up Python as you go - if you\'re up for the challenge, get started! Check out our <a target=_"blank" href="/course/intro-to-computer-science--cs101">Intro to Computer Science</a> and <a target="_blank" href="/course/programming-foundations-with-python--ud036">Programming Foundations with Python</a> courses for information on specific topics or work through them before you start for a more thorough preparation.',
type:"alert-warning"},3:{text:'To be successful in this Nanodegree program, you\'ll need to have some programming experience and be able to use variables, functions, conditional statements, loops and basic data structures like lists and dictionaries. Get started with our <a target=_"blank" href="/course/intro-to-computer-science--cs101">Intro to Computer Science</a> and <a target="_blank" href="/course/programming-foundations-with-python--ud036">Programming Foundations with Python</a> courses.',type:"alert-danger"}},
solutions:[0,1,2]},{key:1,title:"Statistics Experience",description:"Do you have experience using statistics?",options:[{key:0,text:"Yes, a lot",feedback:0},{key:1,text:"Yes, some",feedback:1},{key:2,text:"No, not really",feedback:2}],feedback:{"0":{text:"Great! There is a statistics project in the Nanodegree program that you should be able to complete pretty quickly.",type:"alert-success"},1:{text:"We've found that many students who enroll in this program have taken statistics in college or sometime prior to their enrollment, but often need review of key concepts in order to be successful.  With this in mind, the first course in this program  will help you review statistics, beginning with a special placement advisor which will tell you the specific lessons you need to work through. It\u2019s likely that after a quick refresher in those lessons you\u2019ll be able to complete the Statistics project and rock the rest of the Nanodegree program.",
type:"alert-warning"},2:{text:'The Data Analyst Nanodegree Program includes a course on Statistics. Its special placement advisor will tell you the specific lessons you need to complete. If you have no experience with statistics, you will need to work through most of this course and may have to put in extra effort to keep up with the rest of the program.  If you\u2019re up for the challenge, get started!  If you\u2019re not sure, you can take our <a target="_blank" href="/course/intro-to-inferential-statistics--ud201">Inferential</a> and <a target="_blank" href="https://www.udacity.com/course/intro-to-descriptive-statistics--ud827">Descriptive</a> Statistics courses and come back when you\u2019re ready.',
type:"alert-warning"}},solutions:[0,1,2]},{key:2,title:"Time Commitment",description:"How many hours per week can you commit to learning?",options:[{key:0,text:"0-4",feedback:0},{key:1,text:"5-9",feedback:1},{key:2,text:"10+",feedback:2}],feedback:{"0":{text:"It doesn\u2019t look like you have enough time for this Nanodegree right now. Students who spend approximately 10 hours per week working on the Nanodegree are significantly more likely to complete the program.",type:"alert-danger"},1:{text:"With this level of commitment you should be able to keep up with the program, but it will be challenging. Our data show that students who spend at least 10 hours per week are significantly more likely to complete the program.",
type:"alert-warning"},2:{text:"Great! Our data show that students who spend at least 10 hours per week working on the Nanodegree are significantly more likely to complete the program. See you in class!",type:"alert-success"}},solutions:[1,2],button:{text:"Continue to free trial"}}]});a.getProductKey=function(){return g.getLocalProductFromNode("nd002").then(function(b){a.productKey=b&&b.key?b.key:""},function(a){console.log(a.error)})};a.getProductKey();a.purchaseDAND=function(){b.pushTrackingEvent("nanodegreeEnrollment");
c.location.href="/checkout#!/0?products="+c.encodeURIComponent(a.productKey)}}]);angular.module("staticPages").controller("arabicNotifyController",["$scope","$window","users","currentUser","validator",function(a,c,b,d,e){a.formSubmitted=!1;a.error=!1;d.userIsLoggedIn&&(a.email=d.getEmail());a.submit=function(){e.check({Email:{pretty:"your email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]}}).valid?b.addToEmailList("noname",a.email,"google-egypt-notify",!1).then(function(){a.formSubmitted=!0},function(){a.error=!0}):a.error=!0}}]);angular.module("staticPages").controller("emailListAdder",["$scope","validator","users","cookieJar","currentUser","universalAnalytics",function(a,c,b,d,e,f){a.submitted=!1;a.errorList={};a.postError=!1;a.isWorking=!1;a._setCookie=function(a,b){var c=new Date;c.setUTCFullYear(c.getUTCFullYear()+1);d.set("emailAddressForSignUp",a,{expires:c});d.set(b+"-signed-up",!0,{expires:c})};a.name=e.get("first_name");a.email=e.getEmail();a.submitEmailAddress=function(d){a.isWorking=!0;a.errorList={};a.postError=
!1;a.submitted=!1;var e=c.check({name:{pretty:"your name",value:a.name,validators:[{type:"required"}]},email:{pretty:"your email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]}});e.valid?b.addToEmailList(a.name,a.email,d).then(function(){f.trackEvent({category:"EmailList",action:"SignUp",label:d});a.submitted=!0;a.postError=!1;a.isWorking=!1;a._setCookie(a.email,d)},function(){a.postError=!0;a.isWorking=!1}):(a.isWorking=!1,a.errorList=e.errorText)}}]);angular.module("staticPages").controller("employersPage",["$scope","validator","employers",function(a,c,b){a.submitted=!1;a.errorList=null;a.postError=!1;a.isWorking=!1;a.submit=function(){a.isWorking=!0;a.errorList=null;a.postError=!1;a.submitted=!1;var d=c.check({fullName:{pretty:"your full name",value:a.fullName,validators:[{type:"required"}]},companyName:{pretty:"your company name",value:a.companyName,validators:[{type:"required"}]},email:{pretty:"your email address",value:a.email,validators:[{type:"required",
chained:[{type:"email"}]}]},tos:{pretty:"terms of service",value:a.tos,validators:[{type:"required"}]}});d.valid?b.put({model:"Employer",company_name:a.companyName,person_name:a.fullName,email_address:a.email},{}).then(function(){a.submitted=!0;a.postError=!1;a.isWorking=!1},function(){a.postError=!0;a.isWorking=!1}):(a.isWorking=!1,a.errorList=d.errorText)}}]);angular.module("staticPages").controller("fiftyBackController",["$scope","$window","users","currentUser","publicCatalog",function(a,c,b,d,e){var f=(new Date(Date.UTC(2015,4,6))).toISOString();a.loading=!0;a.formSubmitted=!1;a.formError=!1;a.formErrorMsg='The form failed to submit. Please try again. If it still fails, please contact <a href="mailto:support@udacity.com">support@udacity.com</a>.';a.formSubmissionInProgress=!1;a.nanodegrees=[];a.selectedNanodegree=null;a.graduated="";a.employerPaying=
"";a.user={isLoggedIn:d.userIsLoggedIn(),email:d.getEmail(),accountKey:d.getUser().key,certs:[]};var g=function(b){a.loading=!1;a.formError=!0;a.formErrorMsg=b;a.formSubmissionInProgress=!1},h=function(a){return a.creation_time>=f};e.fetchDegrees().then(function(c){a.nanodegrees=c;b.getCertificates(a.user.accountKey).then(function(b){a.user.certs=b;var c=_.filter(b,h),c=_.sortBy(c,function(a){return new Date(a.creation_time)}).reverse();c.length&&(a.selectedNanodegree=_.find(a.nanodegrees,function(a){return a.key===
c[0].node_ref.key}));a.loading=!1},function(){g('The form failed to submit. Please try again. If it still fails, please contact <a href="mailto:support@udacity.com">support@udacity.com</a>.')})},function(){g('The form failed to submit. Please try again. If it still fails, please contact <a href="mailto:support@udacity.com">support@udacity.com</a>.')});var i=function(b){return _.find(a.user.certs,function(a){return a.node_ref.key===b})};a.isSelectedNdEligible=function(){var b=i(a.selectedNanodegree.key);
return void 0!==b&&h(b)};a.checkSelectedNdEligible=function(){var b=i(a.selectedNanodegree.key);if(void 0===b)return g('Our records show that you have not completed this Nanodegree program. Please check your selected answers and try again. If you have completed your graduation process and believe this is an error, contact <a href="mailto:support@udacity.com">support@udacity.com</a>.'),!1;if(!h(b))return g('Our records show that you graduated from this program before May 6, 2015. Unfortunately, you are not eligible for this offer. <br>If you believe you are receiving this message in error, please contact <a href="mailto:support@udacity.com">support@udacity.com</a>.'),
!1;a.formError=!1;return!0};a.submit=function(){a.formSubmissionInProgress=!0;a.checkSelectedNdEligible()&&b.requestFiftyBack(a.user.accountKey,a.selectedNanodegree.key).then(function(){a.formSubmitted=!0;a.formError=!1;a.formSubmissionInProgress=!1},function(){g('The form failed to submit. Please try again. If it still fails, please contact <a href="mailto:support@udacity.com">support@udacity.com</a>.')})}}]);angular.module("staticPages").controller("homepageBannerText",["$scope","$timeout",function(){var a=new TimelineMax({repeat:-1});$(".sliding-text div").each(function(c,b){a.fromTo(b,0.7,{x:-100},{x:0,opacity:1,ease:Back.easeOut}).to(b,0.5,{opacity:0},"+=1.5")})}]).controller("ndBlockController",["$scope","ndTiles",function(a,c){a.loading=!0;c.getInfo().then(function(b){a.loading=!1;a.nanodegrees=b})}]);angular.module("staticPages").controller("homepageEmail",["$scope","cookieJar",function(a,c){a.hide=function(){a.hidePopUp=!0};c.exists("homepage-email-capture-signed-up")&&(a.hidePopUp=!0)}]);angular.module("staticPages").controller("intersectController",["$scope","users","publicCatalog",function(a,c,b){a.formSubmitted=!1;a.formPostError=!1;a.formSubmissionInProgress=!1;a.countries="Afghanistan;Aland Islands;Albania;Algeria;American Samoa;Andorra;Angola;Anguilla;Antarctica;Antigua And Barbuda;Argentina;Armenia;Aruba;Australia;Austria;Azerbaijan;Bahamas;Bahrain;Bangladesh;Barbados;Belarus;Belgium;Belize;Benin;Bermuda;Bhutan;Bolivia, Plurinational State of;Bonaire, Sint Eustatius and Saba;Bosnia and Herzegovina;Botswana;Bouvet Island;Brazil;British Indian Ocean Territory;Brunei Darussalam;Bulgaria;Burkina Faso;Burundi;Cambodia;Cameroon;Canada;Cape Verde;Cayman Islands;Central African Republic;Chad;Chile;China;Christmas Island;Cocos (Keeling) Islands;Colombia;Comoros;Congo;Congo, the Democratic Republic of the;Cook Islands;Costa Rica;Cote d'Ivoire;Croatia;Cuba;Cyprus;Czech Republic;Denmark;Djibouti;Dominica;Dominican Republic;Ecuador;Egypt;El Salvador;Equatorial Guinea;Eritrea;Estonia;Ethiopia;Falkland Islands (Malvinas);Faroe Islands;Fiji;Finland;France;French Guiana;French Polynesia;French Southern Territories;Gabon;Gambia;Georgia;Germany;Ghana;Gibraltar;Greece;Greenland;Grenada;Guadeloupe;Guam;Guatemala;Guernsey;Guinea;Guinea-Bissau;Guyana;Haiti;Heard Island and McDonald Islands;Holy See (Vatican City State);Honduras;Hong Kong;Hungary;Iceland;India;Indonesia;Iran, Islamic Republic of;Iraq;Ireland;Isle of Man;Israel;Italy;Jamaica;Japan;Jersey;Jordan;Kazakhstan;Kenya;Kiribati;Korea, Democratic People's Republic of;Korea, Republic of;Kuwait;Kyrgyzstan;Lao People's Democratic Republic;Latvia;Lebanon;Lesotho;Liberia;Libya;Liechtenstein;Lithuania;Luxembourg;Macao;Macedonia, The Former Yugoslav Republic Of;Madagascar;Malawi;Malaysia;Maldives;Mali;Malta;Marshall Islands;Martinique;Mauritania;Mauritius;Mayotte;Mexico;Micronesia, Federated States of;Moldova, Republic of;Monaco;Mongolia;Montenegro;Montserrat;Morocco;Mozambique;Myanmar;Namibia;Nauru;Nepal;Netherlands;New Caledonia;New Zealand;Nicaragua;Niger;Nigeria;Niue;Norfolk Island;Northern Mariana Islands;Norway;Oman;Pakistan;Palau;Palestinian Territory, Occupied;Panama;Papua New Guinea;Paraguay;Peru;Philippines;Pitcairn;Poland;Portugal;Puerto Rico;Qatar;Reunion;Romania;Russian Federation;Rwanda;Saint Barthelemy;Saint Helena, Ascension and Tristan da Cunha;Saint Kitts and Nevis;Saint Lucia;Saint Martin (French Part);Saint Pierre and Miquelon;Saint Vincent and the Grenadines;Samoa;San Marino;Sao Tome and Principe;Saudi Arabia;Senegal;Serbia;Seychelles;Sierra Leone;Singapore;Sint Maarten (Dutch Part);Slovakia;Slovenia;Solomon Islands;Somalia;South Africa;South Georgia and the South Sandwich Islands;South Sudan;Spain;Sri Lanka;Sudan;Suriname;Svalbard and Jan Mayen;Swaziland;Sweden;Switzerland;Syrian Arab Republic;Taiwan, Province of China;Tajikistan;Tanzania, United Republic of;Thailand;Timor-Leste;Togo;Tokelau;Tonga;Trinidad and Tobago;Tunisia;Turkey;Turkmenistan;Turks and Caicos Islands;Tuvalu;Uganda;Ukraine;United Arab Emirates;United Kingdom;United States;United States Minor Outlying Islands;Uruguay;Uzbekistan;Vanuatu;Venezuela, Bolivarian Republic of;Viet Nam;Virgin Islands, British;Virgin Islands, U.S.;Wallis and Futuna;Western Sahara;Yemen;Zambia;Zimbabwe".split(";");
a.nanodegrees=[];b.fetchDegrees().then(function(b){a.nanodegrees=b});a.enrollmentStatuses=["Currently enrolled","Graduated"];var d=function(){a.formSubmitted=!0;a.formPostError=!1;a.formSubmissionInProgress=!1},e=function(){a.formPostError=!0;a.formSubmissionInProgress=!1};a.submit=function(){a.formSubmissionInProgress=!0;c.addToEmailList(a.firstName+" "+a.lastName,a.email,"intersect2016",{country:a.selectedCountry,enrollmentStatus:a.enrollmentStatus,nanodegree:a.nanodegreeEnrolledIn.key}).then(d,
e)}}]);angular.module("staticPages").controller("jobListings",["$scope","requisitions",function(a,c){c.list().then(function(b){a.locations=_.groupBy(b,function(a){return a.categories.location});a.locations=_.map(a.locations,function(a,b){var c={left:[],right:[]};_.each(_.sortBy(_.map(_.groupBy(a,function(a){return a.categories.team}),function(a,b){return{name:b,positions:a}}),function(a){return-1*a.positions.length}),function(a,b){0===b%2?c.left.push(a):c.right.push(a)});return{name:b,columns:c}})})}]);angular.module("staticPages").controller("jobsImageGallery",["$scope","modal",function(a,c){a.images=[{url:"//lh5.ggpht.com/L5p-cd1uvO2wmtQR02usaGt3Z8JdggqKMoUymo4rAQCgNawOLOXHNi8-10181FIXzFXfiCeQO0QU4-r3pQ=s200#w=1200&h=750",alt:"a surprise birthday filled with balloons"},{url:"//lh5.ggpht.com/PUM7Chd29p1rbljUOA0bfW-Qm_LNHN6Py8MrnubulanrIGnqKKIXyvMn67LXcAuX2wMx8j4by-h-x7zVTu2d=s200#w=1200&h=750",alt:"the company aboard sebastian's boat"},{url:"//lh3.ggpht.com/Q87vvX0Ia-SsU2_Olgsiv1X3avrXO4aRvP5DV5JAHCIqGiGaGUGU2B6bY7nt7vNc-QdJQCj_INJ8yUNYFCU=s200#w=1200&h=750",
alt:"employees excitedly playing foosball"},{url:"//lh3.ggpht.com/qaqGh_Z6UfjvGE2Qh1_enoCJybv2tuZBgaJUpVesenyjYPHQUrGgymNAzBwdZe1-zD1T-T9gHl780iGlDus=s200#w=1200&h=750",alt:"employees at an offsite, smiling at the camera"},{url:"//lh3.ggpht.com/aUB0SqBzVXv2a_6VMGYHWwjojGSrEqOpcpdvpiFseTMUWqpmP23L3nmLjjp-0xS0gcCVu9raResm_KMwKfjW=s200#w=1200&h=750",alt:"employees relaxing by the poolside"},{url:"//lh3.ggpht.com/ZBgL1MP6R6M4dPdmSboemGgM9Re5z27vRBdiFNi334j8jGyZIFxdTAxHwxqdorWlUniib6p7qyPO-yOT3Q=s200#w=1200&h=750",
alt:"employees discussing pedagogy"}];a.showFullImage=function(a){c.activate("galleryImage",a)}}]);angular.module("staticPages").controller("nanodegreePageController",["$scope","modal","$timeout","ndTiles",function(a,c,b,d){b(function(){a.playVideo=function(b,d){d||(d=b);var g=function(){a.$parent.$broadcast("pauseVideo",b)};c.activate(d).then(g,g);a.$parent.$broadcast("playVideo",b)}});a.loading=!0;d.getInfo().then(function(b){a.loading=!1;a.nanodegrees=b});a.mainPageSocial={twitter:{text:"Get a job I love with a credential that fits into my life? Yes. Udacity Nanodegree programs, built by industry.",
url:"https://www.udacity.com/nanodegree"},facebook:{name:"Introducing Udacity Nanodegree Credentials",link:"https://www.udacity.com/nanodegree",caption:"Industry credentials for today's jobs in tech",description:"Stand out with tech skills that matter. Learn from the very best in industry. Study smart without leaving your current job."},gplus:{link:"https://www.udacity.com/nanodegree"}}}]);angular.module("staticPages").factory("ndTiles",["nodes",function(a){var c="nd000 nd001 nd002 nd003 nd004 nd006 nd007 nd801 nd009 nd802 nd011 nd010".split(" ");return{getInfo:function(){return a.batchGet(c,{depth:0,fresh:!0,projection:"catalog"}).then(function(a){_.map(a,function(a){return a.title?(name=a.title.replace(" Nanodegree",""),_.extend(a,{name:name})):a});return a})}}}]);angular.module("staticPages").controller("organizationPage",["$scope","validator","users",function(a,c,b){a.submitted=!1;a.errorList=null;a.postError=!1;a.isWorking=!1;a.showNoteField=!1;a.businessPartners=[{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/google_svg.svg",text:"Training developers globally, including Google employees, in Android, web, and cloud development techniques and best practices.",alt:"Google"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/att_svg.svg",
text:"Providing their employees with the tools to stay up to date in the latest technologies.",alt:"AT&T"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/ge_svg.svg",text:"Preparing emerging leaders with critical skills in areas like mobile, cloud and big data.",alt:"GE"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/capitalone_svg.svg",text:"Investing in existing employees to open up new technology career paths.",alt:"Capital One"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/accenture_svg.svg",
text:"Broadening the talent pipeline by pretraining candidates, including veterans.",alt:"Accenture"}];a.trainingGoals=[{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/industry.svg",text:"Developed and taught by experts from <br> Google, Facebook, and others.",title:"Industry created curriculum"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/nd_formula_2.svg",text:"Students develop skills by coding <br> and building a portfolio of demonstrable work.",title:"Project-based"},
{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/nd_formula_3.svg",text:"Coaches review code, answer questions, <br> and offer support along with peers in online forums.",title:"Coaching + peer support"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/nd_formula_1.svg",text:"10 hours/week. Any time. <br> Any location. Any device.",title:"Online & flexible"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/certificate.svg",text:"Dashboards let you monitor employee <br> progress and results.",
title:"Tracking & reporting"},{source:"//s3.amazonaws.com/content.udacity-data.com/site-svgs/section6.svg",text:"Students earn meaningful certifications <br> validated by rigorous coach evaluations.",title:"Verified certifications"}];a.toggleNote=function(){a.showNoteField=!a.showNoteField};a.businessDirection="left";a.goalsDirection="left";a.currentIndex=0;a.currentGoalsIndex=0;a.isCurrentSlideIndex=function(a,b){return b===a};a.prevSlide=function(a,b,c){b=b<a-1?++b:0;d("left",b,c)};a.nextSlide=
function(a,b,c){b=0<b?--b:a-1;d("right",b,c)};var d=function(b,c,d){switch(d){case "training":a.currentIndex=c;a.businessDirection=b;break;case "goals":a.currentGoalsIndex=c;a.goalsDirection=b;break;default:a.currentGoalsIndex=c,a.goalsDirection=b,a.currentIndex=c,a.businessDirection=b}};a.submit=function(){a.isWorking=!0;a.errorList=null;a.postError=!1;a.submitted=!1;var d;d=c.check({firstName:{pretty:"your first name",value:a.firstName,validators:[{type:"required"}]},lastName:{pretty:"your last name",
value:a.lastName,validators:[{type:"required"}]},companyName:{pretty:"your company name",value:a.companyName,validators:[{type:"required"}]},email:{pretty:"your email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]}});d.valid?(d={company_name:a.companyName,job_title:a.jobTitle,note:a.note},b.addToEmailList(a.firstName+" "+a.lastName,a.email,"enterprise-contacts",d).then(function(){a.submitted=!0;a.postError=!1;a.isWorking=!1},function(){a.postError=!0;a.isWorking=!1})):
(a.isWorking=!1,a.errorList=d.errorText)}}]).animation(".slide-animation",function(){return{beforeAddClass:function(a,c,b){var d=a.scope(),e="";d.business?e=d.$parent.businessDirection:d.item&&(e=d.$parent.goalsDirection);"ng-hide"==c?(c=a.parent().width(),"right"!==e&&(c=-c),TweenMax.to(a,0.5,{left:c,onComplete:b})):b()},removeClass:function(a,c,b){var d=a.scope();"ng-hide"==c?(a.removeClass("ng-hide"),c="",d.business?c=d.$parent.businessDirection:d.item&&(c=d.$parent.goalsDirection),d=a.parent().width(),
"right"===c&&(d=-d),TweenMax.fromTo(a,0.5,{left:d},{left:0,onComplete:b})):b()}}});angular.module("staticPages").controller("proctoredExamPage",["$scope","exams","$window",function(a,c,b){a.passedPasswordCheck=!1;a.isFetching=!1;a.convertTime=function(a){if(!a||"number"!==typeof a)return"No time has been set";var b=Math.floor(a/60),c=Math.floor(a/3600),g=Math.floor(a%3600/60),h=Math.floor(a%60),i=[];1===c&&(i+=c+" hour ");1<c&&(i+=c+" hours ");1===g&&(i+=g+" minute ");1<g&&(i+=g+" minutes ");1===h&&(i+=h+" second ");1<h&&(i+=h+" seconds ");return i=1===b?i+"(1 minute)":i+("("+Math.floor(a/
60)+" minutes)")};a.fetchExamDetails=function(b){a.isFetching=!0;a.processingResult="";c.get(b).then(function(b){a.isFetching=!1;null===b.exam_bank?(a.processingResult="Please check the password and try again.",a.examPassword=null):(a.passedPasswordCheck=!0,a.exam={timeLimit:a.convertTime(b.exam_variant.time_allotted),instructions:b.exam_bank.instructions,name:b.exam_bank.title})},function(){a.isFetching=!1;a.processingResult="Please check the password and try again."})};a.reset=function(){a.processingResult=
"";a.examPassword=null;a.passedPasswordCheck=!1};a.beginExam=function(d){a.isFetching=!0;a.processingResult="";c.startExamTimer(d).then(function(c){a._url="/course/exam#!/c-"+c.course_key+"/l-"+c.exam_node_keys;b.location.href=a._url},function(b){a.isFetching=!1;a.processingResult=403===b.status?'You are not permitted to take the exam "'+a.exam.name+'". Please check the exam title is correct for your course. If it is not, ask the proctor to check the password entered for the exam. If it is, please contact proctoredexams@udacity.com immediately.':
500===b.status&&b.data.error.match(/has already taken/)?"It looks like you've already taken this exam. Please contact proctoredexams@udacity.com immediately.":"There was an error. Please try again. If the problem persists, please contact proctoredexams@udacity.com immediately."})}}]);angular.module("staticPages").controller("projectNameLoader",["$scope","nodes",function(a,c){a.fetchProjects=function(b){return c.batchGet(b).then(function(c){a.projects=_.without(_.map(b,function(a){return c&&c[a]?{courseLink:"/course/"+encodeURIComponent(a),courseTitle:c[a].title,projectTitle:c[a].catalog_entry&&c[a].catalog_entry.paid_class?c[a].catalog_entry.paid_class.project_name:null}:null}),null);return a.projects})};a.fetchProjects(["cs101","ud359","ud032"])}]);angular.module("staticPages").service("ReadyQuiz",function(){}).directive("readyQuiz",["cacheVersion",function(a){return{restrict:"E",scope:{quiz:"="},transclude:!0,templateUrl:"/templates/ready_quiz/ready_quiz.html?"+a}}]).directive("questionTitle",["cacheVersion",function(a){return{restrict:"E",scope:{title:"="},templateUrl:"/templates/ready_quiz/question_title.html?"+a}}]).directive("questionDescription",["cacheVersion",function(a){return{restrict:"E",scope:{description:"="},templateUrl:"/templates/ready_quiz/question_description.html?"+
a}}]).directive("quizQuestionContext",["cacheVersion",function(a){return{restrict:"E",transclude:!0,scope:{question:"="},templateUrl:"/templates/ready_quiz/quiz_question_context.html?"+a}}]).directive("quizQuestionCustom",["cacheVersion",function(a){return{restrict:"E",transclude:!0,scope:{question:"="},templateUrl:"/templates/ready_quiz/quiz_question_custom.html?"+a}}]).directive("questionOptionsSelect",["cacheVersion",function(a){return{restrict:"E",scope:{question:"="},templateUrl:"/templates/ready_quiz/question_options_select.html?"+
a}}]).directive("quizQuestionSelect",["cacheVersion",function(a){return{restrict:"E",scope:{quiz:"=",question:"="},templateUrl:"/templates/ready_quiz/quiz_question_select.html?"+a}}]);angular.module("staticPages").controller("successStory",["$scope",function(a){a.currentStory=0;a.isCurrentStory=function(c){return a.currentStory===c};a.stories=[{quote:"There is nothing else like it. It\u2019s so valuable to have a well-planned track, to know what the next step is. And at the end, you have valuable skills you can use.",name:"Cynthia O\u2019Donnell"},{quote:"What\u2019s amazing is how few women are developers. I think this is the perfect career \u2014 as a former stay-at-home mom, I feel like after a few years of experience, I can work this into something I can manage from home.",
name:"Ayesha Llyas"},{quote:"Udacity understands what it means to make web-native online courses. In the same way that YouTube has made it easier and more enjoyable to share media, Udacity has done the same way with teaching.",name:"Julian Ozen"},{quote:"I recently began an internship as a software engineer. Considering that I only started programming 15 months ago, I think I\u2019m incredibly lucky to be where I am today. I still have a lot more to learn, but I\u2019m so happy that I could share my experience and help inspire future students.",
name:"Dawoon Choi"},{quote:"Slowly I started understanding and now I feel that because of Udacity, I\u2019ve become a programmer. Overall, I\u2019m very happy.",name:"Rohit Gupta"},{quote:"I found Udacity projects to be very interesting and helpful in documenting and expanding my programming skills and knowledge. I was able to work at my own pace and finish the program in less than three months.",name:"Daniel Salmonsen"},{quote:"Learning was fun and easy\u2014so many good examples and real applications. Everything I learned is 100% worth it, and I just want to keep learning more and more!",
name:" Rafael Castillo"},{quote:"I am feeling way more confident about being able to absorb the changes in my job because of the work I have done in the Nanodegree program.",name:"Renee Judd"}];a.nextStory=function(){a.currentStory=a.currentStory==a.stories.length-1?0:++a.currentStory};a.prevStory=function(){a.currentStory=0==a.currentStory?a.stories.length-1:--a.currentStory}}]).directive("gradStory",function(){return{restrict:"E",scope:{story:"=story"},template:'<div class="col-xs-6" style="height: 140px;"><div><p> {{story.quote}} </p><div class="row row-gap-small"> <div class="col-xs-12 text-center"><strong>{{story.name}}</strong></div></div></div></div>'}});angular.module("staticPages").controller("appCtrl",["$scope",function(a){a.toggle=!0}]).animation(".text-swap-animation",function(){var a;return{enter:function(c,b){c.css("opacity",0);a=jQuery(c).height();c.css("height",0);jQuery(c).animate({opacity:1,height:a},b)},leave:function(c,b){c.css("opacity",1);c.css("height",a);jQuery(c).animate({opacity:0,height:0},b)},move:function(a,b){jQuery(a).css({opacity:0.5});jQuery(a).animate({opacity:1},b)}}});angular.module("staticPages").controller("veteransPageController",["$scope","$filter","$window","currentUser","users","validator",function(a,c,b,d,e,f){a.submitted=!1;a.errorList=[];a.postError=!1;a.isWorking=!1;a.email=d.getEmail();a.submit=function(){a.isWorking=!0;a.errorList=null;a.postError=!1;a.submitted=!1;var b;b=f.check({"First Name":{pretty:"your first name",value:a.firstName,validators:[{type:"required"}]},"Last Name":{pretty:"your last name",value:a.lastName,validators:[{type:"required"}]},
Email:{pretty:"your email address",value:a.email,validators:[{type:"required",chained:[{type:"email"}]}]}});if(b.valid){var c=a.firstName+" "+a.lastName;b={name:c,branch:a.branch,is_vet_or_active:a.isMilitary?"true":"false"};e.addToEmailList(c,a.email,"veteran-interest",b).then(function(){a.submitted=!0;a.postError=!1},function(){a.postError=!0})["finally"](function(){a.isWorking=!1})}else a.isWorking=!1,a.errorList=b.errorText}}]);angular.module("tasks").factory("task",["$q",function(a){return{make:function(c){var b=a.defer(),d=a.defer(),e=a.when(!0),f={running:!1,ready:!0,done:!1,canceled:!1,start:function(){if(!f.ready||f.done)return!1;f.running=!0;a.when(c(f))["finally"](function(){f.done=!0;f.running=!1}).then(function(a){b.resolve(a)},function(a){b.reject(a)},function(a){b.notify(a)});return f},then:b.promise.then,"finally":b.promise["finally"],notify:function(a){b.promise.then(void 0,void 0,a)},after:function(b){if(f.running)return a.reject(a.when("Task already running!"));
f.ready=!1;var c=e.then(function(){return b},function(){return a.reject(b)})["finally"](function(){e===c&&(f.ready=!0,d.notify(!0))});e=c;return f},readyNotification:function(a){return d.promise.then(void 0,void 0,a)},name:function(a){f.name=a;return f},resetName:function(a){f.name=a;return f},cancel:function(){f.canceled=!0}};angular.extend(f,b.promise);return f}}}]);angular.module("tasks").directive("taskProgress",[function(){return{restrict:"A",template:'<button class="btn btn-mini btn-danger" data-ng-click="cancel()"><span class="glyphicon glyphicon-remove"></span></button>{{task.name}}<progress value="{{loaded}}" max="{{total}}"> Progressing</progress>',scope:{task:"="},link:function(a){a.task.notify(function(c){a.loaded=c.loaded;a.total=c.total});a.cancel=function(){a.task.cancel()}}}}]);angular.module("tasks").factory("queue",["$q","$timeout","task",function(a,c,b){var d,a=function(a,b){return d(a,b)};a.LOW_PRIORITY=1;a.MEDIUM_PRIORITY=5;a.HIGH_PRIORITY=10;a.DEFAULT_PRIORITY=5;a.make=function(a,d){var g={maxConcurrent:d||10,running:[],pending:[],newTask:function(a,c){var d=b.make(a);d.priority=c||g.DEFAULT_PRIORITY;return g.enqueueTask(d)},newUniqueTask:function(a,c,d){var e=_.findWhere(g.running,{key:c})||_.findWhere(g.pending,{key:c});if(e)return e;a=b.make(a);a.priority=d||g.DEFAULT_PRIORITY;
a.key=c;return g.enqueueTask(a)},getUniqueTask:function(a){return _.findWhere(g.running,{key:a})||_.findWhere(g.pending,{key:a})},enqueueTask:function(a){a.priority=a.priority||g.DEFAULT_PRIORITY;g.pending.splice(_.sortedIndex(g.pending,a,"priority"),0,a);c(g.run);return a},run:function(){g.running=_.reject(g.running,function(a){return a.done});for(var a=g.running.length,b,d=0;d<g.maxConcurrent-a;d++){b=null;for(var e=g.pending.length-1;0<=e;e--)if(g.pending[e].ready){b=g.pending[e];break}else void 0!==
g.pending[e]&&g.pending[e].readyNotification(g.run);if(null!==b)g.pending=_.without(g.pending,b),b["finally"](g.run),g.running.push(b),c(b.start);else break}}};return g};d=a.make;return a}]);angular.module("user").factory("currentUser",["$log","$q","$rootScope","users","basicUser","nodes","nodeUtility","userUtility","cohortsGateway","universalAnalytics","publicCatalog","$http","applicationEnvironment",function(a,c,b,d,e,f,g,h,i,j,l,k,m){var n=angular.copy(e),p=null,q=null,r={get:function(a){return n[a]},getUser:function(){return n},getFullName:function(){return h.getFullName(n)},fetchIsStaff:function(){return r.fetchFullUser().then(function(a){if(a._memberships)return 0<_.filter(a._memberships,
function(a){return-1<a.group_ref.key.indexOf("staff")}).length})},getEnrolledCourses:function(a){a=a||["enrolled","paused"];return _.chain(r.get("_enrollments")).filter(function(b){return b&&_.contains(a,b.state)}).pluck("node_key").value()},getEnrolledCourseKeys:function(a){a=a||["enrolled","paused"];return _.filter(r.getEnrolledCourses(a),function(a){return 0!==a.indexOf("nd")})},getEnrolledNanodegreeKeys:function(a){a=a||["enrolled","paused"];return _.filter(r.getEnrolledCourses(a),function(a){return 0===
a.indexOf("nd")})},getEnrolledCareerKeys:function(a){a=a||["enrolled","paused"];return _.filter(r.getEnrolledCourses(a),function(a){return 0===a.indexOf("ca")})},getEnrolledProductVariantFor:function(a){var b=r.getUser()._enrollments.filter(function(b){return b.node_key===a});return 0<b.length?b[0].product_variant:null},fetchGraduatedNanodegreeKeys:function(){return r.fetchCertificates().then(function(a){return _.chain(a).map(function(a){return a.node_ref.key}).filter(function(a){return 0===a.indexOf("nd")}).value()})},
fetchGraduatedCourseKeys:function(){return r.fetchCertificates().then(function(a){return _.map(a,function(a){return a.node_ref.key})})},fetchGraduatedCareerKeys:function(){return r.fetchCertificates().then(function(a){return _.chain(a).map(function(a){return a.node_ref.key}).filter(function(a){return 0===a.indexOf("ca")}).value()})},fetchEnrolledAndGraduatedCourseKeys:function(a){return r.fetchFullUser().then(function(){return r.fetchGraduatedCourseKeys()}).then(function(b){return _.union(r.getEnrolledCourses(a),
b)})},fetchInferredCreatedAt:function(){return r.fetchFullUser().then(function(a){var b,a=_.chain(a._memberships).pluck("creation_time").compact().map(function(a){return new Date(a)}).value();a.length&&(b=_.min(a).toISOString());return b})},fetchEnrolledAndGraduatedNanodegreeKeys:function(){return r.fetchGraduatedNanodegreeKeys().then(function(a){return _.union(r.getEnrolledNanodegreeKeys(),a)})},fetchEnrolledAndGraduatedCareerKeys:function(){return r.fetchGraduatedCareerKeys().then(function(a){return _.union(r.getEnrolledCareerKeys(),
a)})},getGroupKeys:function(){return _.chain(r.get("_memberships")).filter(function(a){return a.group_ref&&"Group"===a.group_ref.ref}).map(function(a){return a.group_ref.key}).value()},fetchActiveExperiments:function(a){return d.fetchActiveExperiments("me",a)},getEmail:function(){return h.getEmail(n)},setUser:function(a){angular.copy(angular.copy(a),n)},fetchFullUser:function(a){var b=a?{cacheBust:Math.random()}:{};if(a)return d.get("me",b).then(function(a){r.setUser(a);return a});p||(p=d.get("me",
b).then(function(a){r.setUser(a);return a}));return p},fetchCertificates:function(){return n._certificates?c.when(n._certificates):d.getCertificates("me").then(function(a){return n._certificates=a})},checkNewHomeBanner:function(){return d.checkNewHomeBanner("me")},setNewHomeBanner:function(){return d.setNewHomeBanner("me")},setFinalStepsEmailSent:function(a){return d.setFinalStepsEmailSent("me",a)},sendFinalStepsEmail:function(a,b){return d.sendFinalStepsEmail("me",a,b)},setFiftyBackBannerFlag:function(a){return d.setFiftyBackBannerFlag("me",
a)},checkReviewForNd:function(a,b){var c=m.isLocal()?"http://dockerhost:9000/api/v1":"https://rocky-basin-6876.herokuapp.com/api/v1";return k({url:c+"/reviews",type:"GET",params:{userKey:a,nodeKey:b}}).then(function(a){return a.data&&a.data._id}).catch(function(a){console.error(a)})},fetchCohorts:function(){q||(q=r.fetchFullUser().then(function(a){return c.all(_.map(a._cohort_keys,function(a){return i.get(a)}))},function(b){a.error(b)}));return q},userIsLoggedIn:function(){return n._registered},isEnrolledIn:function(a){return _.some(n._enrollments,
function(b){return b.node_key===a&&"enrolled"===b.state})},isEnrolledForCreditIn:function(a){var b=["151101088","150207572","151148782","151059885","151254701"];return void 0!==_.find(n._enrollments,function(c){var d=_.pluck(c.group_refs,"key");return c.node_key===a&&"enrolled"===c.state&&0<_.intersection(d,b).length})},isCourseEmailSubscribed:function(a){return 0<_.filter(n._enrollments,function(b){return b.node_key===a&&b.email_ok}).length},enroll:function(a,c,e){c=c||"enrolled";return d.setEnrollments("me",
[a],c).then(function(a){n._enrollments=n._enrollments||[];_.each(a,function(a){var b=_.find(n._enrollments,function(b){return b.node_key===a.node_key});b?n._enrollments[_.indexOf(n._enrollments,b)]=a:n._enrollments.push(a)});if(1===a.length){b.$broadcast("modifiedEnrollment",a);var d=c.slice(0,1).toUpperCase()+c.slice(1,-2),d=j.trackEvent({category:"Enrollment",action:d,label:a[0].node_key});return e?d.then(function(){return a},function(){console.warn("Failed to push enrollment to Universal Analytics");
return a}):a}return a})},changeEnrollmentSettings:function(a,b){return d.changeEnrollmentSettings(a,"me",b)},getEnrollmentsWithState:function(a){return _.filter(n._enrollments,function(b){return b.state===a})},getTags:function(){return d.getTags("/users/me/tags")},setTag:function(a,b){var e=r.get("tags"),a=a.toLowerCase(),b=b.toLowerCase();if(_.findWhere(e,{namespace:a,tag:b}))return c.when(e);var f=e.concat([{namespace:a,tag:b}]);n.tags=f;return d.put({key:r.get("key"),tags:f}).catch(function(a){n.tags=
e;return c.reject(a)})},removeTag:function(a,b){var e=r.get("tags");if(!_.findWhere(e,{namespace:a,tag:b}))return c.when(e);var f=_.reject(e,function(c){return c.namespace===a&&c.tag===b});n.tags=f;return d.put({key:r.get("key"),tags:f}).catch(function(a){n.tags=e;return c.reject(a)})},isNanodegreeStudent:function(){return 0<_.size(r.getEnrolledNanodegreeKeys(["enrolled","unenrolled","paused"]))},checkIfProfilesEnabled:function(){var a=r.getEnrolledNanodegreeKeys(["enrolled","pre-enrolled","unenrolled",
"paused"]);return 0===_.size(a)?c.when(!1):l.fetchCatalogAsMapOfNodeKeysToNode().then(function(b){return _.some(a,function(a){return b[a]&&b[a].enables_profiles})})},isUserEnrolledInCourseThroughND:function(a){return a.related_degree_keys||a.catalog_entry&&a.catalog_entry.related_degree_keys?r.fetchEnrolledAndGraduatedNanodegreeKeys().then(function(b){return 0<_.size(_.intersection(a.related_degree_keys?a.related_degree_keys:a.catalog_entry.related_degree_keys,b))}):-1<a.key.indexOf("-nd")?c.when(!0):
c.when(!1)},fetchIsReviewer:function(){return d.fetchIsUserReviewer(n.key)},copyProgressToUdacityTwoDotO:function(){return d.copyProgressToUdacityTwoDotO("me")},fetchShouldSeeUpgradeBanner:function(){return c.all({isStaff:r.fetchIsStaff(),isReviewer:r.fetchIsReviewer()}).then(function(){_.last(r.get("key"));var a=["ca001","ca002","ca003","nd001b"];return!_.some(r.get("_enrollments"),function(b){return-1<a.indexOf(b.node_key)&&"enrolled"===b.state})})}};return r}]);angular.module("user").directive("userMenu",["currentUser","session",function(a,c){return{restrict:"A",link:function(b){b.isLoggedIn=a.userIsLoggedIn;b.user=a.getUser;b.isNanodegreeStudent=a.isNanodegreeStudent();b.isProfilesEnabled=!1;a.checkIfProfilesEnabled().then(function(a){b.isProfilesEnabled=a});var d=[/\/account/,/\/me/,/\/checkout/];b.logOut=function(){analytics.track("Signed Out",{category:"Sign Out",account_key:window.account.key},b.segmentPageProperties,function(){c.terminate().then(function(){analytics.reset();
var a=window.location.pathname;_.some(d,function(b){return b.test(a)})?window.location="/":window.location.reload()})})}}}}]);angular.module("user").factory("userUtility",[function(){return{getFullName:function(a){if(a)return a.first_name&&a.last_name?a.first_name+" "+a.last_name:a.first_name||a.last_name},getEmail:function(a){return a.email&&a.email.address}}}]);angular.module("utility").directive("animatedToggle",function(){return{restrict:"A",link:function(a,c,b){b.toggleTarget||console.error("You must provide a toggle-target with a selector for the child element to toggle");b.toggler||console.error("You must provide an element to trigger the toggle");var d=c.find(b.toggleTarget),a=c.find(b.toggler);d||console.error("Element to toggle ("+b.toggleTarget+") not found!");a||console.error("Element to trigger toggle ("+b.toggler+") not found!");$(a).on("click",
function(){$(d).toggle("fast")});window.location.hash.substring(1)===a.attr("id")?$(d).show():$(d).hide()}}});angular.module("utility").service("applicationEnvironment",["$location",function(a){var c=/(abcinth)|(localhost)/;return{isInDevelopment:function(){return c.test(a.absUrl())},isLocal:function(){return/localhost/g.test(a.absUrl())}}}]);angular.module("utility").factory("callbackList",function(){return{create:function(){var a=[],c,b=!1,d={add:function(e,f,g){a.push(e);b&&f?(e(c),g&&d.remove(e)):g&&(e._removeOnFire=!0);return d},remove:function(b){for(var c=a.length,g=0;g<c;g++)a[g]===b&&(a.splice(g,1),g-=1);return d},fire:function(e){var f,g=_.clone(a),h=g.length;for(f=0;f<h;f++)try{g[f](e)}catch(i){console.error("Exception encountered in callback:"+i.message),console.error(g[f])}c=e;b=!0;for(f=0;f<a.length;f++)!0===a[f]._removeOnFire&&
(d.remove(a[f]),f-=1);return d},_getCallbacks:function(){return a}};return d}}});angular.module("utility").controller("contentEditorUrlGenerator",["$scope","$location",function(a,c){a.getContentEditUrl=function(){return"/admin/tools/content-editor#!"+c.path()}}]);angular.module("utility").factory("cookieJar",[function(){var a=function(a,c,e,f){a=encodeURIComponent(a)+"="+(e?encodeURIComponent(c):c);angular.isObject(f)&&(angular.isDate(f.expires)&&(a+="; expires="+f.expires.toUTCString()),angular.isString(f.path)&&""!==f.path&&(a+="; path="+f.path),angular.isString(f.domain)&&""!==f.domain&&(a+="; domain="+f.domain),!0===f.secure&&(a+="; secure"));return a},c=function(a,c){var e={};if(angular.isString(a)&&0<a.length)for(var f=a.split(/;\s/g),g=null,h=null,
i=null,j=0,l=f.length;j<l;j++){i=f[j].match(/([^=]+)=/i);if(angular.isArray(i))try{g=decodeURIComponent(i[1]),h=!1===c?f[j].substring(i[1].length+1):decodeURIComponent(f[j].substring(i[1].length+1))}catch(k){}else g=decodeURIComponent(f[j]),h="";e[g]=h}return e};return{exists:function(a){if(!angular.isString(a)||""===a)throw new TypeError("$cookieJar.exists(): Cookie name must be a non-empty string.");return c(document.cookie,!0).hasOwnProperty(a)},get:function(a,d){var d=angular.isObject(d)?d:{},
e=c(document.cookie,!d.raw);if(!angular.isString(a)||""===a)throw new TypeError("$cookieJar.get(): Cookie name must be a non-empty string.");return angular.isUndefined(e[a])?null:angular.isFunction(d.converter)?d.converter(e[a]):e[a]},getSub:function(a,c,e){a=this.getSubs(a);if(null!==a){if(!angular.isString(c)||""===c)throw new TypeError("$cookieJar.getSub(): Subcookie name must be a non-empty string.");return angular.isUndefined(a[c])?null:angular.isFunction(e)?e(a[c]):a[c]}return null},getSubs:function(a){if(!angular.isString(a)||
""===a)throw new TypeError("$cookieJar.getSubs(): Cookie name must be a non-empty string.");var d=c(document.cookie,!1);if(angular.isString(d[a])){var e=d[a],a=e.split("&"),d=null,f={};if(0<e.length)for(var e=0,g=a.length;e<g;e++)d=a[e].split("="),f[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return f}return null},remove:function(a,c){if(!angular.isString(a)||""===a)throw new TypeError("$cookieJar.remove(): Cookie name must be a non-empty string.");c=_.extend(c||{},{expires:new Date(0)},!0);
return this.set(a,"",c)},removeSub:function(a,c,e){e=e||{};if(!angular.isString(a)||""===a)throw new TypeError("$cookieJar.removeSub(): Cookie name must be a non-empty string.");if(!angular.isString(c)||""===c)throw new TypeError("$cookieJar.removeSub(): Subcookie name must be a non-empty string.");var f=this.getSubs(a);if(angular.isObject(f)&&f.hasOwnProperty(c)){delete f[c];if(e.removeIfEmpty){for(var g in f)if(f.hasOwnProperty(g)&&!angular.isFunction(f[g])&&!angular.isUndefined(f[g]))return this.setSubs(a,
f,e);return this.remove(a,e)}return this.setSubs(a,f,e)}return""},set:function(b,c,e){e=e||{};if(!angular.isString(b))throw new TypeError("$cookieJar.set(): Cookie name must be a string.");if(angular.isUndefined(c))throw new TypeError("$cookieJar.set(): Value cannot be undefined.");b=a(b,c,!e.raw,e);return document.cookie=b},setSub:function(a,c,e,f){if(!angular.isString(a)||""===a)throw new TypeError("$cookieJar.setSub(): Cookie name must be a non-empty string.");if(!angular.isString(c)||""===c)throw new TypeError("$cookieJar.setSub(): Subcookie name must be a non-empty string.");
if(angular.isUndefined(e))throw new TypeError("$cookieJar.setSub(): Subcookie value cannot be undefined.");var g=this.getSubs(a),g=angular.isObject(g)?g:{};g[c]=e;return this.setSubs(a,g,f)},setSubs:function(b,c,e){if(!angular.isString(b))throw new TypeError("$cookieJar.setSubs(): Cookie name must be a string.");if(!angular.isObject(c))throw new TypeError("$cookieJar.setSubs(): Cookie value must be an object.");if(!angular.isObject(c))throw new TypeError("createCookieHashString(): Argument must be an object.");
var f=[],g;for(g in c)c.hasOwnProperty(g)&&(!angular.isFunction(c[g])&&!angular.isUndefined(c[g]))&&f.push(encodeURIComponent(g)+"="+encodeURIComponent(String(c[g])));c=f.join("&");b=a(b,c,!1,e);return document.cookie=b}}}]);angular.module("utility").service("country",[function(){return{countries:"Afghanistan;Aland Islands;Albania;Algeria;American Samoa;Andorra;Angola;Anguilla;Antarctica;Antigua And Barbuda;Argentina;Armenia;Aruba;Australia;Austria;Azerbaijan;Bahamas;Bahrain;Bangladesh;Barbados;Belarus;Belgium;Belize;Benin;Bermuda;Bhutan;Bolivia, Plurinational State of;Bonaire, Sint Eustatius and Saba;Bosnia and Herzegovina;Botswana;Bouvet Island;Brazil;British Indian Ocean Territory;Brunei Darussalam;Bulgaria;Burkina Faso;Burundi;Cambodia;Cameroon;Canada;Cape Verde;Cayman Islands;Central African Republic;Chad;Chile;China;Christmas Island;Cocos (Keeling) Islands;Colombia;Comoros;Congo;Congo, the Democratic Republic of the;Cook Islands;Costa Rica;Cote d'Ivoire;Croatia;Cuba;Cyprus;Czech Republic;Denmark;Djibouti;Dominica;Dominican Republic;Ecuador;Egypt;El Salvador;Equatorial Guinea;Eritrea;Estonia;Ethiopia;Falkland Islands (Malvinas);Faroe Islands;Fiji;Finland;France;French Guiana;French Polynesia;French Southern Territories;Gabon;Gambia;Georgia;Germany;Ghana;Gibraltar;Greece;Greenland;Grenada;Guadeloupe;Guam;Guatemala;Guernsey;Guinea;Guinea-Bissau;Guyana;Haiti;Heard Island and McDonald Islands;Holy See (Vatican City State);Honduras;Hong Kong;Hungary;Iceland;India;Indonesia;Iran, Islamic Republic of;Iraq;Ireland;Isle of Man;Israel;Italy;Jamaica;Japan;Jersey;Jordan;Kazakhstan;Kenya;Kiribati;Korea, Democratic People's Republic of;Korea, Republic of;Kuwait;Kyrgyzstan;Lao People's Democratic Republic;Latvia;Lebanon;Lesotho;Liberia;Libya;Liechtenstein;Lithuania;Luxembourg;Macao;Macedonia, The Former Yugoslav Republic Of;Madagascar;Malawi;Malaysia;Maldives;Mali;Malta;Marshall Islands;Martinique;Mauritania;Mauritius;Mayotte;Mexico;Micronesia, Federated States of;Moldova, Republic of;Monaco;Mongolia;Montenegro;Montserrat;Morocco;Mozambique;Myanmar;Namibia;Nauru;Nepal;Netherlands;New Caledonia;New Zealand;Nicaragua;Niger;Nigeria;Niue;Norfolk Island;Northern Mariana Islands;Norway;Oman;Pakistan;Palau;Palestinian Territory, Occupied;Panama;Papua New Guinea;Paraguay;Peru;Philippines;Pitcairn;Poland;Portugal;Puerto Rico;Qatar;Reunion;Romania;Russian Federation;Rwanda;Saint Barthelemy;Saint Helena, Ascension and Tristan da Cunha;Saint Kitts and Nevis;Saint Lucia;Saint Martin (French Part);Saint Pierre and Miquelon;Saint Vincent and the Grenadines;Samoa;San Marino;Sao Tome and Principe;Saudi Arabia;Senegal;Serbia;Seychelles;Sierra Leone;Singapore;Sint Maarten (Dutch Part);Slovakia;Slovenia;Solomon Islands;Somalia;South Africa;South Georgia and the South Sandwich Islands;South Sudan;Spain;Sri Lanka;Sudan;Suriname;Svalbard and Jan Mayen;Swaziland;Sweden;Switzerland;Syrian Arab Republic;Taiwan, Province of China;Tajikistan;Tanzania, United Republic of;Thailand;Timor-Leste;Togo;Tokelau;Tonga;Trinidad and Tobago;Tunisia;Turkey;Turkmenistan;Turks and Caicos Islands;Tuvalu;Uganda;Ukraine;United Arab Emirates;United Kingdom;United States;United States Minor Outlying Islands;Uruguay;Uzbekistan;Vanuatu;Venezuela, Bolivarian Republic of;Viet Nam;Virgin Islands, British;Virgin Islands, U.S.;Wallis and Futuna;Western Sahara;Yemen;Zambia;Zimbabwe".split(";")}}]);angular.module("utility").factory("dateTime",["$filter",function(a){var c=null,b={initialize:function(a){c=(new Date).getTime()-a},convertDateToUTC:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())},getCurrent:function(){return new Date(b._getActualMillisecondsSinceEpoch())},getCurrentAsUTC:function(){var c=b.convertDateToUTC(new Date(b._getActualMillisecondsSinceEpoch()));return a("date")(c,"yyyy-MM-ddTHH:mm:ss.000")+
"Z"},calculateDaysBetweenDates:function(a,b){return Math.abs((b.getTime()-a.getTime())/864E5)},_getActualMillisecondsSinceEpoch:function(){return(new Date).getTime()-c},convertDateToRightTimeZone:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())}};return b}]);angular.module("utility").factory("fetchDiscourseLink",["$q","currentUser","nodes","discourse",function(a,c,b,d){var e={},f={},g=function(h,g){var j=f[h];if("COURSE"===j&&e[h])return e[h].promise;if("LESSON"===j&&e[g])return e[g].promise;if(h&&0===h.indexOf("nd")){if(g){f[h]="LESSON";e[g]=a.defer();var l=null;b.get(g).then(function(a){var b=a.overview_details;if(b&&b.forum_slug)l="http://discussions.udacity.com/c/"+b.forum_slug;else if(("nd000"===h||"ca001"===h)&&a.forum_slug)l="http://discussions.udacity.com/c/"+
a.forum_slug;e[g].resolve(l?l:"http://discussions.udacity.com/categories")});return e[g].promise}f[h]="COURSE";e[h]=a.defer();e[h].resolve("http://discussions.udacity.com/categories");return e[h].promise}"LESSON"===j?e[g]=a.defer():e[h]=a.defer();c.fetchCohorts().then(function(c){var m=null,c=_.map(c,function(c){var j=a.defer();if(_.contains(c._course_keys,h))return b.batchGet([c.node_key],{depth:1}).then(function(a){a=_.where(a,{_semantic_type:"Project",_available:!0});a=_.filter(a,function(a){return _.find(a.overview_details.related_course_refs,
function(a){return a.key===h})});if(!m&&1===a.length){var b=_.first(a).overview_details.forum_slug;m="http://discussions.udacity.com/c/"+b;d.getCategories().then(function(a){var c=_.find(a,function(a){return a.slug===b}).id;if(a=_.find(a,function(a){return a.parent_category_id===c&&(-1!==a.slug.indexOf(h)||-1!==a.slug.indexOf(g))}))f[h]=-1!==a.slug.indexOf(g)?"LESSON":"COURSE",m=m+"/"+a.slug;j.resolve()})}else e[h].resolve("http://discussions.udacity.com/categories")}),j.promise});a.all(c).then(function(){"LESSON"===
j&&e[g]?e[g].resolve(m?m:"http://discussions.udacity.com/categories"):"LESSON"===j?(e[h].resolve(m?m:"http://discussions.udacity.com/categories"),e[g]=a.defer(),e[g].resolve(m?m:"http://discussions.udacity.com/categories")):e[h].resolve(m?m:"http://discussions.udacity.com/categories")})});return"LESSON"===j?e[g].promise:e[h].promise};g._FALLBACK_URL="http://discussions.udacity.com/categories";return g}]);angular.module("utility").directive("filePicker",[function(){return{require:"ngModel",scope:{buttonLabel:"=?"},template:'<span class="btn btn-default file-picker">{{buttonLabel || \'Choose File\'}}<input type="file" class="input-control-file"></span>',link:function(a,c,b,d){d.render=angular.noop;c.find("input").on("change",function(b){d.$setViewValue(_.first(b.target.files));a.$apply()})}}}]);angular.module("utility").service("fileQueue",["queue","api","$q",function(a,c,b){var d={uploadQueue:a("fileUpload"),blobStoreUploadTask:function(a,b,g){return d.fileUploadTask(c.get(a+"/upload_url").then(function(a){return a.data.url}),b,g)},fileUploadTask:function(c,f,g){return d.uploadQueue.newUniqueTask(function(a){var d=b.defer(),g=new XMLHttpRequest;g.onreadystatechange=function(){if(4===g.readyState)if(200===g.status){var a=JSON.parse(g.response.slice(5));d.resolve(a)}else d.reject(g.response&&
JSON.parse(g.response.slice(5)))};g.upload.addEventListener("progress",function(b){d.notify(b);a.canceled&&g.abort()},!1);b.when(c).then(function(a){g.open("POST",a,!0);g.setRequestHeader("X-XSRF-Token",document.cookie.match(/(^|; *)XSRF-TOKEN=(.*?)(;|$)/)[2]);a=new FormData;a.append("file",f);g.send(a)},function(a){d.reject(a)});return d.promise},c,a.LOW_PRIORITY).name(g||"File upload to "+c)}};return d}]);angular.module("utility").factory("googleBranding",[function(){return{determineGoogleBrandedUrl:function(a){a=decodeURIComponent(decodeURIComponent(a));return 0<=a.search("google=true")||0<=a.search("google_auth=true")}}}]);angular.module("utility").factory("googleTagManager",["$q",function(a){return{pushTrackingEvent:function(){var c=a.defer();c.resolve(!0);return c.promise}}}]);angular.module("utility").factory("libraryLoader",["$q","$rootScope","$timeout","cacheVersion",function(a,c,b,d){var e={codemirror:"/media/js/standalone/libs/codemirror/codemirror-custom.min.js",mathquill:"/media/js/standalone/libs/mathquill.min.js?"+d,jshint:"/media/js/standalone/libs/jshint/jshint-1.0.0.min.js",base64:"/media/js/standalone/libs/base64.js"},f={},g={loadLibraries:function(b){return a.all(_.map(b,function(a){return g._fetchLibrary(a)}))},_fetchLibrary:function(c){var d=e[c]?e[c]:c,
g=a.defer();if(f[c])return f[c];f[c]=g.promise;jQuery.ajax({dataType:"script",cache:!0,url:d}).success(function(){b(function(){g.resolve()})}).error(function(){b(function(){g.reject()})});return g.promise},_addLibrary:function(a,b){e[a]=b}};return g}]);angular.module("utility").service("mixin",["callbackList",function(a){return{eventEmission:function(c,b){var d=_.object(_.map(b,function(b){return[b,a.create()]}));if(!_.isArray(b)||!_.all(b,function(a){return _.isString(a)}))throw"eventNames must be an array of strings";if(!_.isObject(c))throw"targetObject must be an object to mix into";var e=function(a,b,e){if(d[a])e();else throw b;return c};if(_.intersection(_.keys(c),["addEventListener","removeEventListener","emitEvent"]).length)throw"Can't add event methods--they already exist!";
c.addEventListener=function(a,b,h){var h=h||{},i=_.without(_.keys(h),"replayLast","removeOnDestructionOf","removeAfterFired");if(i.length)throw Error("Unsupported options "+i+" when adding event listener");return e(a,'Cannot listen for non-emitted event "'+a+'"',function(){if(!_.isFunction(b))throw Error('You must provide a callback to run when the "'+a+'" event is emitted');d[a].add(b,h.replayLast,h.removeAfterFired);_.isObject(h.removeOnDestructionOf)&&h.removeOnDestructionOf.$on&&h.removeOnDestructionOf.$on("$destroy",
function(){c.removeEventListener(a,b)})})};c.removeEventListener=function(a,b){return e(a,'Cannot remove listener from non-emitted event "'+a+'"',function(){d[a].remove(b)})};c.emitEvent=function(a,b){return e(a,"Cannot emit invalid event "+a+". Add to exposed events when mixing in.",function(){if(void 0===b||null===b)b={};d[a].fire(b)})};return c}}}]);angular.module("utility").service("ndIcons",[function(){return{getNdIconUrl:function(a){return"//s3.amazonaws.com/content.udacity-data.com/site-svgs/nd_icons/"+a+".svg"}}}]);angular.module("utility").service("NDLite",[function(){return{lessonIsCareerProject:function(a){return _.contains("4133218991 4196538629 4180859007 4632731472 5184400348 5190600054 5379660857 5329972991 5607853687".split(" "),a.key)}}}]);angular.module("utility").service("notifications",["$document","$window",function(a,c){var b="default",d=function(){Notification&&Notification.requestPermission(function(a){b=a})},e={};d();return{getNotificationPermissions:function(){return b},createNotification:function(d,g,h){"granted"===b&&("noisy"===e[d]&&a[0].hidden)&&((new Notification(g,{body:h,icon:"//lh4.ggpht.com/9aWgWwryYb9oBUJxLwgS_7PVb6R_eXHB8amKSsHdQrtxEY6Hec-9AFwGFafb65fWakLvZ5il7f9QL1ONy_w=s0#w=120&h=120",tag:d})).onclick=function(){c.focus()})},
requestNotificationPermissions:function(){d()},registerNotificationCreator:function(a,b){b||(b="muted");e[a]=b},changeMuteSettings:function(a,b){e[a]=b},toggleMuteSettings:function(a){e[a]&&(e[a]="noisy"===e[a]?"muted":"noisy")},getMuteSettings:function(a){return e[a]}}}]);angular.module("utility").factory("qualaroo",[function(){return{set:function(a){window._kiq.push&&window._kiq.push(["set",a])}}}]);angular.module("utility").factory("recordActivity",["$q","mixin","dateTime","api",function(a,c,b,d){var e={send:function(c,e){if(!_.isArray(c)&&!_.isObject(c))return console.error("recordActivity.send takes an object or list of objects"),a.reject("recordActivity.send takes an object or list of objects");_.isArray(c)||(c=[c]);var e=e||{},h={current_time:b.getCurrentAsUTC()};h.items=_.map(c,function(a){var c={data:a.data,occurrence_time:a.timestamp||e.timestamp||b.getCurrentAsUTC()};"undefined"!==typeof a.context&&
(c.content_context=_.without(a.context,null,void 0,"none"));return c});e.chain&&(h.related_chain=!0);return d.post("/activity",h).then(null,function(b){console.error("Error when trying to post activity."," Payload:",h," Chained:",e.chain," Response",b);return a.reject(b)})},experimentAssignment:function(a,b,c){return e.send([{data:{model:"ExperimentAssignment",experiment:a,treatment:b}}],c)},surveyResponse:function(a,b,c){return e.send([{data:{model:"SurveyResponse",survey_name:a,items:b}}],c)},cancellationFlowStep:function(a,
b,c,d,j,l,k,m){a=[{data:{model:"CancellationFlowStep",flow_token:a,step_number:b,node_key:c?c:"ndXXX",node_semantic_type:d,choice:j}}];l&&(a[0].data.extra_option=l);k&&(a[0].data.extra_option_description=k);return e.send(a,m)},observation:function(a,b,c,d){return e.send([{data:{model:"Observation",observation_type:a,details_version:b,details:c}}],d)}};return c.eventEmission(e,["activity"])}]);angular.module("utility").directive("responsivenessEnabler",function(){return{controller:["$scope","$rootScope",function(a,c){c.$broadcast("setResponsiveness",!0)}]}});angular.module("utility").factory("retry",["$q","$timeout",function(a,c){var b=function(d,e,h){return d()["catch"](function(i){return 0<e?c(angular.noop,h).then(function(){return b(d,e-1,h)}):a.reject(i)})},d=function(b,e,h){return b()["catch"](function(i){return 0<e?c(angular.noop,h).then(function(){return d(b,e-1,2*h)}):a.reject(i)})},e=function(a,b,c){return d(a,b,c)};e.linear=b;e.falloff=d;return e}]);angular.module("utility").factory("safelyRedirect",[function(){var a=function(c){!c||"/"===c?a._changeLocation("/"):_.any([/^\/[^\/%]/,/^http[s]?:\/\/(?:[^.]+\.)?abcinth\.udacity\.com(?:\/|$)/i,/^http[s]?:\/\/(?:[^.]+\.)?dangerzone\.udacity\.com(?:\/|$)/i,/^http[s]?:\/\/(?:[^.]+\.)?udacity\.com(?:\/|$)/i,/^http[s]?:\/\/(?:[^.]+\-dot\-)?(udacity\-abcinth|udacity\-dev|udacityu)\.appspot\.com(?:\/|$)/i,/^http[s]?:\/\/127\.\d+\.\d+\.\d+(?::\d+)?(?:\/|$)/i,/^http[s]?:\/\/?localhost(?::\d+)?(?:\/|$)/i],
function(a){return a.test(c)||a.test(window.decodeURIComponent(c))})?a._changeLocation(c):(console.error("Invalid url to redirect to: "+c),a._changeLocation("/"))};a._changeLocation=function(a){window.location.href=a};return a}]);angular.module("utility").factory("facebook",["$q","$timeout","$location","mixin","facebookHelper",function(a,c,b,d,e){e.loadApi().then(function(){f.emitEvent("loaded")});var f={feedShare:function(d){var h=a.defer();if("object"!==typeof d||_.isNull(d))return a.reject("feedShare requres an options object");d=_.extend({},d,{method:"feed"});d.picture&&"//"===d.picture.substring(0,2)&&(d.picture=b.protocol()+":"+d.picture);e.loadApi().then(function(){window.FB.ui(d,function(a){c(function(){_.isNull(a)?
h.reject("unshared cancel"):void 0===a?h.reject("unshared close"):a.error?h.reject(a):(f.emitEvent("feedShare",a),h.resolve(a))})})});return h.promise},getAuthResponse:function(){var b=a.defer();e.loadApi().then(function(){var a=window.FB.getAuthResponse();a?b.resolve(a):window.FB.login(function(a){a&&a.authResponse?b.resolve(a.authResponse):b.reject(a)},{scope:"email"})});return b.promise},getMeResponse:function(){var b=a.defer();e.loadApi().then(function(){window.FB.getLoginStatus(function(a){"connected"===
a.status?window.FB.api("/me",function(a){a.error?b.reject(a):b.resolve(a)}):(console.warn("tried to get me from FB but was not authd"),b.reject(a))})});return b.promise}};return d.eventEmission(f,["loaded","feedShare","like"])}]);
angular.module("utility").factory("facebookHelper",["$q","mixin","libraryLoader","$timeout",function(a,c,b,d){var e,f,c={_init:function(){e=a.defer();f=!1},loadApi:function(){!0!==f&&($("body").append('<div id="fb-root"></div>'),window.fbAsyncInit||(window.fbAsyncInit=function(){window.FB.init({appId:365362206864879,channelUrl:"//"+window.location.host+"/facebookChannel.html",status:!0,cookie:!0,xfbml:!0,version:"v2.2"});f=!0;e.resolve(!0)}),d(function(){b.loadLibraries(["//connect.facebook.net/en_US/sdk.js"]).then(null,
function(){console.warn("Facebook libraries failed to load!");e.reject("Facebook libraries failed to load!")})},100));return e.promise}};c._init();return c}]);angular.module("utility").directive("facebookShare",["facebook","$location",function(a,c){return{restrict:"A",scope:{facebookShare:"="},template:'<a href="" data-ng-class="classes" data-ng-click="share()" data-ng-transclude></a>',transclude:!0,replace:!0,link:function(b,d,e){b.classes=e["class"];b.share=function(){var d=b.facebookShare||{};d.link=d.link||c.absUrl();a.feedShare(d)}}}}]);angular.module("utility").factory("google",["$timeout","$q","mixin","googleHelper",function(a,c,b,d){var e=d.getConfig();d.loadApi().then(function(){f.emitEvent("loaded")});var f={getToken:function(b){var f=c.defer();"boolean"===typeof b||"undefined"===typeof b?(b=!0===b?!0:!1,d.loadApi().then(function(){window.gapi.auth.authorize(_.extend({response_type:"code",immediate:b},e),function(b){a(function(){b&&b.code?f.resolve(b):(console.warn("google.getToken failed to return a token!"),f.reject("google.getToken failed to return a token!"))})})})):
f.reject("Immediate must be boolean or undefined");return f.promise},getMeResponse:function(){var b=c.defer();d.loadApi().then(function(){window.gapi.auth.authorize(_.extend({immediate:!0},e),function(c){window.gapi.client.load("oauth2","v2",function(){window.gapi.client.oauth2.userinfo.get().execute(function(d){d.token=c;a(function(){"undefined"!==typeof d.error?b.reject(d):b.resolve(d)})})})})});return b.promise}};return b.eventEmission(f,["loaded"])}]);
angular.module("utility").factory("googleHelper",["$timeout","$q","$location","libraryLoader",function(a,c,b,d){var e,f,g={client_id:"72069832843-ji15b2fqekfntf5q1k9q0pboieao8hfa.apps.googleusercontent.com",scope:"profile email"},h={_init:function(){e=c.defer();f=!1;g.client_id="127.0.0.1"===b.host()?"72069832843-8m1i2jll4frcqge66a2be0utlbv8ij1h.apps.googleusercontent.com":"72069832843-ji15b2fqekfntf5q1k9q0pboieao8hfa.apps.googleusercontent.com"},_consts:function(){return{PROD_APP_ID:"72069832843-ji15b2fqekfntf5q1k9q0pboieao8hfa.apps.googleusercontent.com",
LOCAL_APP_ID:"72069832843-8m1i2jll4frcqge66a2be0utlbv8ij1h.apps.googleusercontent.com",CURRENT_APP_ID:g.client_id}},getConfig:function(){g.foo="bar";return _.clone(g)},loadApi:function(){!0!==f&&(window.__GFDGoogle||(window.__GFDGoogle=function(){window.gapi.auth.init(function(){a(function(){f=!0;e.resolve(!0)})})}),d.loadLibraries(["https://apis.google.com/js/client:platform.js?onload=__GFDGoogle"]).then(function(){},function(){console.warn("Google libraries failed to load!");e.reject("Google libraries failed to load!")}));
return e.promise}};h._init();return h}]);angular.module("utility").directive("googlePlusShare",["facebook","$location",function(a,c){return{restrict:"A",scope:{googlePlusShare:"="},template:'<a href="" data-ng-class="classes" data-ng-click="share()" ng-transclude></a>',transclude:!0,replace:!0,link:function(a,d,e){a.classes=e["class"];a.share=function(){window.open("https://plus.google.com/share?url="+window.encodeURIComponent(a.googlePlusShare.link||c.absUrl()))}}}}]);angular.module("utility").factory("normalizedSocialService",["facebook","google",function(a,c){return{normalizeAccountService:function(b){var d={},e=c;d.login=c.getToken;"facebook"===b&&(e=a,d.login=a.getAuthResponse);d.getAccount=e.getMeResponse;return d},normalizeAccount:function(a,c){"google"===a&&(c.firstName=c.given_name,c.lastName=c.family_name);"facebook"===a&&(c.firstName=c.first_name,c.lastName=c.last_name);return c},createSessionData:function(a,c){var e={};"google"===a?e.google={token:c.code}:
"facebook"===a?e.facebook={signed_request:c.signedRequest}:console.warn("normalized_socia_service.js:createSessionData got an accountTypethat is not facebook or google...is that right?");return e}}}]);angular.module("utility").directive("socialSharing",["$location","facebook",function(a,c){return{restrict:"A",template:'<p style="text-align:center; font-weight: bold; margin-bottom: 15px">Share your accomplishment!<br><a class="btn" style="min-width: 150px" data-ng-click="shareFacebook(course.title)"><span class="social-icon facebook" style="position: relative;left: -6px; vertical-align: middle;"></span>Facebook</a><a class="btn" style="min-width: 150px; margin-left: 10px;" data-tweet-link href data-tweet="{text: \'Just finished \'+lesson.title+\' in Udacity\\\'s \'+course.title, via: \'udacity\', url: locationToTweetFrom}"><span class="social-icon twitter" style="position: relative; left: -6px; vertical-align: middle;"></span>Twitter</a></p>',
link:function(b){b.locationToTweetFrom=a.absUrl();b.$on("$routeChangeSuccess",function(){b.locationToTweetFrom=a.absUrl()});b.shareFacebook=function(b){console.log("sharing!");b={link:a.absUrl(),picture:"https://lh4.ggpht.com/KmrVJFnjArFRMCXTnOxnQ9kG_o2Lllo1Q7S3Jq-UwXO_BQ5DondbistdOW8DpqXgJNNIeOUU0acX36LcXKU=s500-c#w=500&h=539",description:b+" is a full course available, 100% free, at udacity.com. Come learn with us!"};c.feedShare(b).then()}}}}]);angular.module("utility").directive("tweetLink",["twitter",function(a){return{restrict:"A",scope:{tweet:"="},template:'<a target="_blank" ng-class="attributes.class" ng-href="{{_tweetUrl}}" ng-transclude></a>',transclude:!0,replace:!0,link:function(c){c._tweetUrl=a.buildTweetUrl(c.tweet);c.$watch("tweet",function(b){b&&(c._tweetUrl=a.buildTweetUrl(b),a.reloadTwitterWidgets())},!0)}}}]);angular.module("utility").factory("twitter",["mixin","twitterHelper",function(a,c){window.twttr||(window.twttr={_e:[],ready:function(a){window.twttr._e.push(a)}},window.setTimeout(function(){var a=window,c;var e,f=document.getElementsByTagName("script")[0];document.getElementById("twitter-wjs")?c=void 0:(c=document.createElement("script"),c.id="twitter-wjs",c.src="https://platform.twitter.com/widgets.js",f.parentNode.insertBefore(c,f),c=window.twttr||(e={_e:[],ready:function(a){e._e.push(a)}}));a.twttr=
c},100));window.twttr.ready(function(a){a.events.bind("click",function(a){c.recordTweetEvent("tweetStart",a)});a.events.bind("tweet",function(a){c.recordTweetEvent("tweetSent",a)});a.events.bind("retweet",function(a){c.recordTweetEvent("retweetSent",a)})});return a.eventEmission({buildTweetUrl:function(a){var c=["url","text","via","in_reply_to","related"],e=[],f;"string"===typeof a?a={text:a}:_.isObject(a)||(a={});for(f=0;f<c.length;f++)"string"===typeof a[c[f]]&&""!==a[c[f]].trim()&&e.push(c[f]+
"="+encodeURIComponent(a[c[f]]));return"https://twitter.com/intent/tweet?"+e.join("&")},reloadTwitterWidgets:function(){window.twttr.widgets?window.twttr.widgets.load():window.twttr.ready(function(){window.twttr.widgets.load()})}},["tweet","retweet"])}]);angular.module("utility").factory("twitterHelper",["basicUser","recordActivity",function(a,c){return{recordTweetEvent:function(b,d){c.observation(b,1,{user:a.key,url:document.URL,triggerLink:d.target.href})}}}]);angular.module("utility").factory("techDetect",["mixin",function(a){var c,b,d=function(){b={browser:null,version:null,browserDim:null,cookies:null,flash:null,os:null,screenDim:null,screenColorDepth:null,ua:navigator.userAgent||"unspecified UA",lang:navigator.language||"unspecified language"}};d();var e=function(a){for(var b=0;b<a.length;b++){var d=a[b].string,e=a[b].prop;c=a[b].versionSearch||a[b].identity;if(d){if(-1!==d.indexOf(a[b].subString))return a[b].identity}else if(e)return a[b].identity}},
f=function(a){var b=a.indexOf(c);if(-1!==b)return parseFloat(a.substring(b+c.length+1))},g=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"Safari",identity:"Safari",versionSearch:"Version"},{prop:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),identity:"UIWebView",versionSearch:"OS"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},
{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,
subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],h=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"iPod",identity:"iOS"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",
identity:"Linux"}],i=function(a){if(null===b.browser||a)b.browser=e(g)||"An unknown browser";return b.browser},j=function(a){if(null===b.version||a)i(),b.version=f(navigator.userAgent)||f(navigator.appVersion)||"an unknown version";return b.version},l=function(a){if(null===b.os||a)b.os=e(h)||"an unknown OS";return b.os},k=function(a){if(null===b.cookies||a)document.cookie="cookietest=1",b.cookies=-1!==document.cookie.indexOf("cookietest="),document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT";
return b.cookies},m=function(a){if(null===b.flash||a)try{b.flash=!!(navigator.mimeTypes["application/x-shockwave-flash"]||window.ActiveXObject&&new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(c){b.flash=!1}return b.flash},n=function(a){if(null===b.browserDim||a)b.browserDim=[$(window).width(),$(window).height()];return b.browserDim},p=function(a){if(null===b.screenDim||a)b.screenDim=[screen.width,screen.height];return b.screenDim},q=function(a){if(null===b.screenColorDepth||a)b.screenColorDepth=
screen.colorDepth;return b.screenColorDepth};return a.eventEmission({browserSize:n,browserType:i,browserVersion:j,cookiesEnabled:k,flashEnabled:m,os:l,screenSize:p,screenColorDepth:q,ua:function(){return b.ua},language:function(){return b.lang},flushCache:d,browserStats:function(a){return{browser:i(a),version:j(a),os:l(a)}},getAllTech:function(a){a=!!a;i(a);j(a);l(a);k(a);m(a);n(a);p(a);q(a);return b}},["browserDetected"])}]);angular.module("utility").factory("universalAnalytics",["googleTagManager",function(a){return{trackEvent:function(c,b){return a.pushTrackingEvent(!1!==b?"uaEvent":"uaNonHitEvent",{uaEventCategory:c.category,uaEventAction:c.action,uaEventLabel:c.label,uaEventValue:c.value})},trackTiming:function(c){(!c.var||!c.category||!c.label)&&console.error("Missing field in UA track timing event. Provided fields:",c);return a.pushTrackingEvent("uaTrackTimingEvent",{uaEventVarName:c.var,uaEventCategory:c.category,
uaEventLabel:c.label,uaEventValue:c.value})},trackTransaction:function(c){(!c.transactionId||!_.has(c,"transactionTotal"))&&console.error("Missing field in UA transaction event. Provided fields:",c);c.transactionProducts&&0<c.transactionProducts.length&&_.any(c.transactionProducts,function(a){return!a.name||!_.has(a,"sku")||!_.has(a,"price")||!a.quantity})&&console.error("Missing field in product for UA transaction event Provided products:",c.transactionProducts);return a.pushTrackingEvent("uaTransaction",
c)},trackVirtualPageView:function(c,b){return a.pushTrackingEvent("uaVirtualPageView",{uaEventPageUrl:c||location.pathname+location.search+location.hash,uaEventPageTitle:b||window.document.title})}}}]);angular.module("utility").factory("userTrials",["mixin","currentUser","recordActivity","userTrialsHelper",function(a,c,b,d){var e={enroll:function(a,g){if("string"!==typeof a||"string"!==typeof g||""===a.trim()||""===g.trim())console.error("Trial key and treatment must both be non-empty strings.");else{var h=d.getEnrollments(c.get("key"));h[a]=g;d.saveEnrollments(c.get("key"),h);b.experimentAssignment(a,g);e.emitEvent("enrollment",{trial:a,treatment:g})}},unenroll:function(a){if("string"!==typeof a||
""===a.trim())console.error("Trial key must be a non-empty string.");else{var b=d.getEnrollments(c.get("key")),h=b[a]||null;null!==h?(delete b[a],d.saveEnrollments(c.get("key"),b),e.emitEvent("unenrollment",{trial:a,treatment:h})):console.warn("Tried to unenroll from "+a+" but wasn't enrolled in it!")}},getTreatment:function(a){return d.getEnrollments(c.get("key"))[a]||null},getOrEnrollManually:function(a,b,c){c=_.isArray(c)?c:[];if("string"!==typeof a||""===a.trim())return console.error("trialKey must be a non-empty string."),
null;if(_.isFunction(b)){var d=e.getTreatment(a);null===d&&(d=b.apply(void 0,c),e.enroll(a,d));return d}console.error("assignmentFn must be a function.");return null},getAllEnrollments:function(){return $.extend(!0,{},d.getEnrollments(c.get("key")))}};return a.eventEmission(e,["enrollment","unenrollment"])}]);
angular.module("utility").factory("userTrialsHelper",["cookieJar",function(a){return{getEnrollments:function(c){return"string"!==typeof c||""===c.trim()?(console.error("user key must be a non-empty string."),null):a.getSubs("trials-"+c)||{}},saveEnrollments:function(c,b){"string"!==typeof c||""===c.trim()?console.error("User key must be a non-empty string."):"object"!==typeof b||null===b?console.error("User trial enrolls must be objects."):a.setSubs("trials-"+c,b)}}}]);angular.module("utility").factory("validator",[function(){var a={valid:!0,errorText:""},c={noop:function(){return a},required:function(b,c){var e=!0;"undefined"===typeof b?e=!1:"boolean"===typeof b?e=b:"string"===typeof b?e=""!==b.replace(/^\s*(.*?)\s*$/,"$1"):null===b&&(e=!1);return e?a:{valid:!1,errorText:c+" is required."}},strLen:function(b,c,e){("string"!==typeof b||"string"!==typeof c||"object"!==typeof e||2!==e.length)&&console.error("Wrong parameters passed to strLen validator for "+c);var b=
b.length,f=e[0],e=e[1];if("number"===typeof f&&"number"===typeof e){if(f===e&&f!==b)return{valid:!1,errorText:c+" has to be exactly "+e+" characters long."};if(b<f||b>e)return{valid:!1,errorText:c+" has to be between "+f+" and "+e+" characters long."}}else{if("number"===typeof f&&b<f)return{valid:!1,errorText:c+" has to be at least "+f+(1===f?" character":" characters")+" long."};if("number"===typeof e&&b>e)return{valid:!1,errorText:c+" has to be "+(0===e?"zero characters":"fewer than "+(e+1)+" characters")+
" long."}}return a},numericString:function(b,c){return"string"!==typeof b?(console.error("The numericString evaluator can only take in a string! You tried "+typeof b),{valid:!1,errorText:"The numericString evaluator can only take in a string! You tried "+typeof b}):!/^[0-9]+$/.test(b)?{valid:!1,errorText:c+" can only be numeric characters."}:a},email:function(b,c){("string"!==typeof b||"string"!==typeof c)&&console.error("Wrong parameters passed to email validator for "+c);return/^[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i.test(b)?
a:{valid:!1,errorText:c+" has to be a valid email address."}},equal:function(b,c,e){("string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b||"object"!==typeof e||2!==e.length)&&console.error("Wrong parameters passed to equal validator for "+c);"string"!==typeof b&&("number"!==typeof b&&"boolean"!==typeof b)&&console.error('Validator "Equal" only works for strings, numbers, and booleans. Tried '+typeof b+" for "+c);return b===e[0]?a:{valid:!1,errorText:c+" and "+e[1]+" have to be the same."}},
javascript:function(b,c,e){var f=e[0],e=[b].concat(e.slice(1)),f=f.apply(void 0,e);return"boolean"!==typeof f?(console.error("Javascript evaluator types must return only boolean values! This one returned "+f),{valid:!1,errorText:"Validator for "+c+" should have returned a bool, but returned "+f}):f?a:{valid:!1,errorText:c+" failed validation with value "+b}},regex:function(b,c,e){return"object"!==typeof e[0]||!1===e[0]instanceof RegExp?(console.error("Regex evaluator types must have a regex value for arg[0] but got "+
e[0]),{valid:!1,errorText:"Validator for "+c+" should be called with regex as arg[0]"}):"string"!==typeof b?(console.error("Regex can only be called on a string! Tried to call it on "+b+" for "+c),{valid:!1,errorText:"Broken validator. Regex for "+c+" wasn't called on a string"}):b.match(e[0])?a:{valid:!1,errorText:c+" failed regex validation with value "+b}},dateString:function(b,c){var e={valid:!1,errorText:c+" must be a date of the format mm/dd/yyyy."},f=b.match(/^(\d{1,2})\/(\d{1,2})\/(\d{2}|\d{4})$/);
if(null!==f){var g=+f[1],h=+f[3],f=new Date(h,g-1,+f[2]);return(""+f.getFullYear()).slice(-2)===(h+"").slice(-2)&&f.getMonth()===g-1?a:e}return e}};return{check:function(a){var d,e={valid:!0,errorText:{}},f,g;for(g in a)if(a.hasOwnProperty(g)){d=a[g];for(var h=0;h<d.validators.length;h++)if(f=d.validators[h],"undefined"===typeof f.disabled||!1===f.disabled)if("function"===typeof c[f.type]){var i=d.value,j=d.pretty||g,l=c[f.type](i,j,f.args||[]);l.valid?f.hasOwnProperty("chained")&&(l={},l[g]={pretty:j,
value:i,validators:f.chained},f=this.check(l),!1===f.valid&&(e.valid=!1,e.errorText[g]=e.errorText[g]||[],e.errorText[g]=e.errorText[g].concat(f.errorText[g]))):(e.valid=!1,e.errorText[g]=e.errorText[g]||[],e.errorText[g].push("undefined"===typeof f.failMsg?l.errorText.charAt(0).toUpperCase()+l.errorText.slice(1):f.failMsg))}else console.warn("You tried to use a validator that doesn't exist! The name you tried to use was: "+f.type)}return e}}}]);angular.module("viewer").controller("contentGate",["$scope","modal","currentUser","$location",function(a,c,b,d){a.signUpAndReturnToCourse=function(a){window.location.href="/account/auth#!/signup?next=%2Fcourse%2Fviewer%23!"+encodeURIComponent(d.path())+"&enroll="+encodeURIComponent(a)};a.signInAndReturnToCourse=function(a){window.location.href="/account/auth#!/signin?next=%2Fcourse%2Fviewer%23!"+encodeURIComponent(d.path())+"&enroll="+encodeURIComponent(a)};a.enrollInCourse=function(d){a.enrollRequestPending=
!0;b.enroll(d).then(function(){a.enrollRequestPending=!1;c.confirm()})}}]);angular.module("viewer").controller("imageQuizPanel",["$scope","lesson","imageQuiz","tidbits",function(a,c,b,d){a.attempts=0;a.correctlyAnswered=!1;a.status="unsubmitted";a.quizReturn=null;a.tidbitViewerMode="quiz-only";a.isTidbitAvailable=function(a){return a.completed||d.isTidbitRelevant(a,a.tidbit_ref.containingExercise.quiz_ref.binCodes)};a.isTidbitRelevant=function(b){return!a.isPlaying(b.tidbit_ref)&&a.quizReturn&&d.isTidbitRelevant(b,a.quizReturn.binCodes,!0)};a.isPlaying=function(b){return a.tidbit&&
b&&a.tidbit.key===b.key};a.submitQuiz=function(){b.submit()};a.getSubmitButtonLabel=function(){return"processing"===a.status?"Processing":"Submit Answer"};c.addEventListener("morselChange",function(){a.quizReturn=null;a.attempts=0;a.correctlyAnswered=!1;a.status="unsubmitted"},{replayLast:!0,removeOnDestructionOf:a});c.addEventListener("tidbitChange",function(b){a.tidbitViewerMode=d.getTidbitViewerMode(b.tidbit)},{replayLast:!0,removeOnDestructionOf:a});b.addEventListener("submitting",function(){a.status=
"processing";a.quizReturn=null});b.addEventListener("correct",function(b){a.attempts++;a.status="correct";a.correctlyAnswered=!0;a.quizReturn={status:"correct",text:b.comment,binCodes:b.binCodes}},{removeOnDestructionOf:a}).addEventListener("incorrect",function(b){a.attempts++;a.status="incorrect";a.quizReturn={status:"incorrect",text:b.comment,binCodes:b.binCodes}},{removeOnDestructionOf:a}).addEventListener("error",function(b){a.attempts++;a.status="error";a.quizReturn={status:"error",text:b.comment}},
{removeOnDestructionOf:a}).addEventListener("recorded",function(b){a.status="recorded";a.quizReturn={status:"recorded",text:b.comment}})}]);angular.module("viewer").controller("programmingQuizOutputPanel",["$scope","lesson","programmingQuiz","tidbits",function(a,c,b,d){a.status="unsubmitted";a.stdout=null;a.stderr=null;a.images=null;a.ready=!1;a.run=function(){b.run();a.status="processing";a.stdout=null;a.stderr=null;a.images=null};a.getSubmitButtonLabel=function(){return"processing"===a.status?"Processing":"Test Run"};a.reset=function(){window.confirm("Are you sure you want to reset to the original assignment stub?")&&b.reset()};c.addEventListener("morselChange",
function(){a.stdout=null;a.stderr=null;a.images=null;a.ready=!1;a.status="unsubmitted"},{replayLast:!0,removeOnDestructionOf:a});c.addEventListener("tidbitChange",function(b){a.tidbitViewerMode=d.getTidbitViewerMode(b.tidbit)},{replayLast:!0,removeOnDestructionOf:a});b.addEventListener("run",function(b){a.status="evaluated";a.stdout=b.result.stdout;a.stderr=b.result.stderr;a.images=b.result.images;if(!a.stdout&&!a.stderr&&(!a.images||0===a.images.length)&&!a.isEmbeddingIframe)a.stdout="Your code didn't display any output"},
{removeOnDestructionOf:a});b.addEventListener("runError",function(){a.stderr="The server encountered an error. Please try running again.";a.status="error"},{removeOnDestructionOf:a});b.addEventListener("ready",function(){a.ready=!0},{removeOnDestructionOf:a})}]);angular.module("viewer").controller("programmingQuizPanel",["$scope","lesson","programmingQuiz","tidbits",function(a,c,b,d){a.status="unsubmitted";a.quizReturn=null;a.attempts=0;a.answeredCorrectly=!1;a.submitProgrammingQuiz=function(){b.submit();a.status="processing";a.quizReturn=null};a.getSubmitButtonLabel=function(){return"processing"===a.status?"Processing":"Submit"};a.isTidbitAvailable=function(a){return a.completed||d.isTidbitRelevant(a,a.tidbit_ref.containingExercise.quiz_ref.binCodes)};a.isTidbitRelevant=
function(b){return!a.isPlaying(b.tidbit_ref)&&a.quizReturn&&d.isTidbitRelevant(b,a.quizReturn.binCodes,!0)};a.isPlaying=function(b){return a.tidbit&&b&&a.tidbit.key===b.key};c.addEventListener("morselChange",function(){a.status="unsubmitted";a.quizReturn=null;a.attempts=0;a.answeredCorrectly=!1},{replayLast:!0,removeOnDestructionOf:a});c.addEventListener("tidbitChange",function(b){a.tidbitViewerMode=d.getTidbitViewerMode(b.tidbit)},{replayLast:!0,removeOnDestructionOf:a});b.addEventListener("evaluated",
function(b){a.status="evaluated";a.attempts++;b=b.result;a.quizReturn={text:b.comment,binCodes:b.bin_codes};!0===b.passed?(a.quizReturn.status="correct",a.answeredCorrectly=!0):a.quizReturn.status=!1===b.passed?"incorrect":"recorded"},{removeOnDestructionOf:a});b.addEventListener("evaluationError",function(){a.status="error";a.attempts++;a.quizReturn={status:"incorrect",text:"There was an error grading your quiz, please try submitting again."}},{removeOnDestructionOf:a});b.addEventListener("submitting",
function(){a.status="processing";a.quizReturn=null})}]);angular.module("viewer").controller("videoPlayer",["$scope","lesson","youtubeVideoPlayer","viewerSettings",function(a,c,b,d){var e=!1;a.pauseVideo=function(){e&&b.pauseVideo()};a.obliterateVideo=function(){e&&b.destroyVideo()};a.playVideo=function(a,c){e?b.loadVideo(a.youtube_id,0):(b.attach(c.get(0),a.youtube_id,{autoPlay:d.get("autoPlay")?1:0}),e=!0)};b.addEventListener("apiReady",function(){c.addEventListener("pendingMorselChange",a.pauseVideo,{removeOnDestructionOf:a}).addEventListener("pendingLessonChange",
a.obliterateVideo,{removeOnDestructionOf:a}).addEventListener("pendingCourseChange",a.obliterateVideo,{removeOnDestructionOf:a});d.addEventListener("change",function(a){"autoPlay"===a.name&&(!1===a.oldValue&&!0===a.newValue&&e)&&b.playVideo()});b.addEventListener("ready",function(){a.loadingComplete(!0)},{removeOnDestructionOf:a});b.addEventListener("videoPlay",function(){a.loadingComplete(!0)},{removeOnDestructionOf:a})},{replayLast:!0,removeOnDestructionOf:a,removeAfterFired:!0})}]);angular.module("viewer").controller("viewerExam",["$scope","exams","modal","$window",function(a,c,b,d){a.confirmEndExam=function(a){c.terminateExam(a).then(function(){d.location.href="/"},function(){alert("Something went wrong. Please alert the proctor, and email proctoredexams@udacity.com.")})};a.endExam=function(a){b.activate("confirm",a).then(function(a){a&&alert(a.message)})}}]);angular.module("viewer").constant("loadingMessages",{general:"The instructor is setting up the classroom;Thanks for waiting while we prepare the classroom;The instructors are getting camera-ready for you;Waking up the sleepers in the front row...;And now for something completely different...;Dust off your slide-rule...;Cleaning the whiteboard;Adding duplication fluid to our ditto machine...;Reticulating Splines;Contemplating banana bread recipes;Once you have completed the course, cake will be served;Check the materials section for each class to find helpful course notes and other information from fellow Udacians!;Did you know you can meet other Udacians on the Forums?".split(";"),
ma006:["We recommend having a pencil and paper handy for this class."],ma008:["We recommend having a pencil and paper handy for this class."],st095:["We recommend having a pencil and paper handy for this class.",'Want to read about some fascinating real-world statistics? Check out Dan Ariely\'s book "Predictably Irrational"!']});angular.module("viewer").constant("videoViewedTimeThreshold",3).controller("viewerPage",["$scope","lesson","$location","$routeParams","lessonActivityTracker","$timeout","videoViewedTimeThreshold","youtubeVideoPlayer","viewerSettings","cacheVersion","loadingMessages","lessonPrefetcher","tags","libraryLoader","viewerPartialMap","examMode","techDetect","api","sessionLapsed","modal","currentUser","nodeUtility","canEditNotes","guidedTour","users","qualaroo","$log","universalAnalytics","NdUpSell","NDLite",
"FreeProjectTrial",function(a,c,b,d,e,f,g,h,i,j,l,k,m,n,p,q,r,s,w,v,t,u,y,L,M,G,H,I,N,J,C){function D(){var b;b=_.without(_.union(l.general,l[x]),null,void 0,"");a.viewerLoadingMessage=b[_.random(b.length-1)];a.isViewerLoading=!0}function B(a,b,c){if(a){var d=p[a.model];if(d){if(!c||d.extension)return"/templates/angular/viewer/partials/"+d.prefix+b+"?"+j}else console.error("Unrecognized morsel type "+a.model)}else if(!c)return"/templates/angular/viewer/partials/loading"+b+"?"+j}function E(a){f.cancel(A);
("Video"===a.model||"SketchVideo"===a.model)&&h.addEventListener("videoPlay",function(){f.cancel(A);A=f(F(a.key),1E3*g,!1)},{removeAfterFired:!0})}function F(a){return function(){if(h.getCurrentTime()>=g){var b=h.getCurrentTime();h.emitEvent("videoPause",b);h.emitEvent("videoPlay",b+1);c.markMorselAsCompleted(a)}else A=f(F(a),500,!1)}}a.modalsUrl="/templates/viewer/partials/viewer_modals.html?"+j;a.getCoachServicesUrl=function(){if(a.course)return"/conditional/tutoring?course_id="+window.encodeURIComponent(a.course.key)+
"&cache_bust="+j};a.userIsLoggedIn=t.userIsLoggedIn();a.canEditNotes=y;a.course=null;a.lessons=null;a.lesson=null;a.morsels=null;a.morsel=null;a.tidbit=null;var x=b.path().match("/"+m.course+"([^/]+)"),z=b.path().match("/"+m.lesson+"([^/]+)"),x=x?x[1]:null,z=z?z[1]:null;a.courseKeyFromUrl=x;a.lessonKeyFromUrl=z;x||(window.location.href="/");s.addEventListener("sessionExpired",function(){window.location.href="/account/auth#!/signin?next=%2Fcourse%2Fviewer%23!"+encodeURIComponent(b.path())});w&&(window.location.href=
"/account/auth#!/signin?next=%2Fcourse%2Fviewer%23!"+encodeURIComponent(b.path()));C.fetchFreeTrialComplete(x).then(function(a){a.trialing&&a.projectComplete&&C.installPaywallModal(a,x,z)});c.addEventListener("lessonPermissionDenied",function(){window.location.href="/course/"+x});c.addEventListener("courseChange",function(a){if((!a.lessons||0===a.lessons.length)&&!a.lastLessonVisited&&!d.lessonKey)window.location.href="/course/"+x}).addEventListener("coursePermissionDenied",function(){d.lessonKey||
(window.location.href="/course/"+x)});c.addEventListener("lessonChange",function(a){if(!a.morsels||0===a.morsels.length)window.location.href="/course/"+x});a.isViewerLoading=!0;c.addEventListener("courseChange",function(){n.loadLibraries(["codemirror","mathquill"]).then(function(){},function(){H.error("Classroom failed to load a required library");alert("Failed to load some required parts of the course! Please refresh the page. If this issue persists, please contact support@udacity.com. Thanks!")})}).addEventListener("morselChange",
function(){a.isViewerLoading=!1});c.addEventListener("courseChange",function(b){a.course=b.course;a.lessons=b.lessons;a.enrollment=_.find(t.get("_enrollments"),function(a){return a.node_key===b.course.key});a.premiumAccess=u.hasPermissionTo(a.course,"view-paid-supplemental-media")||a.enrollment&&(u.isCurrentEnrolled(a.enrollment,b.course)||u.isGraduated(a.enrollment,b.course));G.set({isPaid:a.premiumAccess?"yes":"no"})},{replayLast:!0,removeOnDestructionOf:a}).addEventListener("lessonChange",function(b){a.lesson=
b.lesson;a.morsels=b.morsels},{replayLast:!0,removeOnDestructionOf:a}).addEventListener("morselChange",function(b){a.morsel=b;E(b)},{replayLast:!0}).addEventListener("tidbitChange",function(b){(a.tidbit=b.tidbit)&&E(b.tidbit)},{replayLast:!0});c.addEventListener("pendingLessonChange",function(){a.morsels=null;a.morsel=null;a.tidbit=null});a.$on("$routeChangeSuccess",function(b,f,h){if(b=!d.morselKey)if(!h||!f)b=!1;else{var g=h.pathParams,f=f.pathParams;if(_.keys(g).length===_.keys(f).length)b=!1;
else{var i=!0;_.each(f,function(a,b){g[b]!==a&&(i=!1)});b=i}}b&&window.history.back();d.courseKey&&d.courseKey!==x&&window.location.reload();h&&I.trackVirtualPageView();if((null===a.course||a.course.key!==d.courseKey)&&"none"!==d.courseKey)D(),c.addEventListener("courseChange",function(b){d.lessonKey||(b.lastLessonVisited?a.goToLesson(b.lastLessonVisited.key):a.goToLesson(b.lessons[0].key))},{removeAfterFired:!0}),c.changeCourse(d.courseKey);if((null===a.lesson||a.lesson.key!==d.lessonKey)&&d.lessonKey)D(),
c.addEventListener("lessonChange",function(b){d.morselKey||(b.lastMorselVisited?a.goToMorsel(b.lastMorselVisited):a.goToMorsel(b.morsels[0]))},{removeAfterFired:!0}),c.changeLesson(d.lessonKey);if((null===a.morsel||a.morsel.key!==d.morselKey)&&d.morselKey)e.logNodeVisit("morsel"),a.lesson&&a.lesson.key===d.lessonKey?c.changeMorsel(d.morselKey):c.addEventListener("lessonChange",function(){c.changeMorsel(d.morselKey)},{removeAfterFired:!0});if(null===a.tidbit||a.tidbit.key!==d.tidbitKey)d.tidbitKey&&
e.logNodeVisit("tidbit"),a.morsel&&a.morsel.key===d.morselKey?c.changeTidbit(d.tidbitKey):c.addEventListener("morselChange",function(){c.changeTidbit(d.tidbitKey)},{removeAfterFired:!0})});a.alert=function(a){alert(a)};a.log=function(a){console.log(a)};a.getCurrentMorselType=function(){return a.morsel?a.morsel.model:null};a.getStyleClassesForMorsel=function(b){var c="";if(a.morsel)if("Exercise"===b.model){if(b.completed||b.lecture_ref&&b.lecture_ref.completed)c+="is-viewed";if(b.key===(a.morsel.containingExercise?
a.morsel.containingExercise.key:a.morsel.key))c+=" is-current"}else b.completed&&(c+="is-viewed"),a.morsel.key===b.key&&(c+=" is-current");return c};a.getPlayerPartialForCurrentMorsel=function(){return B(a.morsel,"_player.html")};a.getPlayerExtensionPartialForCurrentMorsel=function(){return B(a.morsel,"_extension.html",!0)};a.getSidePanelPartialForCurrentMorsel=function(){return B(a.morsel,"_side_panel.html")};a.goToMorsel=function(e){(!e||!e.key)&&console.error("Cannot go to invalid morsel "+e);
(!a.morsel||e.key!==a.morsel.key)&&f(function(){if("Exercise"===e.model){var a=e.lecture_ref||e.quiz_ref;c.announcePendingMorselChange(a);b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.exercise+e.key+"/"+m.morsel+a.key)}else c.announcePendingMorselChange(e),e.containingExercise?b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.exercise+e.containingExercise.key+"/"+m.morsel+e.key):b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.morsel+e.key)})};a.goToTidbit=
function(c){!c&&a.tidbit?d.exerciseKey?b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.exercise+d.exerciseKey+"/"+m.morsel+d.morselKey):b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.morsel+d.morselKey):(!a.tidbit||c.key!==a.tidbit.key)&&f(function(){b.path("/"+m.course+d.courseKey+"/"+m.lesson+d.lessonKey+"/"+m.exercise+c.containingExercise.key+"/"+m.morsel+c.containingExercise.quiz_ref.key+"/"+m.tidbit+c.key)})};a.goToNextMorsel=function(){var b=a.morsel,c=a.morsels.length;
b.containingExercise&&(b=b.containingExercise);b=b.indexInLesson;b<c-1?a.goToMorsel(a.morsels[b+1]):(h.pauseVideo(),a.course?t.userIsLoggedIn()?a.lessons&&a.lesson.key===a.lessons[a.lessons.length-1].key?(a.enrollment=_.find(t.get("_enrollments"),function(b){return b.node_key===a.course.key}),v.activate("endOfCourse",{courseIsComplete:a.course.catalog_entry.complete,courseKey:a.course.key,isPaidEnrolled:u.isCurrentEnrolled(a.enrollment,a.course),isGraduated:u.isGraduated(a.enrollment,a.course)})):
v.activate("endOfLesson",{lessonKey:a.lesson.key,userIsLoggedIn:t.userIsLoggedIn()}):v.activate("endOfLessonSignInGate",{lessonKey:a.lesson.key,userIsLoggedIn:t.userIsLoggedIn()}):v.activate("endOfIsolatedContent"))};a.goToPreviousMorsel=function(){var b=a.morsel;b.containingExercise&&(b=b.containingExercise);b=b.indexInLesson;0<b?a.goToMorsel(a.morsels[b-1]):console.error("Can't go to previous; at beginning of lesson")};a.goToLesson=function(e){if(!a.lesson||e!==a.lesson.key)c.announcePendingLessonChange(),
f(function(){b.path("/"+m.course+d.courseKey+"/"+m.lesson+e)})};a.goToNextLesson=function(){if(a.lessons){var b=a.lessons.length,c=_.find(a.lessons,function(b){return b.key===a.lesson.key}).indexInCourse;0<=c&&c<b-1?a.goToLesson(a.lessons[c+1].key):console.error("Can't go to next; at end of course!")}else console.error("Can't go to next lesson, we're not in a course!")};a.os=r.os(!1);var K=J.lessonIsCareerProject;a.shouldShowLesson=function(b){if(b=K(b))b=a.enrollment?(b=a.enrollment.product_variant)?
"lite"===b.toLowerCase():!1:!1;return!b};a.isActiveMorsel=function(b){return a.morsel&&a.morsel.key===b};a.getProgressPercentage=function(){return 77};var A}]);angular.module("viewer").controller("viewerPlayer",["$scope","lesson","$timeout","$window","currentUser","userTrials",function(a,c,b,d,e,f){a.isPlayerLoading=!0;d=function(a){var b=["attempt-1","attempt-2","control"],a=_.reduce(("skip-button-test-"+a).split(""),function(a,b){return(37*a+b.charCodeAt(0))%1009},0);return b[a%b.length]};a.skipButtonTrial=e.userIsLoggedIn()?f.getOrEnrollManually("skip_button_trial",d,[e.get("key")]):"excluded";a.loadingComplete=function(c){c?b(function(){a.$apply(function(){a.isPlayerLoading=
!1})},0,!1):a.isPlayerLoading=!1};c.addEventListener("pendingMorselChange",function(b){a.isPlayerLoading=b.from&&("Video"===b.from.model||"SketchVideo"===b.from.model)&&("Video"===b.to.model||"SketchVideo"===b.to.model)?!1:b.from&&b.from.key===b.to.key?!1:!0})}]);angular.module("page.viewer",["viewer"]).config(["$routeProvider","tags",function(a,c){a.when("/"+c.course+":courseKey/"+c.lesson+":lessonKey/"+c.exercise+":exerciseKey/"+c.morsel+":morselKey/"+c.tidbit+":tidbitKey",{}).when("/"+c.course+":courseKey/"+c.lesson+":lessonKey/"+c.exercise+":exerciseKey/"+c.morsel+":morselKey",{}).when("/"+c.course+":courseKey/"+c.lesson+":lessonKey/"+c.morsel+":morselKey",{}).when("/"+c.course+":courseKey/"+c.lesson+":lessonKey",{}).when("/"+c.course+":courseKey",{})}]);angular.module("viewer").directive("bsDropdownCloser",function(){return{restrict:"A",link:function(a,c){c.on("click",function(){$(c).closest(".dropdown").removeClass("open")})}}});angular.module("viewer").directive("codeMirrorEditor",["codeMirror","codeEditor",function(a,c){return{restrict:"A",priority:3,link:function(b,d,e){a.attach(d.get(0),{language:e.language,theme:e.theme,autofocus:!0});b.fileCount=null;c.addEventListener("filesLoaded",function(a){b.fileCount=a.files.length},{removeOnDestructionOf:b});b.getActiveLanguage=function(){return a.getActiveLanguage()};b.getAvailableLanguages=function(){return a.getAvailableLanguages()};b.setActiveLanguage=function(b){a.setActiveLanguage(b)};
b.$on("$destroy",function(){a.detach()})}}}]);angular.module("viewer").directive("contentGateWatcher",["lesson","currentUser","imageQuiz","programmingQuiz","$location","modal",function(a,c,b,d,e,f){return{restrict:"A",link:function(e){var h=c.userIsLoggedIn(),i=!1,j=function(){b.removeEventListener("correct",j);d.removeEventListener("evaluated",l);h?f.activate("enrollGate"):f.activate("signInGate")},l=function(a){a.result&&a.result.passed&&j()},k=function(){b.addEventListener("correct",j);d.addEventListener("evaluated",l)};a.addEventListener("courseChange",
function(a){a=a.course;i=a._enrollable&&!(h&&c.isEnrolledIn(a.key));e.showGate=e.showGate&&i;i&&k()},{replayLast:!0,removeAfterFired:!0,removeOnDestructionOf:e});e.$on("$routeChangeSuccess",function(){if(f.isModalActive("enrollGate")||f.isModalActive("signInGate"))f.cancel(),k()})}}}]);angular.module("viewer").directive("editorFileTabs",["codeEditor",function(a){return{restrict:"A",link:function(c){c.files=null;c.currentFilename=null;a.addEventListener("filesLoaded",function(a){c.files=a.files},{removeOnDestructionOf:c});a.addEventListener("activeFileChanged",function(a){c.currentFilename=a.newActiveFile.name},{removeOnDestructionOf:c});c.switchToFile=function(b){c.currentFilename=b;a.switchToFile(b)}}}}]);angular.module("viewer").directive("examDoneButton",[function(){return{restrict:"A",controller:["$scope","$routeParams","api",function(a,c,b){a.busy=!1;a.leaveExam=function(){a.busy=!0;b.post("/users/me/leave_exam",{exam_key:c.lessonKey}).success(function(){alert("Your exam is done. You will be redirected to the home page.");window.location.href="/"}).error(function(b,c){a.busy=!1;alert("Failed to close exam (error "+c+").  Please try again.")})}}]}}]);angular.module("viewer").directive("examNanny",["examMode","$http","$timeout","$routeParams","exams",function(a,c,b,d,e){return{restrict:"A",controller:["$scope",function(b){var c=!1,h=!1,i=function(){d.lessonKey&&e.getTimeRemaining(d.lessonKey).then(function(a){a=a.seconds_remaining;900>a&&(840<a&&!c)&&(alert("You have 15 minutes remaining."),c=!0);300>a&&(240<a&&!h)&&(alert("You have 5 minutes remaining."),h=!0);0>=a&&(alert("Time is up! You will now be directed to the home page."),window.location.href=
"/")},function(a){403===a.status?(alert("You do not have permission to view this exam! You will now be directed to the home page."),window.location.href="/"):404===a.status&&(alert("You are not registered for this exam. Redirecting to the registration page"),window.location.href="/content/exam")})};a&&(setInterval(i,15E3),b.$on("$routeChangeSuccess",function(){i()}))}]}}]);angular.module("viewer").service("FreeProjectTrial",["$q","$window","currentUser","projects","lesson","youtubeVideoPlayer","customers","modal",function(a,c,b,d,e,f,g,h){var i=[void 0,null,"6790468080","6867941825","6863708895","5827851013","6870492304","4","7","6"],j=function(a,d,e){analytics.track("CTA Displayed",{cta_key:"START_ND_AFTER_P0",degree_key:d,degree_variant:"STANDARD"},c.segmentPageProperties);var f=_.contains(i,e),a={reviewUrl:a,user:b.getUser(),nodeWhitelisted:f,courseKey:d};return h.activate("endOfFreeProjectTrial",
a).then(function(){f||(c.location.href="/me")}).catch(function(){analytics.track("CTA Dismissed",{cta_key:"START_ND_AFTER_P0",degree_key:d,degree_variant:"STANDARD"},c.segmentPageProperties,function(){c.location.href="/me"})})};return{fetchFreeTrialComplete:function(c){if("nd001b"!==c||!b.userIsLoggedIn())return a.reject();var c=g.get(b.getUser().key).then(function(a){var b=!0;a&&a.subscriptions&&(b=_.any(a.subscriptions,function(a){return"trialing"===a.status&&"nd001b"===a.plan.metadata.sku}));return{trialing:b}}).catch(function(){return{trialing:!0}}),
e=d.getSubmissionsBySearch({node_key:"6790468080",student_key:b.getUser().key,is_complete:!0}).then(function(a){return(a=_.find(a.submissions,function(a){if(a.project_report._passed&&a._review_link)return!0}))?{projectComplete:!0,reviewUrl:a._review_link}:{projectComplete:!1}});return a.all({subscriptions:c,submissions:e}).then(function(a){return _.extend({},a.subscriptions,a.submissions)})},installPaywallModal:function(a,b,c){f.addEventListener("videoPlay",function(){f.pauseVideo()},{removeAfterFired:!0});
j(a.reviewUrl,b,c).then(function(){e.addEventListener("lessonChange",function(c){f.addEventListener("videoPlay",function(){f.pauseVideo()},{removeAfterFired:!0});j(a.reviewUrl,b,c.lesson.key)})})}}}]).controller("freeTrialPaywall",["$scope","$window","modal",function(a,c,b){function d(b,d){analytics.track(b,{cta_key:"START_ND_AFTER_P0",degree_key:a.getData().courseKey,degree_variant:"STANDARD"},c.segmentPageProperties,function(){d&&(c.location.href=d)})}a.learnMore=function(){analytics.track("CTA Interacted",
{interaction:"learn_more",cta_key:"START_ND_AFTER_P0",degree_key:a.getData().courseKey,degree_variant:"STANDARD"},c.segmentPageProperties);b.confirm()};a.goHome=function(){d("CTA Dismissed","/me")};a.subscribe=function(){d("CTA Clicked","/checkout#!/0?products=4618472028635136&endTrial=true")};a.showReview=function(){analytics.track("CTA Interacted",{interaction:"show_review",cta_key:"START_ND_AFTER_P0",degree_key:a.getData().courseKey,degree_variant:"STANDARD"},c.segmentPageProperties);c.open(a.getData().reviewUrl)}}]);angular.module("viewer").directive("iframeCommander",["iframeEvaluator","isTrustedDomain","lesson",function(a,c,b){return{restrict:"A",link:function(d,e){function f(){var a;window.location.origin||(a=window.location,a=a.protocol+"//"+a.hostname+(a.port?":"+a.port:""));return window.location.origin||a}d.isEmbeddingIframe=!1;var g=e.find(".output-iframe-container");a.addEventListener("newEvaluation",function(a){a=a.iframeUrl?a.iframeUrl:"/content/frame/grade?node=Node."+a.nodeId;g.empty();g.append($("<iframe />",
{src:a,"class":"output-iframe"}));d.isEmbeddingIframe=!0},{removeOnDestructionOf:d});a.addEventListener("postMessageRequest",function(a){if(c(f())){var b=a.iframeUrl?a.iframeUrl:f();g.find(".output-iframe").get(0).contentWindow.postMessage(JSON.stringify({parts:a.submission.parts,operation:a.submission.operation,messageType:"evaluate"}),b);d.isEmbeddingIframe=!0}},{removeOnDestructionOf:d});b.addEventListener("pendingMorselChange",function(){g.empty();d.isEmbeddingIframe=!1},{removeOnDestructionOf:d})}}}]);angular.module("viewer").directive("iframePlayer",["lesson","$sce",function(a,c){return{restrict:"A",link:function(b,d){a.addEventListener("morselChange",function(a){"EmbeddedFrame"===a.model&&(b.iframeSourceUrl=c.trustAsResourceUrl(a.external_uri),$(d.get(0).contentWindow).ready(function(){b.loadingComplete(!0)}))},{replayLast:!0,removeOnDestructionOf:b})}}}]);angular.module("viewer").directive("imageFormQuiz",["lesson","$routeParams","imageQuiz","tidbits","viewerSettings","cacheVersion",function(a,c,b,d,e,f){return{restrict:"A",templateUrl:"/templates/viewer/partials/image_form_quiz.html?"+f,link:function(c){b.addEventListener("ready",function(){c.loadingComplete(!0)},{removeOnDestructionOf:c});a.addEventListener("morselChange",function(a){"ImageFormQuiz"===a.model&&(a=$.extend({},a),c.progressLoaded=!1,c.tidbitViewerMode="quiz-only",b.setQuiz(a),c.getQuiz=
b.getQuiz,c.answers=b.answers,c.radioGroupAnswers=b.radioGroupAnswers)},{replayLast:!0,removeOnDestructionOf:c});a.addEventListener("tidbitChange",function(a){c.tidbitViewerMode=d.getTidbitViewerMode(a.tidbit)},{replayLast:!0,removeOnDestructionOf:c})}}}]);angular.module("viewer").directive("instructorNotes",["cacheVersion","canEditNotes",function(a,c){return{restrict:"A",templateUrl:"/templates/viewer/partials/instructor_notes.html?"+a,scope:!0,controller:["$scope",function(a){a.canEdit=c}]}}]);angular.module("viewer").directive("lessonVideoPlayer",["lesson","youtubeVideoPlayer","currentUser",function(a,c,b){return{restrict:"A",controller:"videoPlayer",link:function(d,e){var f=null;c.addEventListener("apiReady",function(){a.addEventListener("morselChange",function(a){f=a;a._video&&d.playVideo(a._video,e)},{replayLast:!0,removeOnDestructionOf:d});c.addEventListener("videoEnd",function(){if(!b.get("site_preferences")||b.get("site_preferences").auto_advance)f.containingExercise&&f.containingExercise.quiz_ref&&
(!f.containingExercise.answer_ref||f.containingExercise.answer_ref.key!==f.key)?d.goToMorsel(f.containingExercise.quiz_ref):d.goToNextMorsel()},{removeOnDestructionOf:d})},{replayLast:!0,removeOnDestructionOf:d,removeAfterFired:!0})}}}]);angular.module("viewer").directive("mathquillTextfield",["imageQuiz","libraryLoader",function(a,c){return{restrict:"A",link:function(b,d){c.loadLibraries(["mathquill"]).then(function(){d.mathquill("editable");d.focusout(function(){a.answers[b.widget.marker]=d.mathquill("latex")});b.$watch(function(){if(b.widget)return a.answers[b.widget.marker]},function(a){d.mathquill("latex",a)})})}}}]);angular.module("viewer").directive("nodeNotesEditor",["$http","$timeout",function(a,c){return{restrict:"A",template:'<textarea class="input-block-level form-control" data-ng-model="morsel[fieldName]" style="min-height: 100px"></textarea><button class="btn btn-sm btn-default" data-ng-click="saveNodeText()">Save Notes</button>',scope:{morsel:"=",fieldName:"="},link:function(b){b.saveNodeText=function(){if("owner_comments"!==b.fieldName||window.confirm("Instructor notes are viewable by all students! Are you sure you want to save?")){var d=
[{model:b.morsel.model,key:b.morsel.key,last_edit_time:b.morsel.last_edit_time}];d[0][b.fieldName]=b.morsel[b.fieldName];var d={nodes:d},e=b.morsel[b.fieldName];b.morsel[b.fieldName]="Saving...";a.post("/api/nodes",d).success(function(a){b.morsel[b.fieldName]="Successfully saved!!";c(function(){angular.extend(b.morsel,a.references.Node[b.morsel.key])},2E3)}).error(function(a){alert("Sorry, the update failed. Please copy your text out of the window, refresh the page, and try again.");b.morsel[b.fieldName]=
e;console.warn("Update failed!",a)})}}}}}]);angular.module("viewer").directive("playerLoadingMask",function(){return{restrict:"A",transclude:!0,template:'<div class="player-loading-overlay" data-ng-show="isPlayerLoading" data-fade-out="200"><div class="player-loading-overlay-message"><img alt="Loading..." src="//lh5.ggpht.com/b3OandPWsUWAnRVS5d8JS8OL0nu8dU2d3NceS7p1yKhPl9KD4EhqeylPm7yFbft5wmsA2VCAZ-8wAkmFduXJ=s0#w=90&h=30"></div></div><div data-ng-transclude></div>',link:function(a,c){c.addClass("player-loading-mask")}}});angular.module("viewer").directive("programmingQuizPlayer",["codeMirror","lesson","$routeParams","programmingQuiz","tidbits",function(a,c,b,d,e){return{restrict:"A",priority:10,link:function(b,g){b.getClasses=function(){var a=[b.tidbitViewerMode];1<b.fileCount&&a.push("multi-file");return a};d.addEventListener("ready",function(){b.loadingComplete()},{removeOnDestructionOf:b});a.addEventListener("attached",function(){c.addEventListener("morselChange",function(a){"ProgrammingQuiz"===a.model&&(b.loading=
!0,a=$.extend({},a),d.init(a))},{replayLast:!0,removeOnDestructionOf:b})},{removeOnDestructionOf:b,removeAfterFired:!0});c.addEventListener("tidbitChange",function(a){b.tidbitViewerMode=e.getTidbitViewerMode(a.tidbit)},{replayLast:!0,removeOnDestructionOf:b});var h=g.find(".code-mirror-holder"),i=g.find(".editor-file-tabs"),j=function(){h.outerHeight(g.height()-(b.files&&1<b.files.length?i.outerHeight():0))},l=_.debounce(j,750),k=_.throttle(j,200);$(window).on("resize",l);$(window).on("resize",k);
b.$watch("files",function(){window.setTimeout(k,0)});j()}}}]);angular.module("viewer").directive("quizVideoPlayer",["lesson","youtubeVideoPlayer","currentUser",function(a,c,b){return{restrict:"A",controller:"videoPlayer",link:function(d,e){var f=null;c.addEventListener("apiReady",function(){a.addEventListener("tidbitChange",function(a){(a=(f=a.tidbit)?f._video:null)?d.playVideo(a,e):d.pauseVideo()},{replayLast:!0,removeOnDestructionOf:d});c.addEventListener("videoEnd",function(){(!b.get("sitePreferences")||b.get("sitePreferences").autoAdvance)&&f&&f.containingExercise&&
f.containingExercise.answer_ref&&f.containingExercise.answer_ref.key===f.key?d.goToNextMorsel():d.goToTidbit(null)},{removeOnDestructionOf:d})},{replayLast:!0,removeOnDestructionOf:d,removeAfterFired:!0})}}}]);angular.module("viewer").directive("quizWidget",function(){return{restrict:"A",link:function(a,c){var b=!0;a.$watch("widget",function(a,e){b&&e&&(c.css({top:100*e.placement.y+"%",left:100*e.placement.x+"%"}),"TextInputWidget"===e.model||"NumericInputWidget"===e.model?(c.width(100*e.placement.width+"%"),c.height(100*e.placement.height+"%")):"MathInputWidget"===e.model&&c.css({"min-width":100*e.placement.width+"%","min-height":100*e.placement.height+"%"}),b=!1)})}}});angular.module("viewer").directive("readingPlayer",["lesson",function(a){return{restrict:"A",link:function(c){a.addEventListener("morselChange",function(a){"Reading"===a.model&&(c.textFrameContent=a.text,c.loadingComplete())},{replayLast:!0,removeOnDestructionOf:c})}}}]);angular.module("viewer").controller("UpsellController",["currentUser","cookieJar","nodeUtility","cacheVersion","products","siteExperience","$q","dateTime","$location","$window","$timeout","modal","GaTechCourseKeys","FreeToNdCourseMap","NdCourseNames","NdUpSell",function(a,c,b,d,e,f,g,h,i,j,l,k,m,n,p,q){this.shouldShowBanner=!1;this.ndKey=q.getNdKey(this.course.key);this.ndCourseTitle=p[this.ndKey];this.setTag=function(a){return q.setTag(a)};this.closeBanner=function(){analytics.track("CTA Dismissed",
{cta_key:"CLS_SDBR_AD",degree_key:this.ndKey},j.segmentPageProperties);this.setTag(this.course.key);this.shouldShowBanner=!1};this.trackAndGoToNdop=function(){analytics.track("CTA Clicked",{cta_key:"CLS_SDBR_AD",degree_key:this.ndKey},j.segmentPageProperties);this.setTag(this.course.key);window.location=q.getCourseUrl(p[this.ndKey],this.ndKey)};this.course&&this.course.key&&q.shouldShowBanner(this.course.key).then(function(a){this.shouldShowBanner=a}.bind(this))}]).factory("NdUpSell",["GaTechCourseKeys",
"currentUser","FreeToNdCourseMap","NdCourseNames",function(a,c,b,d){var e=function(a){return(a=b[a])?a.nd:!1},f=function(a){a=e(a);return!a?!1:"upsell"+a+"seen"},g=function(a,b){return"/course/"+a.toLowerCase().split(" ").join("-")+"--"+b};return{shouldShowBanner:function(b){return c.getTags().then(function(i){var j=e(b);if(!j)return!1;var l=f(b),k=d[j];g(k,j);var m=_.pluck(i.data&&i.data.tags||[],"tag");c.getEnrolledNanodegreeKeys();var i=_.contains(a,b),n=/^nd/.test(b),l=_.contains(m,l);return!i&&
(!n&&!l)&&k?(analytics.track("CTA Displayed",{cta_key:"CLS_SDBR_AD",degree_key:j}),!0):!1})},getCourseUrl:g,setTag:function(a){a=f(a);return c.setTag("course",a)},getNdKey:e}}]).directive("sidePanelUpsell",["currentUser","cookieJar","nodeUtility","cacheVersion","products","siteExperience","$q","dateTime","$location","$window","$timeout",function(a,c,b,d){return{restrict:"EA",scope:{course:"="},bindToController:!0,controller:"UpsellController",controllerAs:"vm",templateUrl:"/templates/viewer/partials/side_panel_upsell.html?"+
d}}]).animation(".banner-fade",["$animateCss",function(a){return{enter:function(c){return a(c,{from:{opacity:0},to:{opacity:1},duration:0.4})},leave:function(c){return a(c,{from:{opacity:1},to:{opacity:0},duration:0.4})}}}]);angular.module("viewer").directive("supplementalMaterialsList",["cacheVersion",function(a){return{templateUrl:"/templates/viewer/partials/supplemental_materials_list.html?"+a}}]);angular.module("viewer").directive("viewerDiscussions",["lesson","$http","cacheVersion","siteExperience","fetchDiscourseLink","currentUser","nodeUtility",function(a,c,b,d,e,f,g){return{restrict:"A",templateUrl:"/templates/viewer/partials/viewer_discussions.html?"+b,controller:["$scope","$attrs","examMode",function(b,c,j){b.examMode=j;b.postsStartIndex=0;b.postsEndIndex=0;b.limitedAccess=d.limitedAccess;b.affiliateExperienceId=d.affiliateExperienceId;a.addEventListener("courseChange",function(c){b.course=
c.course;f.isUserEnrolledInCourseThroughND(b.course).then(function(a){b.isNanodegreeAssociatedCourse=a});a.addEventListener("morselChange",function(a){b.morsel=a;b.course&&b.morsel&&!b.limitedAccess&&(b.seeAllCoursePostsUrl="http://discussions.udacity.com/c/standalone-courses/"+b.course.forum_slug,b.askAQuestionUrl="http://discussions.udacity.com/c/standalone-courses/"+b.course.forum_slug+"/create",b.enrollment=_.find(f.get("_enrollments"),function(a){return a.node_key===b.course.key}),b.isPaidCourse=
g.hasPermissionTo(b.course,"view-paid-supplemental-media")||b.enrollment&&(g.isCurrentEnrolled(b.enrollment,b.course)||g.isGraduated(b.enrollment,b.course)),e(b.course.key,b.lesson.key).then(function(a){b.discourseCohortUrl=a}));"Degree"===c.course._semantic_type&&(b.isNDorCA=!0)},{replayLast:!0,removeOnDestructionOf:b})},{replayLast:!0,removeAfterFired:!0})}]}}]);angular.module("viewer").directive("viewerFeedback",["validator","recordActivity","cacheVersion","lesson","lessonContentContext","techDetect","youtubeVideoPlayer",function(a,c,b,d,e,f,g){return{templateUrl:"/templates/viewer/partials/viewer_feedback.html?"+b,controller:["$scope","modal",function(b,d){b.form={feedbackReason:{value:null,validators:[{type:"required",failMsg:"Please select the type of feedback you wish to give."}]},feedbackExplanation:{value:null,validators:[{type:"javascript",args:[function(a,
b){return"other"!==b.form.feedbackReason.value?!0:"string"===typeof a&&""!==a.replace(/\s+/,"")},b],failMsg:"Please explain the issue you're having."}]}};b.formValidationResults={valid:!0,errorText:{}};var j=[{name:"Video Problem",code:"videoProblem",explanation:"e.g. text is unreadable, video doesn\u2019t play"},{name:"Mistake",code:"mistake",explanation:"e.g. instructor made an error"},{name:"Subtitle Problem",code:"subtitleProblem",explanation:"e.g. subtitles do not match what is said"},{name:"Confusing content",
code:"confusingContent",explanation:"e.g. course material is not explained correctly"}],l=[{name:"Instructions are unclear in a video or question.",code:"instructionsUnclear",explanation:"Did you check the instructor notes below the video player?"},{name:"A correct answer is not accepted.",code:"correctAnswerNotAccepted",explanation:"Did you check the discussions for additional help?"},{name:"Feedback on submitted answer is not useful.",code:"gradingFeedbackUnhelpful"},{name:"Answer video is unclear.",
code:"answerVideoUnclear"},{name:"A link is broken or directs to the wrong site.",code:"brokenLink"},{name:"There is a problem with the download code file(s).",code:"supplementalMaterialIssue"}],k=[{name:"Instructions are unclear in a video or question.",code:"instructionsUnclear",explanation:"Did you check the instructor notes below?"},{name:"A link is broken or directs to the wrong site.",code:"brokenLink"},{name:"There is a problem with the download code file(s).",code:"supplementalMaterialIssue"}];
b.submitFeedbackClicked=!1;b.showFeedbackDialog=function(){b.submitFeedbackClicked=!0;b.morselTitle=b.morsel.title;"Video"===b.morsel.model?(g.pauseVideo(),b.feedbackOptions=j):b.feedbackOptions="ImageFormQuiz"===b.morsel.model||"ProgrammingQuiz"===b.morsel.model?l:k;d.activate("feedback")};var m=function(a){for(var a=_.pairs(a),b={},c=0;c<a.length;++c){var d=a[c][0],e=a[c][1];if(_.isObject(e))for(var e=_.pairs(m(e)),f=0;f<e.length;++f)b[d+"."+e[f][0]]=e[f][1];else void 0!==e&&null!==e&&(b[d]=e)}return b};
b.feedbackSubmitted=!1;b.submitFeedback=function(){b.feedbackSubmitted=!0;b.formValidationResults=a.check(b.form);if(b.formValidationResults.valid){var j=[{context:e.getCurrent(),data:{model:"SurveyResponse",survey_name:"LessonFeedbackVersion2"}}],k={reason:b.form.feedbackReason.value,explanation:b.form.feedbackExplanation.value,techDetect:f.getAllTech(),currentUrl:window.location.href};"Video"===b.morsel.model&&(k=_.extend(k,{youtube:{availablePlaybackRates:g.getAvailablePlaybackRates(),currentPlaybackRate:g.getCurrentPlaybackRate(),
currentTime:g.getCurrentTime()}}));k=m(k);j[0].data.items=_.map(_.pairs(k),function(a){return{name:a[0],content:a[1]}});c.send(j);d.confirm();b.form.feedbackReason.value=null;b.form.feedbackExplanation.value=null;d.activate("feedback-confirmation").then(function(){"Video"===b.morsel.model&&g.playVideo()})}}}]}}]);angular.module("viewer").factory("codeEditor",["mixin","codeMirror","libraryLoader",function(a,c,b){function d(a){return-1!==a.indexOf(".c")?"c":-1!==a.indexOf(".cpp")?"cpp":-1!==a.indexOf(".css")?"css":-1!==a.indexOf(".cu")?"cuda":-1!==a.indexOf(".e")?"specman":-1!==a.indexOf(".glsl")?"glsl":-1!==a.indexOf(".html")?"html":-1!==a.indexOf(".java")?"java":-1!==a.indexOf(".js")?"javascript":-1!==a.indexOf(".json")?"javascript":-1!==a.indexOf(".m")?"octave":-1!==a.indexOf(".ocl")?"ocl":-1!==a.indexOf(".py")?
"python":-1!==a.indexOf(".r")?"r":-1!==a.indexOf(".swift")?"swift":-1!==a.indexOf(".xml")?"xml":"plaintext"}function e(a){a&&(g=a,c.setActiveLanguage(d(a.name)),c.setContents(a.text),"javascript"===d(a.name)?b.loadLibraries(["codemirror","jshint"]).then(function(){c.setOptions({gutters:["CodeMirror-lint-markers"],lintWith:CodeMirror.javascriptValidator})}):c.setOptions({gutters:[],lintWith:null}),h.emitEvent("activeFileChanged",{newActiveFile:a}))}var f=null,g=null,h={loadFiles:function(a){var c=
!0;_.each(a,function(a){if(!_.isObject(a)||!a.name||!a.hasOwnProperty("text"))c=!1,console.error("Failed to load files. Invalid file: ",a)});if(c)return b.loadLibraries(["codemirror"]).then(function(){f=_.map(a,function(a){return{name:a.name,text:a.text}});e(f[0]);h.emitEvent("filesLoaded",{files:f})})},getAllFiles:function(){g.text=c.getContents();return f},switchToFile:function(a){g.text=c.getContents();e(_.find(f,function(b){return b.name===a}))}};return a.eventEmission(h,["filesLoaded","activeFileChanged"])}]);angular.module("viewer").service("codeMirror",["mixin","libraryLoader",function(a,c){var b=null,d=null,e={python:{name:"python",version:2,singleLineStringErrors:!1},c:"text/x-csrc",cuda:"text/x-cudasrc",cpp:"text/x-c++src",css:"text/css",java:"text/x-java",javascript:"text/javascript",glsl:"text/x-glsl",html:{name:"xml",htmlMode:!0},ocl:"text/x-ocl",octave:"text/x-octave",specman:"text/x-specmansrc",swift:"text/x-swift",r:"text/x-rsrc",xml:{name:"xml",htmlMode:!1}},f=function(a){for(var b={},a=a.split(" "),
c=0;c<a.length;++c)b[a[c]]=!0;return b},g=function(a,b){return b.startOfLine?(a.skipToEnd(),"meta"):!1};c.loadLibraries(["codemirror"]).then(function(){CodeMirror.defineMIME("text/x-cudasrc",{name:"clike",keywords:f("auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile inline wchar_t"),builtin:f("__global__ __constant__ __shared__ threadIdx blockIdx gridDim blockDim __device__ __host__ __syncthreads"),
blockKeywords:f("do else for if struct switch while"),atoms:f("true false null"),hooks:{"#":g}});CodeMirror.defineMIME("text/x-specmansrc",{name:"clike",keywords:f("all also as_a assert assume an and attribute bit bits bool break byte case check change compute computed cover continue cross cycle default define delay detach do down each edges else emit empty event exec expect export extend fail fall file first for force from gen global if ifdef ifndef in index int inline is instance item keep keeping key like line list machine matching me nand new nor not now of on only or out pass prev print range ranges release repeat return reverse rise routine select soft start state step string struct sync sys that then time to transition true try type undefined uint unit until using var when while with")})});
var h={attach:function(a,f){c.loadLibraries(["codemirror"]).then(function(){if(!_.isElement(a))throw"Must attach code mirror to a DOM element!";b&&(b=null);var c=angular.bind(this,function(){h.emitEvent("contentChanged")}),g=window.CodeMirror;b=g(a,{mode:e[f.language],theme:f.theme||"default",autofocus:f.autofocus,onChange:c,lineNumbers:!0,matchBrackets:!0,indentUnit:4,extraKeys:{Tab:"indentMore"}});d=f.language;h.emitEvent("attached")})},detach:function(){b=null},getAvailableLanguages:function(){return _.keys(e)},
setActiveLanguage:function(a){d=a;b.setOption("mode",e[a]);h.emitEvent("languageChanged",{to:a})},getActiveLanguage:function(){return d},setOptions:function(a){_.each(a,function(a,c){b.setOption(c,a)})},getContents:function(){return b?b.getValue():null},setContents:function(a){b.setValue(a)}};return a.eventEmission(h,["attached","languageChanged","contentChanged"])}]);angular.module("viewer").constant("GaTechCourseKeys","cs373 gt101 ud007 ud008 ud037 ud061 ud098 ud129 ud169 ud189 ud219 ud233 ud262 ud281 ud333 ud409 ud436 ud459 ud501 ud514 ud557 ud572 ud600 ud640 ud675 ud702 ud741 ud753 ud758 ud805 ud809 ud810 ud819 ud820 ud821 ud912 ud915 ud923 ud953 ud954 ud955 ud957".split(" ")).constant("NdCourseNames",{nd001:"Front-end Web Developer",nd000:"Intro to Programming",nd002:"Data Analyst",nd003:"iOS Developer",nd004:"Full Stack Web Developer",nd006:"Beginning iOS App Development",
nd007:"Tech Entrepreneur",nd801:"Android Developer",nd009:"Machine Learning Engineer"}).factory("FreeToNdCourseMap",["FreeToNdCourseList",function(a){return _.reduce(a,function(a,b){a[b.course_key]=b;return a},{})}]).constant("FreeToNdCourseList",[{course_key:"ca001",title:"Career Advisor: Front-End Web Developer",nd:"nd000",weight:5},{course_key:"ud015",title:"Object-Oriented JavaScript",nd:"nd802",weight:7},{course_key:"ud015-nd",title:"Object-Oriented JavaScript",nd:"nd802",weight:7},{course_key:"ud015",
title:"Object-Oriented JavaScript",nd:"nd001",weight:10},{course_key:"ud015-nd",title:"Object-Oriented JavaScript",nd:"nd001",weight:10},{course_key:"ud032",title:"Data Wrangling with MongoDB",nd:"nd002",weight:10},{course_key:"ud032-nd",title:"Data Wrangling with MongoDB",nd:"nd002",weight:10},{course_key:"ud032",title:"Data Wrangling with MongoDB",nd:"nd009",weight:5},{course_key:"ud032-nd",title:"Data Wrangling with MongoDB",nd:"nd009",weight:5},{course_key:"ud036",title:"Programming Foundations with Python",
nd:"nd004",weight:10},{course_key:"ud036-nd",title:"Programming Foundations with Python",nd:"nd004",weight:10},{course_key:"ud088",title:"Full Stack Foundations",nd:"nd004",weight:10},{course_key:"ud088-nd",title:"Full Stack Foundations",nd:"nd004",weight:10},{course_key:"ud110",title:"Intro to AJAX",nd:"nd001",weight:10},{course_key:"ud110-nd",title:"Intro to AJAX",nd:"nd001",weight:10},{course_key:"ud110",title:"Intro to AJAX",nd:"nd802",weight:7},{course_key:"ud110-nd",title:"Intro to AJAX",nd:"nd802",
weight:7},{course_key:"ud120",title:"Intro to Machine Learning",nd:"nd002",weight:7},{course_key:"ud120-nd",title:"Intro to Machine Learning",nd:"nd002",weight:7},{course_key:"ud120",title:"Intro to Machine Learning",nd:"nd009",weight:10},{course_key:"ud120-nd",title:"Intro to Machine Learning",nd:"nd009",weight:10},{course_key:"ud197",title:"Intro to Relational Databases",nd:"nd004",weight:10},{course_key:"ud197",title:"Intro to Relational Databases",nd:"nd002",weight:7},{course_key:"ud197-nd",title:"Intro to Relational Databases",
nd:"nd004",weight:10},{course_key:"ud245",title:"Intro to jQuery",nd:"nd001",weight:10},{course_key:"ud245-nd",title:"Intro to jQuery",nd:"nd001",weight:10},{course_key:"ud245",title:"Intro to jQuery",nd:"nd802",weight:7},{course_key:"ud245-nd",title:"Intro to jQuery",nd:"nd802",weight:7},{course_key:"ud257",title:"A/B Testing",nd:"nd002",weight:10},{course_key:"ud257",title:"A/B Testing",nd:"nd007",weight:3},{course_key:"ud257-nd",title:"A/B Testing",nd:"nd002",weight:10},{course_key:"ud257-nd",
title:"A/B Testing",nd:"nd007",weight:3},{course_key:"ud292",title:"HTML5 Canvas",nd:"nd001",weight:10},{course_key:"ud292-nd",title:"HTML5 Canvas",nd:"nd001",weight:10},{course_key:"ud292",title:"HTML5 Canvas",nd:"nd011",weight:5},{course_key:"ud292-nd",title:"HTML5 Canvas",nd:"nd011",weight:5},{course_key:"ud299",title:"Configuring Linux Web Servers",nd:"nd004",weight:10},{course_key:"ud299-nd",title:"Configuring Linux Web Servers",nd:"nd004",weight:10},{course_key:"ud304",title:"Intro to HTML and CSS",
nd:"nd001",weight:10},{course_key:"ud304",title:"Intro to HTML and CSS",nd:"nd004",weight:6},{course_key:"ud304-nd",title:"Intro to HTML and CSS",nd:"nd001",weight:10},{course_key:"ud304-nd",title:"Intro to HTML and CSS",nd:"nd004",weight:6},{course_key:"ud325",title:"iOS Persistence and Core Data",nd:"nd003",weight:10},{course_key:"ud325-nd",title:"iOS Persistence and Core Data",nd:"nd003",weight:10},{course_key:"ud325",title:"iOS Persistence and Core Data",nd:"nd006",weight:7},{course_key:"ud325-nd",
title:"iOS Persistence and Core Data",nd:"nd006",weight:7},{course_key:"ud330",title:"Authentication & Authorization: OAuth",nd:"nd004",weight:10},{course_key:"ud359",title:"Intro to Data Science",nd:"nd002",weight:10},{course_key:"ud359-nd",title:"Intro to Data Science",nd:"nd002",weight:10},{course_key:"ud359",title:"Intro to Data Science",nd:"nd009",weight:7},{course_key:"ud359-nd",title:"Intro to Data Science",nd:"nd009",weight:7},{course_key:"ud381",title:"Real-Time Analytics with Apache Storm",
nd:"nd002",weight:5},{course_key:"ud405",title:"2D Game Development with LibGDX",nd:"nd011",weight:10},{course_key:"ud421",title:"iOS Networking with Swift",nd:"nd003",weight:10},{course_key:"ud421-nd",title:"iOS Networking with Swift",nd:"nd003",weight:10},{course_key:"ud421",title:"iOS Networking with Swift",nd:"nd006",weight:9},{course_key:"ud421-nd",title:"iOS Networking with Swift",nd:"nd006",weight:9},{course_key:"ud432",title:"Computer Networking 3-Operations & Mgmt",nd:"nd004",weight:3},{course_key:"ud507",
title:"Data Visualization and D3.js",nd:"nd002",weight:10},{course_key:"ud507-nd",title:"Data Visualization and D3.js",nd:"nd002",weight:10},{course_key:"ud509",title:"Product Design",nd:"nd007",weight:10},{course_key:"ud509-nd",title:"Product Design",nd:"nd007",weight:10},{course_key:"ud518",title:"App Monetization",nd:"nd007",weight:10},{course_key:"ud518-nd",title:"App Monetization",nd:"nd007",weight:10},{course_key:"ud549",title:"JavaScript Testing",nd:"nd001",weight:10},{course_key:"ud549-nd",
title:"JavaScript Testing",nd:"nd001",weight:10},{course_key:"ud552-nd",title:"Telling Computers What To Do",nd:"nd000",weight:10},{course_key:"ud585",title:"Intro to iOS App Development with Swift",nd:"nd003",weight:10},{course_key:"ud585-nd",title:"Intro to iOS App Development with Swift",nd:"nd003",weight:10},{course_key:"ud585",title:"Intro to iOS App Development with Swift",nd:"nd006",weight:10},{course_key:"ud585-nd",title:"Intro to iOS App Development with Swift",nd:"nd006",weight:10},{course_key:"ud595",
title:"Linux Command Line Basics",nd:"nd004",weight:10},{course_key:"ud607",title:"How to Make an iOS App",nd:"nd003",weight:10},{course_key:"ud607-nd",title:"How to Make an iOS App",nd:"nd003",weight:10},{course_key:"ud607",title:"How to Make an iOS App",nd:"nd006",weight:10},{course_key:"ud607-nd",title:"How to Make an iOS App",nd:"nd006",weight:10},{course_key:"ud617",title:"Intro to Hadoop and MapReduce",nd:"nd002",weight:8},{course_key:"ud645-nd",title:"The Power of Abstraction",nd:"nd000",weight:10},
{course_key:"ud651",title:"Data Analysis with R",nd:"nd002",weight:10},{course_key:"ud651-nd",title:"Data Analysis with R",nd:"nd002",weight:10},{course_key:"ud651",title:"Data Analysis with R",nd:"nd009",weight:10},{course_key:"ud651-nd",title:"Data Analysis with R",nd:"nd009",weight:10},{course_key:"ud719",title:"App Marketing",nd:"nd007",weight:10},{course_key:"ud721-nd",title:"Webpages, Documents, and Structure",nd:"nd000",weight:10},{course_key:"ud723",title:"Rapid Prototyping",nd:"nd007",weight:10},
{course_key:"ud723-nd",title:"Rapid Prototyping",nd:"nd007",weight:10},{course_key:"ud744-nd",title:"Working with the Full Stack",nd:"nd000",weight:10},{course_key:"ud774",title:"Xcode Debugging",nd:"nd003",weight:9},{course_key:"ud774-nd",title:"Xcode Debugging",nd:"nd003",weight:9},{course_key:"ud774",title:"Xcode Debugging",nd:"nd006",weight:9},{course_key:"ud774-nd",title:"Xcode Debugging",nd:"nd006",weight:9},{course_key:"ud775",title:"How to Use Git and GitHub",nd:"nd000",weight:7},{course_key:"ud775-nd",
title:"How to Use Git and GitHub",nd:"nd000",weight:7},{course_key:"ud775",title:"How to Use Git and GitHub",nd:"nd010",weight:7},{course_key:"ud775-nd",title:"How to Use Git and GitHub",nd:"nd010",weight:7},{course_key:"ud788",title:"UIKit Fundamentals",nd:"nd003",weight:10},{course_key:"ud788-nd",title:"UIKit Fundamentals",nd:"nd003",weight:10},{course_key:"ud788a-nd",title:"UIKit Fundamentals I",nd:"nd003",weight:10},{course_key:"ud788b-nd",title:"UIKit Fundamentals II",nd:"nd003",weight:10},{course_key:"ud802",
title:"How to create <anything> in Android",nd:"nd801",weight:8},{course_key:"ud804",title:"JavaScript Basics",nd:"nd001",weight:10},{course_key:"ud804-nd",title:"JavaScript Basics",nd:"nd001",weight:10},{course_key:"ud806",title:"Get Your Startup Started",nd:"nd007",weight:3},{course_key:"ud825",title:"Android Performance",nd:"nd801",weight:7},{course_key:"ud827",title:"Intro to Descriptive Statistics",nd:"nd002",weight:7},{course_key:"ud837",title:"Android Development for Beginners",nd:"nd801",
weight:9},{course_key:"ud843",title:"Intro to Android 2",nd:"nd801",weight:9},{course_key:"ud849",title:"UX Design for Mobile Developers",nd:"nd003",weight:5},{course_key:"ud849",title:"UX Design for Mobile Developers",nd:"nd801",weight:5},{course_key:"ud853",title:"Developing Android Apps",nd:"nd801",weight:10},{course_key:"ud853-nd",title:"Developing Android Apps: Fundamentals",nd:"nd801",weight:10},{course_key:"ud855",title:"Advanced Android App Development",nd:"nd801",weight:10},{course_key:"ud855-nd",
title:"Advanced Android App Development",nd:"nd801",weight:10},{course_key:"ud858",title:"Developing Scalable Apps in Python",nd:"nd004",weight:10},{course_key:"ud859",title:"Developing Scalable Apps in Java",nd:"nd004",weight:6},{course_key:"ud860",title:"Browser Rendering Optimization",nd:"nd001",weight:10},{course_key:"ud860-nd",title:"Browser Rendering Optimization",nd:"nd001",weight:10},{course_key:"ud862",title:"Material Design for Android Developers",nd:"nd801",weight:10},{course_key:"ud862-nd",
title:"Android Design for Developers",nd:"nd801",weight:10},{course_key:"ud867",title:"Gradle for Android and Java",nd:"nd801",weight:10},{course_key:"ud867-nd",title:"Gradle for Android and Java",nd:"nd801",weight:10},{course_key:"ud875",title:"Android Ubiquitous Computing",nd:"nd801",weight:10},{course_key:"ud875-nd",title:"Android Ubiquitous Computing",nd:"nd801",weight:10},{course_key:"ud875A",title:"Android Wear Development",nd:"nd801",weight:10},{course_key:"ud875B",title:"Android TV and Google Cast Development",
nd:"nd801",weight:10},{course_key:"ud875C",title:"Android Auto Development",nd:"nd801",weight:10},{course_key:"ud876",title:"Google Play Services",nd:"nd801",weight:10},{course_key:"ud876-1",title:"Google Play Services: Location & Context",nd:"nd801",weight:10},{course_key:"ud876-2",title:"Google Play Services: Analytics",nd:"nd801",weight:10},{course_key:"ud876-3",title:"Google Play Services: AdMob",nd:"nd801",weight:10},{course_key:"ud876-4",title:"Google Play Services: Maps",nd:"nd801",weight:10},
{course_key:"ud876-5",title:"Google Play Services: Identity",nd:"nd801",weight:10},{course_key:"ud876-nd",title:"Google Play Services",nd:"nd801",weight:10},{course_key:"ud882",title:"Responsive Images",nd:"nd001",weight:10},{course_key:"ud882-nd",title:"Responsive Images",nd:"nd001",weight:10},{course_key:"ud884",title:"Website Performance Optimization",nd:"nd001",weight:10},{course_key:"ud884-nd",title:"Website Performance Optimization",nd:"nd001",weight:10},{course_key:"ud893",title:"Responsive Web Design Fundamentals",
nd:"nd001",weight:10},{course_key:"ud893-nd",title:"Responsive Web Design Fundamentals",nd:"nd001",weight:10},{course_key:"ud902",title:"Learn Swift Programming Syntax",nd:"nd003",weight:10},{course_key:"ud902-nd",title:"Learn Swift Programming Syntax",nd:"nd003",weight:10},{course_key:"ud919",title:"Model Building and Validation",nd:"nd002",weight:7},{course_key:"ud989",title:"JavaScript Design Patterns",nd:"nd001",weight:10},{course_key:"ud990",title:"Learn Backbone.js",nd:"nd001",weight:7}]);angular.module("viewer").service("executor",["mixin","api","dateTime","lessonContentContext","lesson","iframeEvaluator","$location",function(a,c,b,d,e,f,g){var h={submitFiles:function(a,j,l){var k=l.operation||"TEST",m=d.getCurrent(),n=b.getCurrentAsUTC(),p={model:"Submission",operation:k,parts:_.map(a,function(a){return{model:"SubmissionPart",marker:a.name,content:a.content}})},q={submission:p,client_route:"!"+g.path()},r=function(a){h.emitEvent("evaluation",{evaluation:a.data.evaluation,submission:p,
context:m,timestamp:n});return a};h.emitEvent("submit");e.updateLastSubmissionForMorsel(j,p);return l.useIframe?f.evaluate(p,j,l.iframeUrl).then(function(a){q.submission.client_execution=a.execution;q.submission.client_execution.raw_result=JSON.stringify(a.execution.raw_result);return c.post("/nodes/"+j+"/evaluation?_method=GET",q,{timeout:3E4}).then(r)},function(){q.execution={model:"SubmissionExecution",raw_result:"",status:"te"};return c.post("/nodes/"+j+"/evaluation?_method=GET",q,{timeout:3E4}).then(r)}):
c.post("/nodes/"+j+"/evaluation?_method=GET",q,{timeout:3E4}).then(r)}};return a.eventEmission(h,["update","submit","evaluation"])}]);angular.module("viewer").factory("iframeEvaluator",["mixin","$q","$timeout","isTrustedDomain",function(a,c,b,d){var e=null,f=null,g=null,h={evaluate:function(a,d,l){var k=c.defer();e=k;f=a;g=l;h.emitEvent("newEvaluation",{nodeId:d,iframeUrl:l});b(function(){k.reject("timeout")},6E4);return k.promise}};window.addEventListener("message",function(a){if(d(a.origin)){var c;a=a.data;try{c=JSON.parse(a)}catch(l){c=a}"ready"===c.messageType?h.emitEvent("postMessageRequest",{submission:f,iframeUrl:g}):"execution"===
c.messageType&&b(function(){e.resolve(c.result)})}},!1);return a.eventEmission(h,["newEvaluation","postMessageRequest"])}]);angular.module("viewer").factory("imageQuiz",["mixin","api","dateTime","lesson","lessonContentContext","$timeout",function(a,c,b,d,e,f){function g(a,b){a&&_.each(b.widgets,function(b){var c=_.find(a.parts,function(a){return a.marker===b.marker});c&&("RadioButtonWidget"===b.model?c.content&&(k.radioGroupAnswers[b.group]=c.marker):k.answers[b.marker]=c.content)})}var h=null,i=null,j=null,l;d.addEventListener("morselChange",function(a){l=a},{replayLast:!0});var k={answers:null,radioGroupAnswers:null,
setQuiz:function(a){h=a;var b=Math.round((new Date).getTime());i=b;k.answers={};_.each(h.widgets,function(a){k.answers[a.marker]=a.initial_value});k.radioGroupAnswers={};h.hasOwnProperty("lastSubmission")?(g(h.lastSubmission,h),k.emitEvent("ready")):c.get("/nodes/"+a.key+"/state").success(function(a){if(l.key===h.key&&b===i){var c=a.nodestates[0]?a.nodestates[0].last_submission_data:null,a=a.nodestates[0]?a.nodestates[0].bin_codes:null;g(c,h);d.updateLastSubmissionForMorsel(h.key,c);d.mergeBinCodesForMorsel(h.key,
a);k.emitEvent("ready")}}).error(function(a){console.error("Error fetching quiz progress data");console.error(a)})},getQuiz:function(){return h},submit:function(){_.each(h.widgets,function(a){"RadioButtonWidget"===a.model&&(k.answers[a.marker]=k.radioGroupAnswers[a.group]===a.marker)});k.emitEvent("submitting",k.answers);if(h.evaluator){var a=Math.round((new Date).getTime()),g=h.key;j=a;var i=e.getCurrent(),q=b.getCurrentAsUTC(),r={model:"Submission",operation:"GRADE",parts:_.map(k.answers,function(a,
b){return{model:"SubmissionPart",marker:b,content:a}})},s={submission:r};d.updateLastSubmissionForMorsel(h.key,r);c.post("/nodes/"+h.key+"/evaluation?_method=GET",s).success(function(b){k.emitEvent("evaluation",{evaluation:b.evaluation,submission:r,context:i,timestamp:q});if(g===l.key&&a===j)if(b.evaluation){d.mergeBinCodesForMorsel(h.key,b.evaluation.bin_codes);if(b.evaluation.passed||0<b.evaluation.score.points_earned)d.markMorselAsCompleted(g),h.containingExercise&&d.markMorselAsCompleted(h.containingExercise.key);
!0===b.evaluation.passed?k.emitEvent("correct",{quiz:h,comment:b.evaluation.comment,binCodes:b.evaluation.bin_codes}):!1===b.evaluation.passed?k.emitEvent("incorrect",{quiz:h,comment:b.evaluation.comment,binCodes:b.evaluation.bin_codes}):null===b.evaluation.passed?k.emitEvent("recorded",{quiz:h,comment:b.evaluation.comment,binCodes:b.evaluation.bin_codes}):console.error("invalid evaluation.passed value:"+b.evaluation.passed)}else k.emitEvent("error",{morselId:h.key,comment:"We encountered an error. Please try submitting again."})}).error(function(){k.emitEvent("error",
{morselId:h.key,comment:"We encountered an error. Please try submitting again."})})}else f(function(){_.reduce(h.widgets,function(a,b){return a&&k.answers[b.marker]===b.correct_value},!0)?k.emitEvent("correct",{morselId:h.key}):k.emitEvent("incorrect",{morselId:h.key})},10)}};return a.eventEmission(k,"ready submitting incorrect correct recorded error evaluation".split(" "))}]);angular.module("viewer").factory("isTrustedDomain",[function(){return function(a){return"https://www.udacity.com"===a||"http://localhost:8080"===a||"http://localhost:8087"===a||"https://assignments-dot-udacity-extras.appspot.com"===a}}]);angular.module("viewer").factory("lesson",["api","$q","mixin","lessonContentContext","typeForTag","freshContent",function(a,c,b,d,e,f){function g(a,b){var c=_.find(a,function(a){for(var c=b.length-1;0<=c;c--){var d=a.content_context[c];if(!d||d.node_ref.key!==b[c].node_key||d.tag!==b[c].tag)return!1}return!0});c&&(c=_.object(_.map(c.content_context,function(a){return[e[a.tag]+"Key",a.node_ref.key]})));return c}var h=null,i=null,j=null,l=null,k=null,m=null,n=null,p={announcePendingCourseChange:function(){p.emitEvent("pendingCourseChange",
{course:h})},changeCourse:function(b){var e=Math.round((new Date).getTime());n=e;c.all([a.get("/nodes/"+b+"?depth=1&fresh="+(!0===f)+"&required_behavior=view&projection=navigation"),a.get("/nodes/"+b+"/state?fresh=true")]).then(function(a){var c=a[0].data,f=a[1].data,k=a=null;if(e===n){h=c.references.Node[b];i=c.references.Node;h.steps_refs=_.reject(h.steps_refs,function(a){return!i[a.key]});if(c=_.find(f.nodestates,function(a){return a.node_ref.key===b}))(k=g(c.last_interactions,d.getCurrent()))&&
k.lessonKey&&(a=i[k.lessonKey]);p.emitEvent("courseChange",{course:h,lessons:_.map(h.steps_refs,function(a,b){var c=i[a.key];c.indexInCourse=b;return c}),lastLessonVisited:a})}},function(a){e===n&&a.status&&(403===a.status||404===a.status)&&p.emitEvent("coursePermissionDenied",b)})},announcePendingLessonChange:function(){p.emitEvent("pendingLessonChange",{lesson:j})},changeLesson:function(b){var e=Math.round((new Date).getTime());m=e;c.all([a.get("/nodes/"+b+"?depth=2&fresh="+(!0===f)+"&required_behavior=view&projection=classroom"),
a.get("/nodes/"+b+"/state?fresh=true")]).then(function(a){if(e===m){var c=a[0].data,f=a[1].data,a=null;j=c.references.Node[b];l=c.references.Node;j.steps_refs=_.reject(j.steps_refs,function(a){return!l[a.key]});_.each(j.steps_refs,function(a,b){var c=l[a.key];if(!c)throw Error("Expected a morsel but got "+JSON.stringify(c,2));"Exercise"===c.model&&(_.each(["lecture_ref","quiz_ref","answer_ref"],function(a){c[a]&&(c[a]=l[c[a].key],c[a]&&(c[a].containingExercise=c))}),_.each(c.tidbits,function(a){a.tidbit_ref=
l[a.tidbit_ref.key];a.tidbit_ref&&(a.tidbit_ref.containingExercise=c)}));l[a.key].indexInLesson=b});_.each(l,function(a){if("ImageFormQuiz"===a.model||"ProgrammingQuiz"===a.model)a.binCodes=[]});if(c=_.find(f.nodestates,function(a){return a.node_ref.key===b}))_.each(c.completed_descendant_node_refs,function(a){p.markMorselAsCompleted(a.key)}),(c=g(c.last_interactions,d.getCurrent()))&&c.morselKey&&(a=l[c.morselKey]);p.emitEvent("lessonChange",{lesson:j,morsels:_.map(j.steps_refs,function(a){return l[a.key]}),
lastMorselVisited:a})}},function(a){e===m&&a&&(a.status&&(403===a.status||404===a.status))&&p.emitEvent("lessonPermissionDenied",b)})},announcePendingMorselChange:function(a){p.emitEvent("pendingMorselChange",{from:k,to:a})},changeMorsel:function(a){k=l[a];p.emitEvent("morselChange",k)},changeTidbit:function(a){p.emitEvent("tidbitChange",{tidbit:a?l[a]:null})},markMorselAsCompleted:function(a){l[a]?l[a].completed=!0:console.error("Can't find morsel #"+a+" to mark it as completed")},updateProgressForMorsel:function(a,
b){l[a]&&l[b]?l[a].progressNodeId=b:console.error("Can't find container morsel #"+a+" or perhaps progress morsel #"+b+" to update progress")},updateLastSubmissionForMorsel:function(a,b){l[a]?l[a].lastSubmission=b:console.error("Can't find morsel #"+a+"to update activity")},mergeBinCodesForMorsel:function(a,b){l[a]&&(l[a].binCodes=_.union(l[a].binCodes,b))}};return b.eventEmission(p,"pendingCourseChange courseChange pendingLessonChange lessonChange pendingMorselChange morselChange tidbitChange lessonPermissionDenied coursePermissionDenied".split(" "))}]);angular.module("viewer").factory("lessonPrefetcher",["$http","$timeout","lesson",function(a,c,b){var d=null;b.addEventListener("courseChange",function(a){d=a.lessons},{replayLast:!0});b.addEventListener("courseChange",function(){b.addEventListener("lessonChange",function(b){var f=_.find(d,function(a){return a.key===b.lesson.key}).indexInCourse;if(0<f){var g=d[f-1].key;c(function(){a.get("/api/nodes/"+g+"?depth=2&fresh=false&required_behavior=view&projection=classroom")},1E4,!1)}if(0<=f&&f<d.length-
1){var h=d[f+1].key;c(function(){a.get("/api/nodes/"+h+"?depth=2&fresh=false&required_behavior=view&projection=classroom")},7E3,!1)}},{replayLast:!0})},{removeAfterFired:!0,replayLast:!0});b.addEventListener("morselChange",function(c){if(("Video"===c.model||"SketchVideo"===c.model)&&c.containingExercise&&c.containingExercise.lecture_ref&&c.containingExercise.lecture_ref.key===c.key&&c.containingExercise.quiz_ref&&!c.containingExercise.quiz_ref.lastSubmission){var d=c.containingExercise.quiz_ref;a.get("/api/nodes/"+
d.key+"/state").success(function(a){d.lastSubmission||b.updateLastSubmissionForMorsel(d.key,a.nodestates[0]?a.nodestates[0].last_submission_data:null)}).error(function(){console.error("Failed to prefetch last submission for quiz with id "+d.key)})}});return{}}]);angular.module("viewer").factory("lessonActivityTracker",["$http","lesson","lessonContentContext","youtubeVideoPlayer","dateTime","imageQuiz","executor","mixin","$routeParams",function(a,c,b,d,e,f,g,h){function i(a){function b(a){return k(_.map(_.without([a.submission,a.evaluation],null,void 0),function(b){return{context:a.context,data:b}}),{chain:!0,timestamp:a.timestamp})}function c(){d+=1;3>d?b(a).then(function(){},c):m.emitEvent("quizActivityLogFailure",{context:a.context})}var d=0;a.evaluation&&
(a.evaluation.model="SubmissionEvaluation");b(a).then(function(){},c)}var j=null,l=null,k=function(b,c){var c=c||{},d={items:_.map(b,function(a){return{occurrence_time:c.timestamp||e.getCurrentAsUTC(),content_context:_.without(a.context,null,void 0,"none"),data:a.data}}),current_time:e.getCurrentAsUTC()},f="/api/activity";c.chain&&(f+="?related_chain=true");return a.post(f,d).then(function(a){200!==a.status&&(console.error("Error when trying to post activity. Response:"),console.error(a))})};d.addEventListener("videoPlay",
function(a){j=a},{replayLast:!0});d.addEventListener("videoPause",function(a){null!==j&&(null!==a&&void 0!==a)&&(l=a,j>l?j=a:k([{context:b.getCurrent(),data:{model:"PlayableView",start:j,stop:l}}]));j=l=null},{replayLast:!0});f.addEventListener("evaluation",i,{replayLast:!0});g.addEventListener("evaluation",i,{replayLast:!0});c.addEventListener("morselChange",function(a){if(!a.completed&&("Reading"===a.model||"EmbeddedFrame"===a.model))c.markMorselAsCompleted(a.key),k([{context:b.getCurrent(),data:{model:"CompletedExperience",
completion_context:"Student viewed the node"}}])});var m={logNodeVisit:function(a){k([{context:b.getCurrent(a),data:{model:"NodeVisit"}}])}};return h.eventEmission(m,["quizActivityLogFailure"])}]);angular.module("viewer").factory("lessonContentContext",["$routeParams","tags",function(a,c){return{getCurrent:function(b){var d=["course","lesson","exercise","morsel","tidbit"];b&&(b=_.indexOf(d,b),0<=b&&(d=d.slice(0,b+1)));return _.without(_.map(d,function(b){if(a[b+"Key"]&&"none"!==a[b+"Key"])return{tag:c[b],node_key:a[b+"Key"]}}),void 0,null)}}}]);angular.module("viewer").factory("programmingQuiz",["api","mixin","codeEditor","executor","lesson",function(a,c,b,d,e){function f(a){return _.map(a,function(a){return{name:a.name,content:a.text}})}function g(a){return _.map(a,function(a){var b={name:a.name};a._content&&"text/plain"===a._content._content_type?(b.text=a._content._plaintext,b.kind="plaintext"):a._content&&-1!==a._content._content_type.indexOf("image")&&(b.servingUrl=a._content._serving_url,b.kind="image");return b})}function h(a,b){a&&
_.each(b,function(b){var c=_.find(a.parts,function(a){return a.marker===b.name});c&&(b.text=c.content)})}var i=null,j=null,l=null,k;e.addEventListener("morselChange",function(a){k=a},{replayLast:!0});var m=null,n=null,p=null,q=null,r={init:function(c){var d=Math.round((new Date).getTime()),f=c.key;i=d;n=g(c.initial_code_files);m=g(c.initial_code_files);p=c.key;q=c;c.hasOwnProperty("lastSubmission")?(h(c.lastSubmission,m),b.loadFiles(m).then(function(){r.emitEvent("ready")})):a.get("/nodes/"+c.key+
"/state").success(function(a){if(f===k.key&&d===i){var c=a.nodestates[0],a=c?c.last_submission_data:null,c=c?c.bin_codes:[];h(a,m);e.updateLastSubmissionForMorsel(p,a);e.mergeBinCodesForMorsel(p,c);b.loadFiles(m);r.emitEvent("ready")}}).error(function(a){console.error("Error fetching programming quiz progress data");console.error(a)})},submit:function(){var a=Math.round((new Date).getTime()),c=k.key;j=a;var h={operation:"GRADE",useIframe:k.evaluator&&"IFrameEvaluator"===k.evaluator.model,iframeUrl:k.evaluator&&
k.evaluator.external_uri};r.emitEvent("submitting",{morselId:p,submissionOptions:h});d.submitFiles(f(b.getAllFiles()),p,h).then(function(b){b=b.data;if(a===j&&c===k.key){e.mergeBinCodesForMorsel(c,b.evaluation.bin_codes);if(b.evaluation.passed||0<b.evaluation.score.points_earned)e.markMorselAsCompleted(c),q.containingExercise&&e.markMorselAsCompleted(q.containingExercise.key);b.evaluation.comment&&b.evaluation.comment.indexOf("est case input")&&(r.emitEvent("run",{morselId:c,result:{stdout:b.evaluation.comment,
stderr:null,images:null}}),b.evaluation.comment=b.evaluation.feedback?b.evaluation.feedback:"Please see detailed feedback in the output area below.");r.emitEvent("evaluated",{quiz:k,result:b.evaluation})}},function(a){r.emitEvent("evaluationError",a.data)})},run:function(){var a=Math.round((new Date).getTime()),c=k.key;l=a;d.submitFiles(f(b.getAllFiles()),p,{operation:"TEST",useIframe:k.evaluator&&"IFrameEvaluator"===k.evaluator.model,iframeUrl:k.evaluator&&k.evaluator.external_uri}).then(function(b){b=
b.data;if(a===l&&c===k.key){var d={};b.execution&&b.execution._output_attachments&&(d=b.execution._output_attachments,b=g(b.execution._ordered_file_attachments),d={stdout:d.stdout?d.stdout._content._plaintext:null,stderr:d.stderr?d.stderr._content._plaintext:null,images:_.filter(b,function(a){return"image"===a.kind})});r.emitEvent("run",{morselId:c,result:d})}},function(a){r.emitEvent("runError",a.data)})},reset:function(){b.loadFiles(n)}};return c.eventEmission(r,"submitting evaluated evaluationError run runError ready".split(" "))}]);angular.module("viewer").factory("tidbits",[function(){return{isTidbitRelevant:function(a,c,b){return _.some(a.bin_code_groups,function(a){return(!b||a.bin_codes.length)&&_.every(a.bin_codes,function(a){return _.contains(c,a)})})},getTidbitViewerMode:function(a){return a?"tidbit-only":"quiz-only"}}}]);angular.module("viewer").constant("viewerPartialMap",{Video:{prefix:"video"},SketchVideo:{prefix:"video"},ProgrammingQuiz:{prefix:"programming_quiz",extension:!0},ImageFormQuiz:{prefix:"image_quiz"},Sketch:{prefix:"sketch"},EmbeddedFrame:{prefix:"iframe"},Reading:{prefix:"reading"}});angular.module("viewer").factory("viewerSettings",["mixin",function(a){var c={autoPlay:!0},b={set:function(a,e){if(c.hasOwnProperty(a)){var f=c[a];c[a]=e;b.emitEvent("change",{name:a,oldValue:f,newValue:e})}else console.error("can't set invalid setting: "+a)},get:function(a){if(c.hasOwnProperty(a))return c[a];console.error("Can't get invalid setting: "+a)}};return a.eventEmission(b,["change"])}]);angular.module("widgets").factory("github",["$q","libraryLoader","$rootScope","cookieJar",function(a,c,b,d){var e=c.loadLibraries(["base64"]),f={Accept:"application/vnd.github.raw","Content-Type":"application/json"},g={scopes:["repo"],note:"Udacity Issue Tracker",client_id:"bb427a8f7beb27b582e0",client_secret:"a014d61f827e1a761898d216ce44e23431237973"},h={scopes:["repo"],note:"Udacity Github Tracker",client_secret:"a014d61f827e1a761898d216ce44e23431237973"},i=null;(c=d.get("githubIssueTrackerToken"))&&
(i=c);var j={setToken:function(a){null===a&&d.remove("githubIssueTrackerToken");i=a},hasToken:function(){return null!==i},getAuth:function(c,g,i){var n=a.defer();e.then(function(){var a=angular.copy(f);a.Authorization="Basic "+Base64.encode(c+":"+g);i&&(a["X-GitHub-OTP"]=i);$.ajax("https://api.github.com/authorizations/clients/bb427a8f7beb27b582e0",{type:"PUT",data:JSON.stringify(h),headers:a}).done(function(a){null===a.token?j._postAuth(c,g,i).then(function(a){n.resolve(a)},function(a){n.reject(a)}):
(j.setToken(a.token),d.set("githubIssueTrackerToken",a.token),n.resolve(a))}).fail(function(a){n.reject(a)}).always(function(){b.$apply()})});return n.promise},_postAuth:function(c,h,i){var n=a.defer();e.then(function(){var a=angular.copy(f);a.Authorization="Basic "+Base64.encode(c+":"+h);i&&(a["X-GitHub-OTP"]=i);$.ajax("https://api.github.com/authorizations",{type:"POST",data:JSON.stringify(g),headers:a}).done(function(a){j.setToken(a.token);d.set("githubIssueTrackerToken",a.token);n.resolve(a)}).fail(function(a){n.reject(a)}).always(function(){b.$apply()})});
return n.promise},deleteAuth:function(){var c=a.defer();angular.copy(f);e.then(function(){var a=angular.copy(f);a.Authorization="Basic "+Base64.encode("bb427a8f7beb27b582e0:a014d61f827e1a761898d216ce44e23431237973");$.ajax("https://api.github.com/applications/bb427a8f7beb27b582e0/tokens/"+i,{type:"DELETE",headers:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}).always(function(){j.setToken(null);b.$apply()})});return c.promise},getIssues:function(c,d){var e={};d&&(d.labels&&d.labels.join)&&
(e.labels=d.labels.join(","));var h=a.defer(),g=angular.copy(f);g.Authorization="token "+i;$.ajax("https://api.github.com/repos/udacity/"+c+"/issues",{headers:g,data:e,cache:!1}).done(function(a){h.resolve(a)}).fail(function(a){h.reject(a)}).always(function(){b.$apply()});return h.promise},postIssue:function(c,d){var e=a.defer(),h=angular.copy(f);h.Authorization="token "+i;$.ajax("https://api.github.com/repos/udacity/"+c+"/issues",{type:"POST",data:JSON.stringify(d),headers:h}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}).always(function(){b.$apply()});
return e.promise},updateIssue:function(c,d){var e=a.defer(),h=angular.copy(f);h.Authorization="token "+i;$.ajax("https://api.github.com/repos/udacity/"+c+"/issues/"+d.number,{type:"POST",data:JSON.stringify(d),headers:h}).done(function(a){e.resolve(a)}).fail(function(a){e.reject(a)}).always(function(){b.$apply()});return e.promise},getAssigneeOptions:function(c){var d=a.defer(),e=[],h=function(a){var g=angular.copy(f);g.Authorization="token "+i;$.ajax("https://api.github.com/repos/udacity/"+c+"/assignees?page="+
a+"&per_page=100",{type:"GET",headers:g}).done(function(b){e=e.concat(b);100>b.length?d.resolve(e):h(a+1)}).fail(function(a){d.reject(a)}).always(function(){b.$apply()})};h(1);return d.promise}};return j}]);angular.module("widgets").directive("staffIssues",["cacheVersion","github","lesson","lessonContentContext","$timeout","$window",function(a,c,b,d,e,f){var g=RegExp("(#### Github Issue Tracker Data Blob - DO NOT TOUCH ####)([\\s\\S]*?)(#### End of Github Issue Tracker Data Blob ####)","g");return{restrict:"A",templateUrl:"/templates/angular/staff_tools/staff_issues.html?"+a,link:function(a){a.issuePriorityOptions={p1:"OMG",p2:"HIGH",p3:"LOW"};a.labels=null;a.courseKey=null;a.showAddIssue=!1;a.currentMorselTitle=
null;var i=function(){c.getAssigneeOptions("course-issues").then(function(b){a.assigneeOptions=_.pluck(b,"login");a.assigneeOptions.unshift("")})};i();var j=function(){a.newIssue={title:"",body:"",priority:"p3"}};j();b.addEventListener("morselChange",function(b){a.labels=_.without(_.map(d.getCurrent(),function(a){return a.tag+a.node_key}),void 0,null);a.courseLabel=a.labels[0];a.lessonLabel=a.labels[1];a.morselLabel=_.last(a.labels);a.githubURLbase="https://github.com/udacity/course-issues/issues?labels=";
a.githubURL=a.githubURLbase+a.labels.join("%2C");a.currentMorselTitle=b.title;a.hasToken()&&(a.currentIssues=null,a.refreshIssues())},{replayLast:!0,removeOnDestructionOf:a});var l=function(b){b.body=b.body.replace(g,"");b.priority="p3";for(var c=[],d=0;d<b.labels.length;d++){var e=b.labels[d].name;e in a.issuePriorityOptions&&(b.priority=e);c.push(e)}b.labels=c;b.assignee=b.assignee?b.assignee.login:"";return b};a.refreshIssues=function(){c.getIssues("course-issues",{labels:[_.last(a.labels)]}).then(function(b){a.currentIssues=
_.map(b,l);a.showAddIssue=0===a.currentIssues.length?!0:!1})};a.closeIssue=function(b){confirm("Are you sure you want to close this issue?")&&(b.state="closed",a.postIssue(b))};a.addNewIssue=function(){var b={posted_from:{url:f.location.href,markdown:"["+a.currentMorselTitle+"]("+f.location.href+")"}},c=angular.copy(a.labels);c.push(a.newIssue.priority);a.newIssue.body+="\n#### Github Issue Tracker Data Blob - DO NOT TOUCH ####\n"+JSON.stringify(b,null,"\t")+"\n#### End of Github Issue Tracker Data Blob ####";
a.newIssue.labels=c;a.postIssue(a.newIssue)};a.postIssue=function(b){for(var d=0;d<b.labels.length;d++)b.labels[d]in a.issuePriorityOptions&&(b.labels[d]=b.priority);b.number?(console.log("updating issue"),console.log(b),b=angular.copy(b),b.body+="\n#### Github Issue Tracker Data Blob - DO NOT TOUCH ####\n"+JSON.stringify({posted_from:{url:f.location.href,markdown:"["+a.currentMorselTitle+"]("+f.location.href+")"}},null,"\t")+"\n#### End of Github Issue Tracker Data Blob ####",c.updateIssue("course-issues",
b).then(function(){})):(console.log("creating issue"),console.log(b),c.postIssue("course-issues",b).then(function(b){b.body=b.body.replace(g,"");a.currentIssues.push(l(b));j();a.showAddIssue=!1}))};a.hasToken=function(){return c.hasToken()};a.getToken=function(){c.getAuth(a.name,a.pass,a.oneTimePassword).then(function(){a.name="";a.pass="";a.oneTimePassword="";i();a.refreshIssues()},function(){$("#staff-issues-container > span").addClass("animate-shake");e(function(){$("#staff-issues-container > span").removeClass("animate-shake")},
1E3,!1)})};a.endSession=function(){c.deleteAuth();a.newIssueTitle=null;a.newIssueBody=null;a.currentIssues=null}}}}]);angular.module("widgets").directive("codeEditor",["libraryLoader","codeEditorHelper","$timeout",function(a,c,b){return{restrict:"A",require:"ngModel",link:function(d,e,f,g){var h=null,i=_.throttle(function(){b(function(){d.$apply()},0,!1)},100);d.getLanguageForFileName=c.getLanguageForFileName;a.loadLibraries(["codemirror"]).then(function(){var a=window.CodeMirror;h=a(e.get(0),{mode:c.getCodeMirrorSpecifierForLanguage(f.language),theme:f.theme||"default",autofocus:f.autofocus||!1,lineNumbers:!0,matchBrackets:!0,
indentUnit:4,extraKeys:{Tab:"indentMore"}});h.on("change",function(){var a=h.getValue();a!==g.$viewValue&&(a?g.$setViewValue(a):g.$setViewValue(null),i())});d.$watch(f.language,function(a){a&&h.setOption("mode",c.getCodeMirrorSpecifierForLanguage(a))});g.$render=function(){g.$viewValue?h.setValue(g.$viewValue):null===g.$viewValue&&h.setValue("")};g.$render()})}}}]);angular.module("widgets").factory("codeEditorHelper",["libraryLoader",function(a){var c={},b=[["py","python",{name:"python",version:2,singleLineStringErrors:!1}],["c","c","text/x-csrc"],["cu","cuda","text/x-cudasrc"],["cpp","c++","text/x-c++src"],["css","css","text/css"],["e","specman","text/x-specmansrc"],["glsl","glsl","text/x-glsl"],["html","html",{name:"xml",htmlMode:!0}],["java","java","text/x-java"],["js","javascript","text/javascript"],["json","javascript","text/javascript"],["m","octave",
"text/x-ocl"],["md","markdown","text/x-markdown"],["ocl","ocl","text/x-ocl"],["r","r","text/x-rsrc"],["swift","swift","text/x-swift"],["xml","xml",{name:"xml",htmlMode:!1}]],d=_.object(_.map(b,function(a){return[a[0],a[1]]})),e=_.object(_.map(b,function(a){return[a[1],a[2]]})),f=_.object(_.map(b,function(a){return[a[0],a[2]]}));c.getCodeMirrorSpecifierForLanguage=function(a){return e[a]};c.getCodeMirrorSpecifierForFileName=function(a){if(a)return a=_.last(a.split(".")),f[a]};c.getLanguageForFileName=
function(a){if(a)return a=_.last(a.split(".")),d[a]};var g=function(a){for(var b={},a=a.split(" "),c=0;c<a.length;++c)b[a[c]]=!0;return b},h=function(a,b){return b.startOfLine?(a.skipToEnd(),"meta"):!1};a.loadLibraries(["codemirror"]).then(function(){CodeMirror.defineMIME("text/x-cudasrc",{name:"clike",keywords:g("auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile inline wchar_t"),
builtin:g("__global__ __constant__ __shared__ threadIdx blockIdx gridDim blockDim __device__ __host__ __syncthreads"),blockKeywords:g("do else for if struct switch while"),atoms:g("true false null"),hooks:{"#":h}});CodeMirror.defineMIME("text/x-specmansrc",{name:"clike",keywords:g("all also as_a assert assume an and attribute bit bits bool break byte case check change compute computed cover continue cross cycle default define delay detach do down each edges else emit empty event exec expect export extend fail fall file first for force from gen global if ifdef ifndef in index int inline is instance item keep keeping key like line list machine matching me nand new nor not now of on only or out pass prev print range ranges release repeat return reverse rise routine select soft start state step string struct sync sys that then time to transition true try type undefined uint unit until using var when while with")})});
return c}]);angular.module("widgets").directive("courseCardFetcher",["cacheVersion",function(a){return{restrict:"A",scope:{cardCourses:"=",lengthOfRow:"=?",showPartners:"=?",maxImageSize:"=?",cardsPerRowOnMobile:"=?"},templateUrl:"/templates/course_card.html?"+a,controller:"courseCardFetcherHelper",link:function(a){a.setUpCards(a.cardCourses,a.lengthOfRow,a.showPartners,a.maxImageSize,a.cardsPerRowOnMobile)}}}]);angular.module("widgets").controller("courseCardFetcherHelper",["$scope","nodes","affiliates",function(a,c,b){a.partners={};var d=function(){a.finished=!0};a._calculateColumnWidth=function(a){if(!a||6<a)a=6;return Math.floor(12/a)};a._generateRows=function(b,c){var d=0;a.rows=[];var h=[];b.length<=c?a.rows=[b]:(_.each(b,function(b){d<c?(d+=1,h.push(b)):(d=1,a.rows.push(h),h=[b])}),a.rows.push(h));return a.rows};a._fetchAffiliate=function(c,d){a.partners[d]=a.partners[d]||[];_.each(c,function(c){b.get(c.key,
{projection:"image"}).then(function(b){b&&b._image_url&&a.partners[d].push({imageUrl:b._image_url,name:b.name})})})};a.fetchCards=function(b,d){return c.batchGet(b,{fresh:!1}).then(function(c){return _.without(_.map(b,function(b){var e=!1,j=c[b];if(c[b]){var l=null,k=j.catalog_entry;k&&k._image&&(l=k._image.serving_url);d&&(j.affiliate_program_refs&&0<j.affiliate_program_refs.length)&&"udacity"!==j.affiliate_program_refs[0].key&&(e=!0,a._fetchAffiliate(j.affiliate_program_refs,b));return{key:b,_slug:j._slug,
servingUrl:l,title:j.title,isNanodegree:j.isNanodegree(),isCareer:j.isCareer(),getCourseType:j.getCourseType(),showPartner:e&&d}}return null}),null)})};a._setLengthOfRow=function(a,b){return!b||6<b?6>=a?a:0===a%6?6:0===a%5?5:0===a%4?4:0===a%3?3:6:b};a.setUpCards=function(b,c,g,h,i){b?(a.lengthOfRow=a._setLengthOfRow(b.length,c),a.columnWidthClass="col-xs-"+a._calculateColumnWidth(a.lengthOfRow),a.cardImageSize=[1200/a.lengthOfRow,0],angular.isArray(h)&&2===h.length?a.cardImageSize=h:angular.isNumber(h)&&
(a.cardImageSize=[h,0]),i?1===i?a.columnWidthClass="col-xs-12 col-sm-"+a._calculateColumnWidth(a.lengthOfRow):(a.cardsPerRowOnMobile=2,a.columnWidthClass="col-xs-6 col-sm-"+a._calculateColumnWidth(a.lengthOfRow)):a.columnWidthClass="col-xs-"+a._calculateColumnWidth(a.lengthOfRow),a.fetchCards(b,g).then(function(b){return a._generateRows(b,a.lengthOfRow)})["finally"](d)):(a.rows=null,a.columnWidthClass="",d())};a.finished=!1}]);angular.module("widgets").controller("courseFeatures",["$scope","modal",function(a,c){a.chooseFeature=function(b){a.chosenFeature=b};a.launchModal=function(b,d){a.projectTitle=d;a.chooseFeature(b);c.activate("features")}}]);angular.module("widgets").directive("developmentEnvironment",["$log","$routeParams","$window","cacheVersion","currentUser","developmentEnvironments",function(a,c,b,d,e,f){return{templateUrl:"/templates/widgets/development_environment_for_account.html?"+d,scope:{accountKey:"@"},link:function(c){c.developmentEnvironment=null;c.responseMessage=null;c.currentUserKey=e.get("key");c.showCreateButton=!1;var d=function(a){a=new Blob([a],{type:"text/plain"});return(b.URL||b.webkitURL).createObjectURL(a)};
c.deleteDevelopmentEnvironment=function(){c.showWaitingImage=!0;f.deleteDevelopmentEnvironment(c.accountKey).then(function(){c.developmentEnvironment=null;c.responseMessage="Delete successful";c.showWaitingImage=!1;c.showCreateButton=!0},function(){c.responseMessage="Delete failed. Please try again later";c.showWaitingImage=!1})};f.getDevelopmentEnvironment(c.accountKey).then(function(a){c.developmentEnvironment=a;c.developmentEnvironment.url=d(a._private_key)},function(){c.showCreateButton=!0});
c.createDevelopmentEnvironment=function(){c.showWaitingImage=!0;f.createDevelopmentEnvironment(c.accountKey).then(function(a){c.developmentEnvironment=a;c.developmentEnvironment.url=d(a._private_key);c.showCreateButton=!1;c.showWaitingImage=!1;c.responseMessage=null},function(b){a.error(b);c.responseMessage="Could not create the development environment. Please try again later.";c.showWaitingImage=!1})}}}}]);angular.module("widgets").factory("guidedTour",["$q",function(a){var c=null,b=null,d=null;return{start:function(e){d&&d.reject();c=e;b=0;d=a.defer();return d.promise},goToExhibit:function(a){a=_.indexOf(c,_.findWhere(c,{id:a}));-1!==a&&(b=a)},next:function(){b<c.length-1?b+=1:(c=null,$().spotlight.clear(),d.resolve(),d=null)},previous:function(){0<b&&(b-=1)},getCurrentExhibitId:function(){return c&&c[b].id}}}]);angular.module("widgets").directive("guidedTourExhibit",["guidedTour",function(a){return{link:function(c,b,d){if(!d.guidedTourExhibit)throw Error("A guided tour placard must have a unique identifier!");b.addClass("guided-tour-exhibit-"+d.guidedTourExhibit);c.$watch(a.getCurrentExhibitId,function(a){a===d.guidedTourExhibit&&(b.spotlight({zIndex:1E4}),b.offset().top<$(window).scrollTop()?$("html, body").animate({scrollTop:b.offset().top-0.5*$(window).height()-0.5*b.outerHeight()},500):b.offset().top+
b.outerHeight()>$(window).scrollTop()+$(window).height()&&$("html, body").animate({scrollTop:b.offset().top+0.5*b.outerHeight()-0.5*$(window).height()},500))})}}}]);angular.module("widgets").directive("guidedTourPlacard",["guidedTour",function(a){return{template:'<div class="guided-tour-placard-container" data-ng-class="{\'guided-tour-placard-container-current\': show}"><div class="guided-tour-placard"></div></div>',scope:!0,transclude:!0,link:function(c,b,d,e,f){f(function(c,d){d.next=a.next;d.previous=a.previous;d.goToExhibit=a.goToExhibit;b.find(".guided-tour-placard").append(c)});b.css({"z-index":10001,position:"relative"});if(!d.guidedTourPlacard)throw Error("A guided tour placard must have a unique identifier!");
c.$watch(a.getCurrentExhibitId,function(a){if(a===d.guidedTourPlacard){var a=b.find(".guided-tour-placard-container"),e=$(".guided-tour-exhibit-"+d.guidedTourPlacard),f=a.outerWidth(),j=a.outerHeight(),l=e.offset().top,k=e.offset().left,m=e.outerWidth(),e=e.outerHeight(),n=$("html, body").outerWidth(),p=$("html, body").outerHeight(),f=_.min([{distanceToPageEdge:l,placardPosition:{exhibitSide:"top",top:e+25,left:0.5*m-0.5*f}},{distanceToPageEdge:n-(k+m),placardPosition:{exhibitSide:"right",top:0.5*
e-0.5*j,left:-1*(f+25)}},{distanceToPageEdge:p-(l+e),placardPosition:{exhibitSide:"bottom",top:-1*(j+25),left:0.5*m-0.5*f}},{distanceToPageEdge:k,placardPosition:{exhibitSide:"left",top:0.5*e-0.5*j,left:m+25}}],function(a){return a.distanceToPageEdge}).placardPosition;a.css({position:"absolute",top:f.top,left:f.left}).addClass("placard-arrow-"+f.exhibitSide);c.show=!0}else c.show=!1})}}}]);angular.module("widgets").directive("leftHandNav",["currentUser","siteExperience","nodes","lesson",function(a,c,b,d){return{replace:!0,templateUrl:"left_hand_nav.html",scope:{location:"@",courseKey:"=",lessonKey:"="},link:function(e){e.$watch("courseKey",function(c){c&&(f||(f=b.get(c)),f.then(function(b){e.semanticType=b._semantic_type||"unknown";"Degree"===e.semanticType?e.showDiscussion=!0:"Course"===e.semanticType?(e.showDiscussion=!0,a.isUserEnrolledInCourseThroughND(b).then(function(a){a||(e.forumUrl=
"http://discussions.udacity.com/c/standalone-courses/"+(b.forum_slug||""))})):e.forumUrl=""}))});d.addEventListener("lessonChange",function(a){e.lessonKey=a.lesson.key;e.forumUrl="http://discussions.udacity.com/categories"},{replayLast:!0,removeOnDestructionOf:e});var f=e.semanticType=null;e.uriEncode=function(a){return window.encodeURIComponent(a)};e.userIsLoggedIn=a.userIsLoggedIn();e.limitedAccess=c.limitedAccess;e.externalProgressSystem=c.externalProgressSystem}}}]);angular.module("widgets").directive("markdown",["$sce","$timeout","markdownConverter",function(a,c,b){return{restrict:"A",scope:!0,template:'<div class="markdown-container" data-ng-bind-html="compiledOutput"></div>',link:function(d,e,f){d.$watch(f.markdown,function(g){g?(d.compiledOutput=a.trustAsHtml(b.makeHtml(g)),c(function(){e.find("pre code").each(function(a,b){hljs.highlightBlock(b)})})):d.compiledOutput=!g&&f.placeholder?a.trustAsHtml('<span class="text-muted">'+f.placeholder+"</span>")||"":
""})}}}]);angular.module("widgets").factory("markdownConverter",[function(){var a=new window.Markdown.getSanitizingConverter;a.hooks.chain("postConversion",blankLinkTargets);return a}]);function blankLinkTargets(a){return a.replace(/<a [^>]*>/g,blankTarget)}function blankTarget(a){return a.match('target="_blank"')?a:a.replace("<a ",'<a target="_blank" ')};angular.module("widgets").directive("mathquill",["libraryLoader","$timeout",function(a,c){return{restrict:"A",link:function(b,d,e){if(e.target)b.$watch(e.watch,function(b){b&&a.loadLibraries(["mathquill"]).then(function(){c(function(){d.find(e.target).mathquill()},0,!1)})});else throw Error("Must provide a target selector to render with mathquill");}}}]);angular.module("widgets").service("MobileChecker",[function(){var a=function(){return navigator.userAgent.match(/Android/i)},c=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)};return{isIOS:c,isAndroid:a,isMobile:function(){return a()||c()}}}]).directive("mobileInstallBanner",["MobileChecker","$window",function(a,c){return{template:'<div class="mobile-install-banner" ng-if="showBanner"><div class="col-xs-10 banner-title"><strong>Udacity</strong> for {{ device }}</div><div class="col-xs-2 install-link"><a ng-href="{{device_url}}" ng-click="track()">Install</a></div></div>',
restrict:"EA",replace:!0,link:function(b){a.isMobile()&&(b.device=a.isIOS()?"iOS":"Android",b.track=function(){analytics.track("App Banner Tapped",{device:b.device},c.segmentProperties)},b.showBanner=!0,b.device_url=a.isIOS()?"https://itunes.apple.com/app/udacity-learn-programming/id819700933":"https://play.google.com/store/apps/details?id=com.udacity.android")}}}]).controller("MobileInstallController",["MobileChecker","$scope",function(a,c){c.showBanner=a.isMobile()}]);angular.module("widgets").factory("modal",["$q",function(a){var c=null,b=null,d=null,e={isModalActive:function(a){return a===c},getActiveModalData:function(){return d},activate:function(f,g){c&&e.cancel();c=f;d=g;b=a.defer();return b.promise},isActive:function(){return!!c},confirm:function(a){var d=b;b=c=null;d.resolve(a)},cancel:function(a){var d=b;b=c=null;d.reject(a)}};return e}]);angular.module("widgets").directive("modalAntiScrollHelper",["modal",function(a){return{restrict:"A",link:function(c){c.isModalActive=a.isActive}}}]);angular.module("widgets").directive("modalDialog",["modal",function(a){return{restrict:"A",transclude:!0,scope:!0,template:'<div ng-show="isModalActive(name)" class="modal"><div class="modal-backdrop"></div><div class="modal-dialog" data-ng-class="additionalClasses"><span data-ng-if="!disableClose"><button type="button" aria-label="close" class="close hanging-close" data-ng-click="cornerClose({message:\'cornerClose\'})"></button></span><div class="modal-content col-xs-12"></div></div></div>',link:function(c,
b,d,e,f){f(function(c,d){d.getData=a.getActiveModalData;d.cancel=a.cancel;d.confirm=a.confirm;b.find(".modal-content").append(c)});var g=d.closeHandler?c.$eval(d.closeHandler):void 0;c.cornerClose=function(b){return g?g(b):a.cancel(b)};c.name=d.modalDialog;c.disableClose=void 0!==d.disableClose;c.additionalClasses=d.additionalClasses||"";c.isModalActive=function(b){return a.isModalActive(b)}}}}]);angular.module("staticPages").directive("nanodegreeTile",["cacheVersion",function(a){return{restrict:"E",scope:{nd:"="},transclude:!0,templateUrl:"/templates/widgets/nanodegree_tile.html?"+a}}]).directive("nanodegreeTileHandheld",["cacheVersion",function(a){return{restrict:"E",scope:{nd:"="},transclude:!0,templateUrl:"/templates/widgets/nanodegree_tile_handheld.html?"+a}}]);angular.module("widgets").directive("pageScroller",[function(){return{link:function(a,c,b){c.on("click",function(){$("html, body").animate({scrollTop:$(b.pageScroller).offset().top},1200)});c.css("cursor","pointer")}}}]);angular.module("widgets").directive("supplementalMaterialItem",["cacheVersion","modal","canManageSite","Amplitude",function(a,c,b){return{templateUrl:function(b,c){return(c.menuDisplay?"/templates/viewer/partials/supplemental_material_item_menu_display.html?":"/templates/viewer/partials/supplemental_material_item.html?")+a},scope:{material:"=supplementalMaterialItem",premiumAccess:"=premiumAccess",nameOverride:"=?"},controller:["$scope","$window",function(a,e){a.openDownloadUrlOrDisplayUpsellModal=
function(){a.isAccessAllowed()||b?e.open(a.material._uri):c.activate("supplementalMaterialsUpsell")};a.getBaseName=function(b){if(a.nameOverride)return a.nameOverride;if(!b||-1===b.indexOf("."))return b;b=b.split(".");b.pop();return b.join(".")};a.isAccessAllowed=function(){return a.material&&(!a.material.paid_class_only||a.premiumAccess)};a.isReady=function(){return a.material&&a.material._uri}}]}}]);angular.module("widgets").directive("supplementalMaterialsUpsellModal",["cacheVersion","products","$timeout","$window","$location","couponCode","coupons","$q",function(a,c,b,d,e,f,g,h){return{templateUrl:"/templates/widgets/supplemental_materials_upsell_modal.html?"+a,scope:{productId:"=",courseKey:"="},controller:["$scope",function(a){var j=a.$watch("productId",function(l){l&&(b(function(){c.get(l).then(function(b){var c=h.when({});f&&(c=g.computeDiscount(f,a.productId));c.then(function(c){a.productPrice=
c.result||b.amount;a.productCurrency=b.currency;a.productId=l})})},5E3),a.getLearnMoreUrl=function(){return"/what-we-offer#!/?courseKey="+d.encodeURIComponent(a.courseKey)+"&start="+d.encodeURIComponent(e.absUrl())},j())})}]}}]);angular.module("widgets").controller("tracksLoader",["$scope","nodes","slugifyFilter",function(a,c,b){a.loadTracks=function(d){return c.batchGet(d).then(function(c){a.tracks=_.without(_.map(d,function(a){return!c||!c[a]?null:"Other"===c[a].title||"All"===c[a].title?null:{title:c[a].title,icon:c[a]._icon?c[a]._icon.serving_url:"http://placekitten.com/45/45",catalogLink:"/courses/"+b(c[a].title)}}),null);return a._generateRows(a.tracks)})};a._generateRows=function(b){var c=0;a.rows=[];var f=[];_.each(b,
function(b){3>c?(c+=1,b.position=c,f.push(b)):(c=1,a.rows.push(f),b.position=c,f=[b])});a.rows.push(f);return a.rows};a.fetchTracks=function(){return c.get("course_catalog").then(function(b){a._trackKeys=[];if(b&&b.steps_refs)return a._trackKeys=_.map(b.steps_refs,function(a){return a.key}),a.loadTracks(a._trackKeys)})};a.fetchTracks()}]);angular.module("widgets").directive("uploadInput",["fileQueue",function(a){return{replace:!0,scope:{uploadPath:"=",servingProperty:"=?",name:"=?",onSuccess:"=?",onError:"=?"},template:'<form><input type="file" name="file"><span data-ng-if="task"><button class="btn btn-mini btn-danger" data-ng-click="cancel()"><span class="glyphicon glyphicon-remove"></span></button><progress value="{{loaded}}" max="{{total}}"> Progressing</progress></span></form>',link:function(c,b){c.name||(c.name="Upload to "+c.uploadPath);
var d=function(){c.task=null;c.loaded=0;c.total=1;b.prepend('<input type="file" name="file">');b.find("input").bind("change",e)},e=function(e){c.task=a.fileUploadTask(c.uploadPath,e.target.files[0],c.name);c.task.notify(function(a){c.loaded=a.loaded;c.total=a.total});c.task.then(function(a){c.servingProperty=a.media;return a}).then(c.onSuccess||angular.noop,c.onError||angular.noop);c.task["finally"](d);b.find("input").remove();c.$apply()};c.cancel=function(){c.task&&c.task.cancel()};b.find("input").bind("change",
e);c.task=a.uploadQueue.getUniqueTask(c.uploadPath);c.task&&(c.task.notify(function(a){c.loaded=a.loaded;c.total=a.total}),b.find("input").remove(),c.task["finally"](d))}}}]);angular.module("widgets").directive("upsellBanner",["currentUser","cookieJar","nodeUtility","cacheVersion","$location","$window","safelyRedirect",function(a,c,b,d,e,f,g){return{restrict:"A",templateUrl:function(a,b){if("banner"!==b.bannerStyle){if("check"===b.bannerStyle)return"/templates/viewer/upsell_check.html?"+d;if("pad"===b.bannerStyle)return"/templates/viewer/upsell_pad.html?"+d}return"/templates/viewer/upsell_banner.html?"+d},link:function(d,i,j){d.$watch("course",function(g){if(g){var i=
_.find(a.get("_enrollments"),function(a){return a.node_key===g.key}),i=i&&b.isCurrentEnrolled(i,g),m;m="pad"===j.bannerStyle?c.exists("upsell-cancel-banner-progress"):c.exists("upsell-cancel-banner-viewer");d.showBanner=!m&&d.course.catalog_entry.paid_class&&d.course.catalog_entry.paid_class.open_for_enrollment&&!i;d.learnMore="/success#!/?courseKey="+f.encodeURIComponent(g.key)+"&start="+f.encodeURIComponent(e.absUrl())}else d.showBanner=!1});d.goToPurchase=function(a){f.location.href="/checkout#!/0?products="+
f.encodeURIComponent(_.first(a.catalog_entry.paid_class.class_product_refs).key)};d.cancelBanner=function(){c.set("upsell-cancel-banner-"+("pad"===j.bannerStyle?"progress":"viewer"),!0);d.showBanner=!1};d.goEnroll=function(){d.course&&g("/course/"+encodeURIComponent(d.course.key))}}}}]).directive("upsellHeader",["currentUser","cookieJar","nodeUtility","$location","cacheVersion","nodes","products","$window",function(a,c,b,d,e,f,g,h){return{restrict:"A",templateUrl:"/templates/upsell_header.html?"+
e,link:function(a){a.courseKey=d.search().courseKey;a.start=d.search().start;f.get(a.courseKey).then(function(b){b&&(b.catalog_entry&&b.catalog_entry.paid_class)&&g.get(_.first(b.catalog_entry.paid_class.class_product_refs).key).then(function(c){a.course=b;a.product=c})});a.goClass=function(){a.course&&(h.location.href=a.start)};a.goEnroll=function(){a._purchaseCourse()};a._purchaseCourse=function(){h.location.href="/checkout#!/0?products="+h.encodeURIComponent(a.product.key)}}}}]);angular.module("widgets").directive("videoPlayer",["youtubeVideoPlayer",function(a){return{restrict:"A",link:function(c,b,d){a.addEventListener("apiReady",function(){a.attach(b.get(0),d.videoId,{autoPlay:d.autoPlay||0,controls:d.controls})},{replayLast:!0,removeOnDestructionOf:c})}}}]);angular.module("widgets").directive("vimeoVideoPlayer",[function(){return{replace:!0,restrict:"E",template:'<iframe id="{{id}}" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',link:function(a,c,b){var d=b.id.trim();c.attr("src","https://player.vimeo.com/video/"+b.vid+"?api=1&player_id="+a.id);a.$on("playVideo",function(a,b){if(b==d){var g=JSON.stringify({method:"play"});c[0].contentWindow.postMessage(g,"*")}});a.$on("pauseVideo",function(a,
b){if(b==d){var g=JSON.stringify({method:"pause"});c[0].contentWindow.postMessage(g,"*")}})}}}]);angular.module("widgets").run(function(){var a=document.createElement("script");a.src="//www.youtube.com/iframe_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}).service("youtubeVideoPlayer",["mixin","currentUser","techDetect",function(a,c,b){var d={},e=null,f=(c=c.get("site_preferences"))?c.playback_rate:1,g=c?c.video_quality:"auto",h=c?c.use_html5_player:!0;"default"===g&&(g="auto");"Explorer"===b.browserStats().browser&&(h=!1);var i={small:0,medium:1,large:2,
hd720:3,hd1080:4,highres:5};window.onYouTubeIframeAPIReady=function(){d.attach=function(a,b,c){if(!_.isElement(a))throw"Must attach youtube player to a DOM element!";e&&(e=null);b={height:"523",width:"930",videoId:b,playerVars:{autoplay:c.autoPlay||0,color:"red",controls:angular.isDefined(c.controls)?c.controls:1,rel:0,showinfo:0,fs:1,theme:"light",wmode:"opaque"},events:{onReady:function(){d.emitEvent("ready");d.setPlaybackRate(f);d.setPlaybackQuality(g)},onPlaybackRateChange:function(a){f=a.data;
d.emitEvent("playbackRateChange",a.data)},onPlaybackQualityChange:function(a){var b=e.getAvailableQualityLevels();i[a.data]>i[g]?g=a.data:i[a.data]<i[b[0]]&&(g=a.data);d.emitEvent("playbackQualityChange",a.data)},onStateChange:function(a){a.data===YT.PlayerState.ENDED?d.emitEvent("videoEnd"):a.data===YT.PlayerState.PAUSED?d.emitEvent("videoPause",Math.floor(e.getCurrentTime())):a.data===YT.PlayerState.PLAYING&&d.emitEvent("videoPlay",Math.floor(e.getCurrentTime()))}}};h&&(b.playerVars.html5=1);if(-1!==
window.location.href.indexOf("c-ud304")||-1!==window.location.href.indexOf("c-ud436"))b.playerVars.iv_load_policy=3;e=new YT.Player(a,b)};d.emitEvent("apiReady")};d.getAvailablePlaybackRates=function(){return e.getAvailablePlaybackRates()};d.getCurrentPlaybackRate=function(){return e&&e.getPlaybackRate?e.getPlaybackRate():f};d.setPlaybackRate=function(a){f=a;window.setTimeout(function(){e.setPlaybackRate(a)},500)};d.setPlaybackQuality=function(a){f=a;e.setPlaybackQuality(a)};d.playVideo=function(){e&&
e.playVideo?e.playVideo():console.error("The video player isn't ready or there is no video player on this page!")};d.pauseVideo=function(){if(e&&e.pauseVideo&&e.getCurrentTime){try{e.pauseVideo()}catch(a){console.error("YouTube threw an error while trying to call its own pause function!",a)}d.emitEvent("videoPause",Math.floor(e.getCurrentTime()))}};d.stopVideo=function(){e.stopVideo()};d.destroyVideo=function(){e.stopVideo();e.destroy()};d.loadVideo=function(a,b,c){e.loadVideoById?(e.loadVideoById(a,
b||0,c||g),d.setPlaybackRate(f),d.setPlaybackQuality(g)):d.addEventListener("ready",function(){e.loadVideoById(a,b||0,c||g)},{removeAfterFired:!0})};d.getCurrentTime=function(){return e&&e.getCurrentTime?Math.floor(e.getCurrentTime()):null};return a.eventEmission(d,"apiReady ready videoEnd videoPlay videoPause playbackRateChange playbackQualityChange".split(" "))}]);
